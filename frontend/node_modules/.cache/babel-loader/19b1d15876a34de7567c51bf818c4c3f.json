{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar flatten = function flatten(arr) {\n  return arr.reduce(function (flat, toFlatten) {\n    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n  }, []);\n};\n\nvar extractSuggestion = function extractSuggestion(val) {\n  switch (typeof val) {\n    case 'string':\n      return val;\n\n    case 'object':\n      if (Array.isArray(val)) {\n        return flatten(val);\n      }\n\n      return null;\n\n    default:\n      return val;\n  }\n};\n\nfunction replaceDiacritics(s) {\n  var str = s ? String(s) : s;\n  var diacritics = [/[\\300-\\306]/g, /[\\340-\\346]/g, /[\\310-\\313]/g, /[\\350-\\353]/g, /[\\314-\\317]/g, /[\\354-\\357]/g, /[\\322-\\330]/g, /[\\362-\\370]/g, /[\\331-\\334]/g, /[\\371-\\374]/g, /[\\321]/g, /[\\361]/g, /[\\307]/g, /[\\347]/g];\n  var chars = ['A', 'a', 'E', 'e', 'I', 'i', 'O', 'o', 'U', 'u', 'N', 'n', 'C', 'c'];\n\n  for (var i = 0; i < diacritics.length; i += 1) {\n    str = str.replace(diacritics[i], chars[i]);\n  }\n\n  return str;\n}\n\nvar getSuggestions = function getSuggestions(fields, suggestions, currentValue) {\n  var suggestionProperties = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  var suggestionsList = [];\n  var labelsList = [];\n\n  var populateSuggestionsList = function populateSuggestionsList(val, parsedSource, source) {\n    var isWordMatch = currentValue.trim().split(' ').some(function (term) {\n      return replaceDiacritics(val).toLowerCase().includes(replaceDiacritics(term));\n    });\n\n    if (isWordMatch && !labelsList.includes(val) || source._promoted) {\n      var defaultOption = {\n        label: val,\n        value: val,\n        source: source\n      };\n      var additionalKeys = {};\n\n      if (Array.isArray(suggestionProperties) && suggestionProperties.length > 0) {\n        suggestionProperties.forEach(function (prop) {\n          if (parsedSource.hasOwnProperty(prop)) {\n            additionalKeys = _extends({}, additionalKeys, _defineProperty({}, prop, parsedSource[prop]));\n          }\n        });\n      }\n\n      var option = _extends({}, defaultOption, additionalKeys);\n\n      labelsList = [].concat(_toConsumableArray(labelsList), [val]);\n      suggestionsList = [].concat(_toConsumableArray(suggestionsList), [option]);\n    }\n  };\n\n  var parseField = function parseField(parsedSource, field) {\n    var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : parsedSource;\n\n    if (typeof parsedSource === 'object') {\n      var fieldNodes = field.split('.');\n      var label = parsedSource[fieldNodes[0]];\n\n      if (label) {\n        if (fieldNodes.length > 1) {\n          var children = field.substring(fieldNodes[0].length + 1);\n\n          if (Array.isArray(label)) {\n            label.forEach(function (arrayItem) {\n              parseField(arrayItem, children, source);\n            });\n          } else {\n            parseField(label, children, source);\n          }\n        } else {\n          var val = extractSuggestion(label);\n\n          if (val) {\n            if (Array.isArray(val)) {\n              val.forEach(function (suggestion) {\n                return populateSuggestionsList(suggestion, parsedSource, source);\n              });\n            } else {\n              populateSuggestionsList(val, parsedSource, source);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  suggestions.forEach(function (item) {\n    fields.forEach(function (field) {\n      parseField(item, field);\n    });\n  });\n  return suggestionsList;\n};\n\nexports.default = getSuggestions;","map":{"version":3,"sources":["C:/Users/victoria/Documents/Project/simplePOS/frontend/node_modules/@appbaseio/reactivecore/lib/utils/suggestions.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","obj","enumerable","configurable","writable","flatten","reduce","flat","toFlatten","concat","extractSuggestion","val","replaceDiacritics","s","str","String","diacritics","chars","replace","getSuggestions","fields","suggestions","currentValue","suggestionProperties","undefined","suggestionsList","labelsList","populateSuggestionsList","parsedSource","isWordMatch","trim","split","some","term","toLowerCase","includes","_promoted","defaultOption","label","additionalKeys","forEach","prop","option","parseField","field","fieldNodes","children","substring","arrayItem","suggestion","item","default"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var flatten=function flatten(arr){return arr.reduce(function(flat,toFlatten){return flat.concat(Array.isArray(toFlatten)?flatten(toFlatten):toFlatten);},[]);};var extractSuggestion=function extractSuggestion(val){switch(typeof val){case'string':return val;case'object':if(Array.isArray(val)){return flatten(val);}return null;default:return val;}};function replaceDiacritics(s){var str=s?String(s):s;var diacritics=[/[\\300-\\306]/g,/[\\340-\\346]/g,/[\\310-\\313]/g,/[\\350-\\353]/g,/[\\314-\\317]/g,/[\\354-\\357]/g,/[\\322-\\330]/g,/[\\362-\\370]/g,/[\\331-\\334]/g,/[\\371-\\374]/g,/[\\321]/g,/[\\361]/g,/[\\307]/g,/[\\347]/g];var chars=['A','a','E','e','I','i','O','o','U','u','N','n','C','c'];for(var i=0;i<diacritics.length;i+=1){str=str.replace(diacritics[i],chars[i]);}return str;}var getSuggestions=function getSuggestions(fields,suggestions,currentValue){var suggestionProperties=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var suggestionsList=[];var labelsList=[];var populateSuggestionsList=function populateSuggestionsList(val,parsedSource,source){var isWordMatch=currentValue.trim().split(' ').some(function(term){return replaceDiacritics(val).toLowerCase().includes(replaceDiacritics(term));});if(isWordMatch&&!labelsList.includes(val)||source._promoted){var defaultOption={label:val,value:val,source:source};var additionalKeys={};if(Array.isArray(suggestionProperties)&&suggestionProperties.length>0){suggestionProperties.forEach(function(prop){if(parsedSource.hasOwnProperty(prop)){additionalKeys=_extends({},additionalKeys,_defineProperty({},prop,parsedSource[prop]));}});}var option=_extends({},defaultOption,additionalKeys);labelsList=[].concat(_toConsumableArray(labelsList),[val]);suggestionsList=[].concat(_toConsumableArray(suggestionsList),[option]);}};var parseField=function parseField(parsedSource,field){var source=arguments.length>2&&arguments[2]!==undefined?arguments[2]:parsedSource;if(typeof parsedSource==='object'){var fieldNodes=field.split('.');var label=parsedSource[fieldNodes[0]];if(label){if(fieldNodes.length>1){var children=field.substring(fieldNodes[0].length+1);if(Array.isArray(label)){label.forEach(function(arrayItem){parseField(arrayItem,children,source);});}else{parseField(label,children,source);}}else{var val=extractSuggestion(label);if(val){if(Array.isArray(val)){val.forEach(function(suggestion){return populateSuggestionsList(suggestion,parsedSource,source);});}else{populateSuggestionsList(val,parsedSource,source);}}}}}};suggestions.forEach(function(item){fields.forEach(function(field){parseField(item,field);});});return suggestionsList;};exports.default=getSuggestions;"]},"metadata":{},"sourceType":"script"}