{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withClickIds = exports.getCompositeAggsQuery = exports.getAggsQuery = exports.extractQueryFromDefaultQuery = exports.updateInternalQuery = exports.getSearchState = exports.getOptionsFromQuery = exports.parseHits = exports.handleA11yAction = exports.getInnerKey = exports.getClassName = exports.checkSomePropChange = exports.checkPropChange = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.isEqual = isEqual;\nexports.debounce = debounce;\nexports.getQueryOptions = getQueryOptions;\nexports.buildQuery = buildQuery;\nexports.pushToAndClause = pushToAndClause;\nexports.checkValueChange = checkValueChange;\nexports.getAggsOrder = getAggsOrder;\nexports.formatDate = formatDate;\nexports.getResultStats = getResultStats;\nexports.handleOnSuggestions = handleOnSuggestions;\n\nvar _dateFormats = require('./dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _suggestions = require('./suggestions');\n\nvar _suggestions2 = _interopRequireDefault(_suggestions);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction isEqual(x, y) {\n  if (x === y) return true;\n  if (!(x instanceof Object) || !(y instanceof Object)) return false;\n  if (x.constructor !== y.constructor) return false;\n\n  for (var p in x) {\n    if (!x.hasOwnProperty(p)) continue;\n    if (!y.hasOwnProperty(p)) return false;\n    if (x[p] === y[p]) continue;\n    if (typeof x[p] !== 'object') return false;\n    if (!isEqual(x[p], y[p])) return false;\n  }\n\n  for (var _p in y) {\n    if (y.hasOwnProperty(_p) && !x.hasOwnProperty(_p)) return false;\n  }\n\n  return true;\n}\n\nfunction debounce(callback, wait) {\n  var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n  var timeout = null;\n  var callbackArgs = null;\n\n  var later = function later() {\n    return callback.apply(context, callbackArgs);\n  };\n\n  return function debouncedFunction() {\n    callbackArgs = arguments;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nfunction getQueryOptions(props) {\n  var options = {};\n\n  if (props.size !== undefined) {\n    options.size = props.size;\n  }\n\n  if (props.includeFields || props.excludeFields) {\n    var source = {};\n\n    if (props.includeFields) {\n      source.includes = props.includeFields;\n    }\n\n    if (props.excludeFields) {\n      source.excludes = props.excludeFields;\n    }\n\n    options._source = source;\n  }\n\n  return options;\n}\n\nfunction getOperation(conjunction) {\n  if (conjunction === 'and') {\n    return 'must';\n  }\n\n  if (conjunction === 'or') {\n    return 'should';\n  }\n\n  return 'must_not';\n}\n\nfunction createBoolQuery(operation, query) {\n  var resultQuery = null;\n\n  if (Array.isArray(query) && query.length || !Array.isArray(query) && query) {\n    resultQuery = {\n      bool: _defineProperty({}, operation, query)\n    };\n  }\n\n  if (operation === 'should' && resultQuery) {\n    resultQuery = {\n      bool: _extends({}, resultQuery.bool, {\n        minimum_should_match: 1\n      })\n    };\n  }\n\n  return resultQuery;\n}\n\nfunction getQuery(react, queryList) {\n  var query = [];\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      var operation = getOperation(conjunction);\n      var queryArr = react[conjunction].map(function (comp) {\n        if (typeof comp !== 'string') {\n          return getQuery(comp, queryList);\n        } else if (comp in queryList) {\n          return queryList[comp];\n        }\n\n        return null;\n      }).filter(function (item) {\n        return !!item;\n      });\n      var boolQuery = createBoolQuery(operation, queryArr);\n\n      if (boolQuery) {\n        query = [].concat(_toConsumableArray(query), [boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'string') {\n      var _operation = getOperation(conjunction);\n\n      var _boolQuery = createBoolQuery(_operation, queryList[react[conjunction]]);\n\n      if (_boolQuery) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null) {\n      var _boolQuery2 = getQuery(react[conjunction], queryList);\n\n      if (_boolQuery2) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery2]);\n      }\n    }\n  });\n\n  if (Array.isArray(query) && query.length) {\n    return {\n      bool: {\n        must: query\n      }\n    };\n  }\n\n  if (query && Object.keys(query).length) {\n    return query;\n  }\n\n  return null;\n}\n\nfunction getExternalQueryOptions(react, options, component) {\n  var queryOptions = {};\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      react[conjunction].forEach(function (comp) {\n        if (options[comp]) {\n          queryOptions = _extends({}, queryOptions, options[comp]);\n        }\n      });\n    } else if (typeof react[conjunction] === 'string') {\n      if (options[react[conjunction]]) {\n        queryOptions = _extends({}, queryOptions, options[react[conjunction]]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null && !Array.isArray(react[conjunction])) {\n      queryOptions = _extends({}, queryOptions, getExternalQueryOptions(react[conjunction], options));\n    }\n  });\n\n  if (options[component]) {\n    queryOptions = _extends({}, queryOptions, options[component]);\n  }\n\n  return queryOptions;\n}\n\nfunction buildQuery(component, dependencyTree, queryList, queryOptions) {\n  var queryObj = null;\n  var options = null;\n\n  if (component in dependencyTree) {\n    queryObj = getQuery(dependencyTree[component], queryList);\n    options = getExternalQueryOptions(dependencyTree[component], queryOptions, component);\n  }\n\n  return {\n    queryObj: queryObj,\n    options: options\n  };\n}\n\nfunction pushToAndClause(reactProp, component) {\n  var react = _extends({}, reactProp);\n\n  if (react.and) {\n    if (Array.isArray(react.and)) {\n      react.and = [].concat(_toConsumableArray(react.and), [component]);\n      return react;\n    } else if (typeof react.and === 'string') {\n      react.and = [react.and, component];\n      return react;\n    }\n\n    react.and = pushToAndClause(react.and, component);\n    return react;\n  }\n\n  return _extends({}, react, {\n    and: component\n  });\n}\n\nfunction checkValueChange(componentId, value, beforeValueChange, performUpdate) {\n  var selectedValue = value;\n\n  if (Array.isArray(value) && !value.length) {\n    selectedValue = null;\n  }\n\n  if (beforeValueChange) {\n    beforeValueChange(selectedValue).then(performUpdate).catch(function (e) {\n      console.warn(componentId + ' - beforeValueChange rejected the promise with ', e);\n    });\n  } else {\n    performUpdate();\n  }\n}\n\nfunction getAggsOrder(sortBy) {\n  if (sortBy === 'count') {\n    return {\n      _count: 'desc'\n    };\n  }\n\n  return {\n    _term: sortBy\n  };\n}\n\nvar checkPropChange = exports.checkPropChange = function checkPropChange(prevProp, nextProp, callback) {\n  if (!isEqual(prevProp, nextProp)) {\n    callback();\n    return true;\n  }\n\n  return false;\n};\n\nvar checkSomePropChange = exports.checkSomePropChange = function checkSomePropChange(prevProps, nextProps, propsList, callback) {\n  propsList.some(function (prop) {\n    return checkPropChange(prevProps[prop], nextProps[prop], callback);\n  });\n};\n\nvar getClassName = exports.getClassName = function getClassName(classMap, component) {\n  return classMap && classMap[component] || '';\n};\n\nvar getInnerKey = exports.getInnerKey = function getInnerKey(obj, key) {\n  return obj && obj[key] || {};\n};\n\nvar handleA11yAction = exports.handleA11yAction = function handleA11yAction(e, callback) {\n  if (e.key === 'Enter' || e.key === ' ') {\n    e.preventDefault();\n    callback();\n  }\n};\n\nvar highlightResults = function highlightResults(result) {\n  var data = _extends({}, result);\n\n  if (data.highlight) {\n    Object.keys(data.highlight).forEach(function (highlightItem) {\n      var highlightValue = data.highlight[highlightItem][0];\n      data._source = _extends({}, data._source, _defineProperty({}, highlightItem, highlightValue));\n    });\n  }\n\n  return data;\n};\n\nvar parseHits = exports.parseHits = function parseHits(hits) {\n  var results = null;\n\n  if (hits) {\n    results = [].concat(_toConsumableArray(hits)).map(function (item) {\n      var streamProps = {};\n\n      if (item._updated) {\n        streamProps._updated = item._updated;\n      } else if (item._deleted) {\n        streamProps._deleted = item._deleted;\n      }\n\n      var data = highlightResults(item);\n      var result = Object.keys(data).filter(function (key) {\n        return key !== '_source';\n      }).reduce(function (obj, key) {\n        obj[key] = data[key];\n        return obj;\n      }, _extends({\n        highlight: data.highlight || {}\n      }, data._source, streamProps));\n      return result;\n    });\n  }\n\n  return results;\n};\n\nfunction formatDate(date, props) {\n  if (props.parseDate) {\n    return props.parseDate(date, props);\n  }\n\n  switch (props.queryFormat) {\n    case 'epoch_millis':\n      return date.getTime();\n\n    case 'epoch_seconds':\n      return Math.floor(date.getTime() / 1000);\n\n    default:\n      {\n        if (_dateFormats2.default[props.queryFormat]) {\n          return date.toString(_dateFormats2.default[props.queryFormat]);\n        }\n\n        return date.getTime();\n      }\n  }\n}\n\nvar getOptionsFromQuery = function getOptionsFromQuery() {\n  var customQuery = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (customQuery) {\n    var query = customQuery.query,\n        rest = _objectWithoutProperties(customQuery, ['query']);\n\n    return Object.keys(rest).length ? rest : null;\n  }\n\n  return null;\n};\n\nexports.getOptionsFromQuery = getOptionsFromQuery;\n\nfunction computeResultStats(hits, searchState, promotedResults) {\n  Object.keys(hits).forEach(function (componentId) {\n    var _ref = hits[componentId] || {},\n        hidden = _ref.hidden,\n        total = _ref.total,\n        time = _ref.time;\n\n    searchState[componentId] = _extends({}, searchState[componentId], {\n      resultStats: _extends({}, searchState[componentId].resultStats, {\n        numberOfResults: total,\n        time: time,\n        promoted: promotedResults[componentId] && promotedResults[componentId].length,\n        hidden: hidden || 0\n      })\n    });\n  });\n}\n\nvar getSearchState = exports.getSearchState = function getSearchState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var forHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var selectedValues = state.selectedValues,\n      queryLog = state.queryLog,\n      dependencyTree = state.dependencyTree,\n      props = state.props,\n      hits = state.hits,\n      aggregations = state.aggregations,\n      isLoading = state.isLoading,\n      error = state.error,\n      promotedResults = state.promotedResults;\n  var searchState = {};\n\n  var populateState = function populateState() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var key = arguments[1];\n    return Object.keys(obj).forEach(function (componentId) {\n      searchState[componentId] = _extends({}, searchState[componentId], key ? _defineProperty({}, key, obj[componentId]) : obj[componentId]);\n    });\n  };\n\n  populateState(props);\n  Object.keys(selectedValues).forEach(function (componentId) {\n    var componentState = searchState[componentId];\n    var selectedValue = selectedValues[componentId];\n\n    if (selectedValue) {\n      searchState[componentId] = _extends({}, componentState, _extends({\n        title: selectedValue.label,\n        componentType: selectedValue.componentType,\n        value: selectedValue.value\n      }, selectedValue.category && {\n        category: selectedValue.category\n      }, {\n        URLParams: selectedValue.URLParams\n      }));\n    }\n  });\n\n  if (!forHeaders) {\n    populateState(queryLog);\n    populateState(hits, 'hits');\n    populateState(aggregations, 'aggregations');\n    populateState(isLoading, 'isLoading');\n    populateState(error, 'error');\n    populateState(promotedResults, 'promotedData');\n    computeResultStats(hits, searchState, promotedResults);\n  }\n\n  populateState(dependencyTree, 'react');\n  return searchState;\n};\n\nvar updateInternalQuery = exports.updateInternalQuery = function updateInternalQuery(componentId, queryOptions, value, props, defaultQueryToExecute, queryParams) {\n  var defaultQuery = props.defaultQuery;\n  var defaultQueryOptions = void 0;\n  var query = void 0;\n\n  if (defaultQuery) {\n    var queryTobeSet = defaultQuery(value, props);\n\n    var _ref3 = queryTobeSet || {};\n\n    query = _ref3.query;\n    defaultQueryOptions = getOptionsFromQuery(queryTobeSet);\n  }\n\n  props.setQueryOptions(componentId, _extends({}, defaultQueryOptions, queryOptions || defaultQueryToExecute));\n\n  if (query) {\n    props.updateQuery(_extends({\n      componentId: componentId,\n      query: query\n    }, queryParams));\n  }\n};\n\nvar extractQueryFromDefaultQuery = function extractQueryFromDefaultQuery(defaultQuery) {\n  var queryToBeReturned = {};\n\n  if (defaultQuery) {\n    var evaluateQuery = defaultQuery();\n\n    if (evaluateQuery) {\n      var query = evaluateQuery.query,\n          options = _objectWithoutProperties(evaluateQuery, ['query']);\n\n      if (options) {\n        queryToBeReturned = options;\n      }\n    }\n  }\n\n  return queryToBeReturned;\n};\n\nexports.extractQueryFromDefaultQuery = extractQueryFromDefaultQuery;\n\nvar getAggsQuery = exports.getAggsQuery = function getAggsQuery(query, props) {\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      missingLabel = props.missingLabel;\n  clonedQuery.size = 0;\n  clonedQuery.aggs = _defineProperty({}, dataField, {\n    terms: _extends({\n      field: dataField,\n      size: size,\n      order: getAggsOrder(sortBy || 'count')\n    }, showMissing ? {\n      missing: missingLabel\n    } : {})\n  });\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props.defaultQuery));\n};\n\nvar getCompositeAggsQuery = exports.getCompositeAggsQuery = function getCompositeAggsQuery(query, props, after) {\n  var showTopHits = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      aggregationField = props.aggregationField;\n  var finalField = aggregationField || dataField;\n  var order = sortBy === 'count' ? {} : {\n    order: sortBy\n  };\n  clonedQuery.aggs = _defineProperty({}, finalField, _extends({\n    composite: _extends({\n      sources: [_defineProperty({}, finalField, {\n        terms: _extends({\n          field: finalField\n        }, order, showMissing ? {\n          missing_bucket: true\n        } : {})\n      })],\n      size: size\n    }, after)\n  }, showTopHits ? {\n    aggs: _defineProperty({}, finalField, {\n      top_hits: {\n        size: 1\n      }\n    })\n  } : {}));\n  clonedQuery.size = 0;\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props.defaultQuery));\n};\n\nvar withClickIds = exports.withClickIds = function withClickIds() {\n  var results = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return results.map(function (result, index) {\n    return _extends({}, result, {\n      _click_id: index\n    });\n  });\n};\n\nfunction getResultStats(props) {\n  var total = props.total,\n      size = props.size,\n      time = props.time,\n      hidden = props.hidden,\n      promotedResults = props.promotedResults;\n  return _extends({\n    numberOfResults: total\n  }, size > 0 ? {\n    numberOfPages: Math.ceil(total / size)\n  } : null, {\n    time: time,\n    hidden: hidden,\n    promoted: promotedResults && promotedResults.length\n  });\n}\n\nfunction handleOnSuggestions(results, currentValue, props) {\n  var parseSuggestion = props.parseSuggestion,\n      promotedResults = props.promotedResults;\n  var fields = Array.isArray(props.dataField) ? props.dataField : [props.dataField];\n  var newResults = parseHits(results);\n\n  if (promotedResults.length) {\n    var ids = promotedResults.map(function (item) {\n      return item._id;\n    }).filter(Boolean);\n\n    if (ids) {\n      newResults = newResults.filter(function (item) {\n        return !ids.includes(item._id);\n      });\n    }\n\n    newResults = [].concat(_toConsumableArray(promotedResults), _toConsumableArray(newResults));\n  }\n\n  var parsedSuggestions = (0, _suggestions2.default)(fields, newResults, currentValue.toLowerCase());\n\n  if (parseSuggestion) {\n    return parsedSuggestions.map(function (suggestion) {\n      return parseSuggestion(suggestion);\n    });\n  }\n\n  return parsedSuggestions;\n}","map":{"version":3,"sources":["C:/Users/victoria/Documents/Project/simplePOS/frontend/node_modules/@appbaseio/reactivecore/lib/utils/helper.js"],"names":["Object","defineProperty","exports","value","withClickIds","getCompositeAggsQuery","getAggsQuery","extractQueryFromDefaultQuery","updateInternalQuery","getSearchState","getOptionsFromQuery","parseHits","handleA11yAction","getInnerKey","getClassName","checkSomePropChange","checkPropChange","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","isEqual","debounce","getQueryOptions","buildQuery","pushToAndClause","checkValueChange","getAggsOrder","formatDate","getResultStats","handleOnSuggestions","_dateFormats","require","_dateFormats2","_interopRequireDefault","_suggestions","_suggestions2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","enumerable","configurable","writable","x","y","constructor","p","_p","callback","wait","context","timeout","callbackArgs","later","apply","debouncedFunction","clearTimeout","setTimeout","props","options","size","includeFields","excludeFields","includes","excludes","_source","getOperation","conjunction","createBoolQuery","operation","query","resultQuery","bool","minimum_should_match","getQuery","react","queryList","forEach","queryArr","map","comp","filter","item","boolQuery","concat","_operation","_boolQuery","_boolQuery2","must","getExternalQueryOptions","component","queryOptions","dependencyTree","queryObj","reactProp","and","componentId","beforeValueChange","performUpdate","selectedValue","then","catch","e","console","warn","sortBy","_count","_term","prevProp","nextProp","prevProps","nextProps","propsList","some","prop","classMap","preventDefault","highlightResults","result","data","highlight","highlightItem","highlightValue","hits","results","streamProps","_updated","_deleted","reduce","date","parseDate","queryFormat","getTime","Math","floor","toString","customQuery","rest","computeResultStats","searchState","promotedResults","_ref","hidden","total","time","resultStats","numberOfResults","promoted","state","forHeaders","selectedValues","queryLog","aggregations","isLoading","error","populateState","componentState","title","label","componentType","category","URLParams","defaultQueryToExecute","queryParams","defaultQuery","defaultQueryOptions","queryTobeSet","_ref3","setQueryOptions","updateQuery","queryToBeReturned","evaluateQuery","clonedQuery","dataField","showMissing","missingLabel","aggs","terms","field","order","missing","nestedField","reactivesearch_nested","nested","path","after","showTopHits","aggregationField","finalField","composite","sources","missing_bucket","top_hits","index","_click_id","numberOfPages","ceil","currentValue","parseSuggestion","fields","newResults","ids","_id","Boolean","parsedSuggestions","toLowerCase","suggestion"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});exports.withClickIds=exports.getCompositeAggsQuery=exports.getAggsQuery=exports.extractQueryFromDefaultQuery=exports.updateInternalQuery=exports.getSearchState=exports.getOptionsFromQuery=exports.parseHits=exports.handleA11yAction=exports.getInnerKey=exports.getClassName=exports.checkSomePropChange=exports.checkPropChange=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.isEqual=isEqual;exports.debounce=debounce;exports.getQueryOptions=getQueryOptions;exports.buildQuery=buildQuery;exports.pushToAndClause=pushToAndClause;exports.checkValueChange=checkValueChange;exports.getAggsOrder=getAggsOrder;exports.formatDate=formatDate;exports.getResultStats=getResultStats;exports.handleOnSuggestions=handleOnSuggestions;var _dateFormats=require('./dateFormats');var _dateFormats2=_interopRequireDefault(_dateFormats);var _suggestions=require('./suggestions');var _suggestions2=_interopRequireDefault(_suggestions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function isEqual(x,y){if(x===y)return true;if(!(x instanceof Object)||!(y instanceof Object))return false;if(x.constructor!==y.constructor)return false;for(var p in x){if(!x.hasOwnProperty(p))continue;if(!y.hasOwnProperty(p))return false;if(x[p]===y[p])continue;if(typeof x[p]!=='object')return false;if(!isEqual(x[p],y[p]))return false;}for(var _p in y){if(y.hasOwnProperty(_p)&&!x.hasOwnProperty(_p))return false;}return true;}function debounce(callback,wait){var context=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var timeout=null;var callbackArgs=null;var later=function later(){return callback.apply(context,callbackArgs);};return function debouncedFunction(){callbackArgs=arguments;clearTimeout(timeout);timeout=setTimeout(later,wait);};}function getQueryOptions(props){var options={};if(props.size!==undefined){options.size=props.size;}if(props.includeFields||props.excludeFields){var source={};if(props.includeFields){source.includes=props.includeFields;}if(props.excludeFields){source.excludes=props.excludeFields;}options._source=source;}return options;}function getOperation(conjunction){if(conjunction==='and'){return'must';}if(conjunction==='or'){return'should';}return'must_not';}function createBoolQuery(operation,query){var resultQuery=null;if(Array.isArray(query)&&query.length||!Array.isArray(query)&&query){resultQuery={bool:_defineProperty({},operation,query)};}if(operation==='should'&&resultQuery){resultQuery={bool:_extends({},resultQuery.bool,{minimum_should_match:1})};}return resultQuery;}function getQuery(react,queryList){var query=[];Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){var operation=getOperation(conjunction);var queryArr=react[conjunction].map(function(comp){if(typeof comp!=='string'){return getQuery(comp,queryList);}else if(comp in queryList){return queryList[comp];}return null;}).filter(function(item){return!!item;});var boolQuery=createBoolQuery(operation,queryArr);if(boolQuery){query=[].concat(_toConsumableArray(query),[boolQuery]);}}else if(typeof react[conjunction]==='string'){var _operation=getOperation(conjunction);var _boolQuery=createBoolQuery(_operation,queryList[react[conjunction]]);if(_boolQuery){query=[].concat(_toConsumableArray(query),[_boolQuery]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null){var _boolQuery2=getQuery(react[conjunction],queryList);if(_boolQuery2){query=[].concat(_toConsumableArray(query),[_boolQuery2]);}}});if(Array.isArray(query)&&query.length){return{bool:{must:query}};}if(query&&Object.keys(query).length){return query;}return null;}function getExternalQueryOptions(react,options,component){var queryOptions={};Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){react[conjunction].forEach(function(comp){if(options[comp]){queryOptions=_extends({},queryOptions,options[comp]);}});}else if(typeof react[conjunction]==='string'){if(options[react[conjunction]]){queryOptions=_extends({},queryOptions,options[react[conjunction]]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null&&!Array.isArray(react[conjunction])){queryOptions=_extends({},queryOptions,getExternalQueryOptions(react[conjunction],options));}});if(options[component]){queryOptions=_extends({},queryOptions,options[component]);}return queryOptions;}function buildQuery(component,dependencyTree,queryList,queryOptions){var queryObj=null;var options=null;if(component in dependencyTree){queryObj=getQuery(dependencyTree[component],queryList);options=getExternalQueryOptions(dependencyTree[component],queryOptions,component);}return{queryObj:queryObj,options:options};}function pushToAndClause(reactProp,component){var react=_extends({},reactProp);if(react.and){if(Array.isArray(react.and)){react.and=[].concat(_toConsumableArray(react.and),[component]);return react;}else if(typeof react.and==='string'){react.and=[react.and,component];return react;}react.and=pushToAndClause(react.and,component);return react;}return _extends({},react,{and:component});}function checkValueChange(componentId,value,beforeValueChange,performUpdate){var selectedValue=value;if(Array.isArray(value)&&!value.length){selectedValue=null;}if(beforeValueChange){beforeValueChange(selectedValue).then(performUpdate).catch(function(e){console.warn(componentId+' - beforeValueChange rejected the promise with ',e);});}else{performUpdate();}}function getAggsOrder(sortBy){if(sortBy==='count'){return{_count:'desc'};}return{_term:sortBy};}var checkPropChange=exports.checkPropChange=function checkPropChange(prevProp,nextProp,callback){if(!isEqual(prevProp,nextProp)){callback();return true;}return false;};var checkSomePropChange=exports.checkSomePropChange=function checkSomePropChange(prevProps,nextProps,propsList,callback){propsList.some(function(prop){return checkPropChange(prevProps[prop],nextProps[prop],callback);});};var getClassName=exports.getClassName=function getClassName(classMap,component){return classMap&&classMap[component]||'';};var getInnerKey=exports.getInnerKey=function getInnerKey(obj,key){return obj&&obj[key]||{};};var handleA11yAction=exports.handleA11yAction=function handleA11yAction(e,callback){if(e.key==='Enter'||e.key===' '){e.preventDefault();callback();}};var highlightResults=function highlightResults(result){var data=_extends({},result);if(data.highlight){Object.keys(data.highlight).forEach(function(highlightItem){var highlightValue=data.highlight[highlightItem][0];data._source=_extends({},data._source,_defineProperty({},highlightItem,highlightValue));});}return data;};var parseHits=exports.parseHits=function parseHits(hits){var results=null;if(hits){results=[].concat(_toConsumableArray(hits)).map(function(item){var streamProps={};if(item._updated){streamProps._updated=item._updated;}else if(item._deleted){streamProps._deleted=item._deleted;}var data=highlightResults(item);var result=Object.keys(data).filter(function(key){return key!=='_source';}).reduce(function(obj,key){obj[key]=data[key];return obj;},_extends({highlight:data.highlight||{}},data._source,streamProps));return result;});}return results;};function formatDate(date,props){if(props.parseDate){return props.parseDate(date,props);}switch(props.queryFormat){case'epoch_millis':return date.getTime();case'epoch_seconds':return Math.floor(date.getTime()/1000);default:{if(_dateFormats2.default[props.queryFormat]){return date.toString(_dateFormats2.default[props.queryFormat]);}return date.getTime();}}}var getOptionsFromQuery=function getOptionsFromQuery(){var customQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(customQuery){var query=customQuery.query,rest=_objectWithoutProperties(customQuery,['query']);return Object.keys(rest).length?rest:null;}return null;};exports.getOptionsFromQuery=getOptionsFromQuery;function computeResultStats(hits,searchState,promotedResults){Object.keys(hits).forEach(function(componentId){var _ref=hits[componentId]||{},hidden=_ref.hidden,total=_ref.total,time=_ref.time;searchState[componentId]=_extends({},searchState[componentId],{resultStats:_extends({},searchState[componentId].resultStats,{numberOfResults:total,time:time,promoted:promotedResults[componentId]&&promotedResults[componentId].length,hidden:hidden||0})});});}var getSearchState=exports.getSearchState=function getSearchState(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var forHeaders=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var selectedValues=state.selectedValues,queryLog=state.queryLog,dependencyTree=state.dependencyTree,props=state.props,hits=state.hits,aggregations=state.aggregations,isLoading=state.isLoading,error=state.error,promotedResults=state.promotedResults;var searchState={};var populateState=function populateState(){var obj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var key=arguments[1];return Object.keys(obj).forEach(function(componentId){searchState[componentId]=_extends({},searchState[componentId],key?_defineProperty({},key,obj[componentId]):obj[componentId]);});};populateState(props);Object.keys(selectedValues).forEach(function(componentId){var componentState=searchState[componentId];var selectedValue=selectedValues[componentId];if(selectedValue){searchState[componentId]=_extends({},componentState,_extends({title:selectedValue.label,componentType:selectedValue.componentType,value:selectedValue.value},selectedValue.category&&{category:selectedValue.category},{URLParams:selectedValue.URLParams}));}});if(!forHeaders){populateState(queryLog);populateState(hits,'hits');populateState(aggregations,'aggregations');populateState(isLoading,'isLoading');populateState(error,'error');populateState(promotedResults,'promotedData');computeResultStats(hits,searchState,promotedResults);}populateState(dependencyTree,'react');return searchState;};var updateInternalQuery=exports.updateInternalQuery=function updateInternalQuery(componentId,queryOptions,value,props,defaultQueryToExecute,queryParams){var defaultQuery=props.defaultQuery;var defaultQueryOptions=void 0;var query=void 0;if(defaultQuery){var queryTobeSet=defaultQuery(value,props);var _ref3=queryTobeSet||{};query=_ref3.query;defaultQueryOptions=getOptionsFromQuery(queryTobeSet);}props.setQueryOptions(componentId,_extends({},defaultQueryOptions,queryOptions||defaultQueryToExecute));if(query){props.updateQuery(_extends({componentId:componentId,query:query},queryParams));}};var extractQueryFromDefaultQuery=function extractQueryFromDefaultQuery(defaultQuery){var queryToBeReturned={};if(defaultQuery){var evaluateQuery=defaultQuery();if(evaluateQuery){var query=evaluateQuery.query,options=_objectWithoutProperties(evaluateQuery,['query']);if(options){queryToBeReturned=options;}}}return queryToBeReturned;};exports.extractQueryFromDefaultQuery=extractQueryFromDefaultQuery;var getAggsQuery=exports.getAggsQuery=function getAggsQuery(query,props){var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,missingLabel=props.missingLabel;clonedQuery.size=0;clonedQuery.aggs=_defineProperty({},dataField,{terms:_extends({field:dataField,size:size,order:getAggsOrder(sortBy||'count')},showMissing?{missing:missingLabel}:{})});if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props.defaultQuery));};var getCompositeAggsQuery=exports.getCompositeAggsQuery=function getCompositeAggsQuery(query,props,after){var showTopHits=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,aggregationField=props.aggregationField;var finalField=aggregationField||dataField;var order=sortBy==='count'?{}:{order:sortBy};clonedQuery.aggs=_defineProperty({},finalField,_extends({composite:_extends({sources:[_defineProperty({},finalField,{terms:_extends({field:finalField},order,showMissing?{missing_bucket:true}:{})})],size:size},after)},showTopHits?{aggs:_defineProperty({},finalField,{top_hits:{size:1}})}:{}));clonedQuery.size=0;if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props.defaultQuery));};var withClickIds=exports.withClickIds=function withClickIds(){var results=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return results.map(function(result,index){return _extends({},result,{_click_id:index});});};function getResultStats(props){var total=props.total,size=props.size,time=props.time,hidden=props.hidden,promotedResults=props.promotedResults;return _extends({numberOfResults:total},size>0?{numberOfPages:Math.ceil(total/size)}:null,{time:time,hidden:hidden,promoted:promotedResults&&promotedResults.length});}function handleOnSuggestions(results,currentValue,props){var parseSuggestion=props.parseSuggestion,promotedResults=props.promotedResults;var fields=Array.isArray(props.dataField)?props.dataField:[props.dataField];var newResults=parseHits(results);if(promotedResults.length){var ids=promotedResults.map(function(item){return item._id;}).filter(Boolean);if(ids){newResults=newResults.filter(function(item){return!ids.includes(item._id);});}newResults=[].concat(_toConsumableArray(promotedResults),_toConsumableArray(newResults));}var parsedSuggestions=(0,_suggestions2.default)(fields,newResults,currentValue.toLowerCase());if(parseSuggestion){return parsedSuggestions.map(function(suggestion){return parseSuggestion(suggestion);});}return parsedSuggestions;}"]},"metadata":{},"sourceType":"script"}