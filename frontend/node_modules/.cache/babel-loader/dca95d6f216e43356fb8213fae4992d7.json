{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _FormControlList = require('../../styles/FormControlList');\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar MultiDataList = function (_Component) {\n  _inherits(MultiDataList, _Component);\n\n  function MultiDataList(props) {\n    _classCallCheck(this, MultiDataList);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var defaultValue = props.defaultValue || props.value;\n    var currentValueArray = props.selectedValue || defaultValue || [];\n    var currentValue = {};\n    currentValueArray.forEach(function (item) {\n      currentValue[item] = true;\n    });\n    _this.state = {\n      currentValue: currentValue,\n      searchTerm: '',\n      options: props.data || []\n    };\n    _this.internalComponent = props.componentId + '__internal';\n    _this.type = 'term';\n    props.addComponent(props.componentId);\n    props.addComponent(_this.internalComponent);\n    props.setComponentProps(props.componentId, _extends({}, props, {\n      componentType: _constants.componentTypes.multiDataList\n    }));\n    props.setQueryListener(props.componentId, props.onQueryChange, null);\n\n    _this.setReact(props);\n\n    var hasMounted = false;\n\n    if (props.showCount) {\n      _this.updateQueryOptions(props);\n    }\n\n    _this.setReact(props);\n\n    if (currentValueArray.length) {\n      _this.setValue(currentValueArray, true, props, hasMounted);\n    }\n\n    return _this;\n  }\n\n  MultiDataList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n      _this2.props.updateComponentProps(_this2.props.componentId, _this2.props);\n    });\n    (0, _helper.checkPropChange)(this.props.react, prevProps.react, function () {\n      return _this2.setReact(_this2.props);\n    });\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField'], function () {\n      _this2.updateQuery(Object.keys(_this2.state.currentValue), _this2.props);\n\n      if (_this2.props.showCount) {\n        _this2.updateQueryOptions(_this2.props);\n      }\n    });\n    (0, _helper.checkPropChange)(this.props.data, prevProps.data, function () {\n      if (_this2.props.showCount) {\n        _this2.updateQueryOptions(_this2.props);\n      }\n    });\n    (0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n      if (_this2.props.options[_this2.props.dataField]) {\n        _this2.updateStateOptions(_this2.props.options[_this2.props.dataField].buckets);\n      }\n    });\n    var selectedValue = Object.keys(this.state.currentValue);\n    var selectAllLabel = this.props.selectAllLabel;\n\n    if (selectAllLabel) {\n      selectedValue = selectedValue.filter(function (val) {\n        return val !== selectAllLabel;\n      });\n\n      if (this.state.currentValue[selectAllLabel]) {\n        selectedValue = [selectAllLabel];\n      }\n    }\n\n    if (this.props.value !== prevProps.value) {\n      this.setValue(this.props.value || [], true);\n    } else if (!(0, _helper.isEqual)(selectedValue, this.props.selectedValue) && !(0, _helper.isEqual)(this.props.selectedValue, prevProps.selectedValue)) {\n      var _props = this.props,\n          value = _props.value,\n          onChange = _props.onChange;\n\n      if (value === undefined) {\n        this.setValue(this.props.selectedValue || [], true);\n      } else if (onChange) {\n        onChange(this.props.selectedValue || null);\n      } else {\n        var selectedListItems = Object.keys(this.state.currentValue);\n        this.setValue(selectedListItems, true);\n      }\n    }\n  };\n\n  MultiDataList.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeComponent(this.props.componentId);\n    this.props.removeComponent(this.internalComponent);\n  };\n\n  MultiDataList.prototype.setReact = function setReact(props) {\n    var react = this.props.react;\n\n    if (react) {\n      var newReact = (0, _helper.pushToAndClause)(react, this.internalComponent);\n      props.watchComponent(props.componentId, newReact);\n    } else {\n      props.watchComponent(props.componentId, {\n        and: this.internalComponent\n      });\n    }\n  };\n\n  MultiDataList.generateQueryOptions = function generateQueryOptions(props, state) {\n    var queryOptions = (0, _helper.getQueryOptions)(props);\n    var includes = state.options.map(function (item) {\n      return item.value;\n    });\n    return (0, _helper.getAggsQuery)(queryOptions, props, includes);\n  };\n\n  MultiDataList.prototype.getComponent = function getComponent() {\n    var currentValue = this.state.currentValue;\n    var data = {\n      value: currentValue,\n      data: this.listItems,\n      handleChange: this.handleClick\n    };\n    return (0, _utils.getComponent)(data, this.props);\n  };\n\n  MultiDataList.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props2 = this.props,\n        selectAllLabel = _props2.selectAllLabel,\n        showCount = _props2.showCount,\n        renderItem = _props2.renderItem;\n    var options = this.state.options;\n\n    if (!this.hasCustomRenderer && options.length === 0) {\n      return this.props.renderNoResults ? this.props.renderNoResults() : null;\n    }\n\n    var listItems = this.listItems;\n    var isAllChecked = selectAllLabel ? !!this.state.currentValue[selectAllLabel] : false;\n    return _react2.default.createElement(_Container2.default, {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && _react2.default.createElement(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.renderSearch(), this.hasCustomRenderer ? this.getComponent() : _react2.default.createElement(_FormControlList.UL, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'list') || null,\n      role: 'listbox',\n      'aria-label': this.props.componentId + '-items'\n    }, selectAllLabel ? _react2.default.createElement('li', {\n      key: selectAllLabel,\n      className: '' + (isAllChecked ? 'active' : ''),\n      role: 'option',\n      'aria-checked': isAllChecked,\n      'aria-selected': isAllChecked\n    }, _react2.default.createElement(_FormControlList.Checkbox, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'checkbox') || null,\n      id: this.props.componentId + '-' + selectAllLabel,\n      name: selectAllLabel,\n      value: selectAllLabel,\n      onChange: this.handleClick,\n      checked: isAllChecked,\n      show: this.props.showCheckbox\n    }), _react2.default.createElement('label', {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null,\n      htmlFor: this.props.componentId + '-' + selectAllLabel\n    }, selectAllLabel)) : null, listItems.length ? listItems.map(function (item) {\n      var isChecked = !!_this3.state.currentValue[item.label];\n      return _react2.default.createElement('li', {\n        key: item.label,\n        className: '' + (isChecked ? 'active' : ''),\n        role: 'option',\n        'aria-checked': isChecked,\n        'aria-selected': isChecked\n      }, _react2.default.createElement(_FormControlList.Checkbox, {\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'checkbox') || null,\n        id: _this3.props.componentId + '-' + item.label,\n        name: _this3.props.componentId + '-' + item.label,\n        value: item.label,\n        onChange: _this3.handleClick,\n        checked: isChecked,\n        show: _this3.props.showCheckbox\n      }), _react2.default.createElement('label', {\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'label') || null,\n        htmlFor: _this3.props.componentId + '-' + item.label\n      }, renderItem ? renderItem(item.label, item.count, _this3.state.currentValue === item.label) : _react2.default.createElement('span', null, _react2.default.createElement('span', null, item.label), showCount && item.count && _react2.default.createElement('span', {\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'count') || null\n      }, item.count))));\n    }) // prettier-ignore\n    : this.props.renderNoResults && this.props.renderNoResults()));\n  };\n\n  _createClass(MultiDataList, [{\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    }\n  }, {\n    key: 'listItems',\n    get: function get() {\n      var _this4 = this;\n\n      var options = this.state.options;\n      var listItems = options.filter(function (item) {\n        if (_this4.props.showSearch && _this4.state.searchTerm) {\n          return item.label.toLowerCase().includes(_this4.state.searchTerm.toLowerCase());\n        }\n\n        return true;\n      });\n      return listItems;\n    }\n  }]);\n\n  return MultiDataList;\n}(_react.Component);\n\nMultiDataList.defaultQuery = function (value, props) {\n  var query = null;\n  var type = props.queryFormat === 'or' ? 'terms' : 'term';\n\n  if (props.selectAllLabel && Array.isArray(value) && value.includes(props.selectAllLabel)) {\n    query = {\n      exists: {\n        field: props.dataField\n      }\n    };\n  } else if (value) {\n    var listQuery = void 0;\n\n    if (props.queryFormat === 'or') {\n      var _type, _listQuery;\n\n      listQuery = (_listQuery = {}, _listQuery[type] = (_type = {}, _type[props.dataField] = value, _type), _listQuery);\n    } else {\n      // adds a sub-query with must as an array of objects for each term/value\n      var queryArray = value.map(function (item) {\n        var _type2, _ref;\n\n        return _ref = {}, _ref[type] = (_type2 = {}, _type2[props.dataField] = item, _type2), _ref;\n      });\n      listQuery = {\n        bool: {\n          must: queryArray\n        }\n      };\n    }\n\n    query = value.length ? listQuery : null;\n  }\n\n  if (query && props.nestedField) {\n    return {\n      query: {\n        nested: {\n          path: props.nestedField,\n          query: query\n        }\n      }\n    };\n  }\n\n  return query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.setValue = function (value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this5.props;\n    var hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var selectAllLabel = _this5.props.selectAllLabel;\n    var currentValue = _this5.state.currentValue;\n    var finalValues = null;\n\n    if (selectAllLabel && (Array.isArray(value) && value.includes(selectAllLabel) || typeof value === 'string' && value === selectAllLabel)) {\n      if (currentValue[selectAllLabel] && hasMounted && !isDefaultValue) {\n        currentValue = {};\n        finalValues = [];\n      } else {\n        props.data.forEach(function (item) {\n          currentValue[item.label] = true;\n        });\n        currentValue[selectAllLabel] = true;\n        finalValues = [selectAllLabel];\n      }\n    } else if (isDefaultValue) {\n      finalValues = value;\n      currentValue = {};\n\n      if (value) {\n        value.forEach(function (item) {\n          currentValue[item] = true;\n        });\n      }\n\n      if (selectAllLabel && selectAllLabel in currentValue) {\n        var _currentValue = currentValue,\n            del = _currentValue[selectAllLabel],\n            obj = _objectWithoutProperties(_currentValue, [selectAllLabel]);\n\n        currentValue = _extends({}, obj);\n      }\n    } else {\n      if (currentValue[value]) {\n        var _currentValue2 = currentValue,\n            _del = _currentValue2[value],\n            rest = _objectWithoutProperties(_currentValue2, [value]);\n\n        currentValue = _extends({}, rest);\n      } else {\n        currentValue[value] = true;\n      }\n\n      if (selectAllLabel && selectAllLabel in currentValue) {\n        var _currentValue3 = currentValue,\n            _del2 = _currentValue3[selectAllLabel],\n            _obj = _objectWithoutProperties(_currentValue3, [selectAllLabel]);\n\n        currentValue = _extends({}, _obj);\n      }\n\n      finalValues = Object.keys(currentValue);\n    }\n\n    var performUpdate = function performUpdate() {\n      var handleUpdates = function handleUpdates() {\n        _this5.updateQuery(finalValues, props);\n\n        if (props.onValueChange) props.onValueChange(finalValues);\n      };\n\n      if (hasMounted) {\n        _this5.setState({\n          currentValue: currentValue\n        }, handleUpdates);\n      } else {\n        handleUpdates();\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, finalValues, props.beforeValueChange, performUpdate);\n  };\n\n  this.updateQuery = function (value, props) {\n    var customQuery = props.customQuery;\n    var customQueryOptions = void 0; // find the corresponding value of the label for running the query\n\n    var queryValue = value.reduce(function (acc, item) {\n      if (item === props.selectAllLabel) {\n        return acc.concat(item);\n      }\n\n      var matchingItem = props.data.find(function (dataItem) {\n        return dataItem.label === item;\n      });\n      return matchingItem ? acc.concat(matchingItem.value) : acc;\n    }, []);\n    var query = MultiDataList.defaultQuery(queryValue, props);\n\n    if (customQuery) {\n      var _ref2 = customQuery(queryValue, props) || {};\n\n      query = _ref2.query;\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery((queryValue, props)));\n    }\n\n    props.setQueryOptions(props.componentId, customQueryOptions);\n    props.updateQuery({\n      componentId: props.componentId,\n      query: query,\n      value: value,\n      label: props.filterLabel,\n      showFilter: props.showFilter,\n      URLParams: props.URLParams,\n      componentType: _constants.componentTypes.multiDataList\n    });\n  };\n\n  this.updateQueryOptions = function (props) {\n    var queryOptions = MultiDataList.generateQueryOptions(props, _this5.state);\n\n    if (props.defaultQuery) {\n      var value = Object.keys(_this5.state.currentValue);\n      var defaultQueryOptions = (0, _helper.getOptionsFromQuery)(props.defaultQuery(value, props));\n      props.setQueryOptions(_this5.internalComponent, _extends({}, queryOptions, defaultQueryOptions));\n    } else {\n      props.setQueryOptions(_this5.internalComponent, queryOptions);\n    }\n  };\n\n  this.updateStateOptions = function (bucket) {\n    if (bucket) {\n      var bucketDictionary = bucket.reduce(function (obj, item) {\n        var _extends2;\n\n        return _extends({}, obj, (_extends2 = {}, _extends2[item.key] = item.doc_count, _extends2));\n      }, {});\n      var options = _this5.state.options;\n      var newOptions = options.map(function (item) {\n        if (bucketDictionary[item.value]) {\n          return _extends({}, item, {\n            count: bucketDictionary[item.value]\n          });\n        }\n\n        return item;\n      });\n\n      _this5.setState({\n        options: newOptions\n      });\n    }\n  };\n\n  this.handleInputChange = function (e) {\n    var value = e.target.value;\n\n    _this5.setState({\n      searchTerm: value\n    });\n  };\n\n  this.renderSearch = function () {\n    if (_this5.props.showSearch) {\n      return _react2.default.createElement(_Input2.default, {\n        className: (0, _helper.getClassName)(_this5.props.innerClass, 'input') || null,\n        onChange: _this5.handleInputChange,\n        value: _this5.state.searchTerm,\n        placeholder: _this5.props.placeholder,\n        style: {\n          margin: '0 0 8px'\n        },\n        'aria-label': _this5.props.componentId + '-search',\n        themePreset: _this5.props.themePreset\n      });\n    }\n\n    return null;\n  };\n\n  this.handleClick = function (e) {\n    var currentValue = e;\n\n    if ((0, _utils.isEvent)(e)) {\n      currentValue = e.target.value;\n    }\n\n    var _props3 = _this5.props,\n        value = _props3.value,\n        onChange = _props3.onChange;\n\n    if (value === undefined) {\n      _this5.setValue(currentValue);\n    } else if (onChange) {\n      onChange((0, _utils.parseValueArray)(_this5.props.value, currentValue));\n    }\n  };\n};\n\nMultiDataList.propTypes = {\n  addComponent: _types2.default.funcRequired,\n  removeComponent: _types2.default.funcRequired,\n  setQueryListener: _types2.default.funcRequired,\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  watchComponent: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  options: _types2.default.options,\n  setComponentProps: _types2.default.funcRequired,\n  updateComponentProps: _types2.default.funcRequired,\n  // component props\n  beforeValueChange: _types2.default.func,\n  children: _types2.default.func,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  data: _types2.default.data,\n  dataField: _types2.default.stringRequired,\n  defaultValue: _types2.default.stringArray,\n  value: _types2.default.stringArray,\n  filterLabel: _types2.default.string,\n  innerClass: _types2.default.style,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  placeholder: _types2.default.string,\n  nestedField: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  react: _types2.default.react,\n  selectAllLabel: _types2.default.string,\n  showCheckbox: _types2.default.boolRequired,\n  showFilter: _types2.default.bool,\n  showSearch: _types2.default.bool,\n  style: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  title: _types2.default.title,\n  URLParams: _types2.default.bool,\n  showCount: _types2.default.bool,\n  render: _types2.default.func,\n  renderItem: _types2.default.func,\n  renderNoResults: _types2.default.func\n};\nMultiDataList.defaultProps = {\n  className: null,\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showCheckbox: true,\n  showFilter: true,\n  showSearch: true,\n  style: {},\n  URLParams: false,\n  showCount: false\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    themePreset: state.config.themePreset,\n    options: props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].reactivesearch_nested : state.aggregations[props.componentId]\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setComponentProps: function setComponentProps(component, options) {\n      return dispatch((0, _actions.setComponentProps)(component, options));\n    },\n    updateComponentProps: function updateComponentProps(component, options) {\n      return dispatch((0, _actions.updateComponentProps)(component, options));\n    },\n    addComponent: function addComponent(component) {\n      return dispatch((0, _actions.addComponent)(component));\n    },\n    removeComponent: function removeComponent(component) {\n      return dispatch((0, _actions.removeComponent)(component));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    watchComponent: function watchComponent(component, react) {\n      return dispatch((0, _actions.watchComponent)(component, react));\n    },\n    setQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n      return dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n    },\n    setQueryOptions: function setQueryOptions(component, props) {\n      return dispatch((0, _actions.setQueryOptions)(component, props));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n  return _react2.default.createElement(MultiDataList, _extends({\n    ref: props.myForwardedRef\n  }, props));\n}); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, MultiDataList);\nForwardRefComponent.name = 'MultiDataList';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["C:/Users/victoria/Documents/Project/simplePOS/frontend/node_modules/@appbaseio/reactivesearch/lib/components/list/MultiDataList.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_actions","_constants","_helper","_hoistNonReactStatics","_hoistNonReactStatics2","_types","_types2","_Title","_Title2","_Input","_Input2","_Container","_Container2","_FormControlList","_utils","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","MultiDataList","_Component","_this","_initialiseProps","defaultValue","currentValueArray","selectedValue","currentValue","forEach","item","state","searchTerm","options","data","internalComponent","componentId","type","addComponent","setComponentProps","componentType","componentTypes","multiDataList","setQueryListener","onQueryChange","setReact","hasMounted","showCount","updateQueryOptions","setValue","componentDidUpdate","prevProps","_this2","checkSomePropChange","getValidPropsKeys","updateComponentProps","checkPropChange","react","updateQuery","dataField","updateStateOptions","buckets","selectAllLabel","filter","val","isEqual","_props","onChange","undefined","selectedListItems","componentWillUnmount","removeComponent","newReact","pushToAndClause","watchComponent","and","generateQueryOptions","queryOptions","getQueryOptions","includes","map","getAggsQuery","getComponent","listItems","handleChange","handleClick","render","_this3","_props2","renderItem","hasCustomRenderer","renderNoResults","isAllChecked","createElement","style","className","title","getClassName","innerClass","renderSearch","UL","role","Checkbox","id","name","checked","show","showCheckbox","htmlFor","isChecked","label","count","get","_this4","showSearch","toLowerCase","Component","defaultQuery","query","queryFormat","Array","isArray","exists","field","listQuery","_type","_listQuery","queryArray","_type2","_ref","bool","must","nestedField","nested","path","_this5","isDefaultValue","finalValues","_currentValue","del","_currentValue2","_del","rest","_currentValue3","_del2","_obj","performUpdate","handleUpdates","onValueChange","setState","checkValueChange","beforeValueChange","customQuery","customQueryOptions","queryValue","reduce","acc","concat","matchingItem","find","dataItem","_ref2","getOptionsFromQuery","setQueryOptions","filterLabel","showFilter","URLParams","defaultQueryOptions","bucket","bucketDictionary","_extends2","doc_count","newOptions","handleInputChange","e","placeholder","margin","themePreset","isEvent","_props3","parseValueArray","propTypes","funcRequired","func","children","string","stringRequired","stringArray","queryFormatSearch","boolRequired","defaultProps","mapStateToProps","selectedValues","config","aggregations","reactivesearch_nested","mapDispatchtoProps","dispatch","component","updateQueryObject","beforeQueryChange","ConnectedComponent","connect","ref","myForwardedRef","ForwardRefComponent","forwardRef"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _FormControlList = require('../../styles/FormControlList');\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MultiDataList = function (_Component) {\n\t_inherits(MultiDataList, _Component);\n\n\tfunction MultiDataList(props) {\n\t\t_classCallCheck(this, MultiDataList);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar defaultValue = props.defaultValue || props.value;\n\t\tvar currentValueArray = props.selectedValue || defaultValue || [];\n\t\tvar currentValue = {};\n\t\tcurrentValueArray.forEach(function (item) {\n\t\t\tcurrentValue[item] = true;\n\t\t});\n\n\t\t_this.state = {\n\t\t\tcurrentValue: currentValue,\n\t\t\tsearchTerm: '',\n\t\t\toptions: props.data || []\n\t\t};\n\t\t_this.internalComponent = props.componentId + '__internal';\n\t\t_this.type = 'term';\n\n\t\tprops.addComponent(props.componentId);\n\t\tprops.addComponent(_this.internalComponent);\n\t\tprops.setComponentProps(props.componentId, _extends({}, props, {\n\t\t\tcomponentType: _constants.componentTypes.multiDataList\n\t\t}));\n\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\n\t\t_this.setReact(props);\n\t\tvar hasMounted = false;\n\n\t\tif (props.showCount) {\n\t\t\t_this.updateQueryOptions(props);\n\t\t}\n\n\t\t_this.setReact(props);\n\n\t\tif (currentValueArray.length) {\n\t\t\t_this.setValue(currentValueArray, true, props, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tMultiDataList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n\t\t\t_this2.props.updateComponentProps(_this2.props.componentId, _this2.props);\n\t\t});\n\t\t(0, _helper.checkPropChange)(this.props.react, prevProps.react, function () {\n\t\t\treturn _this2.setReact(_this2.props);\n\t\t});\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField'], function () {\n\t\t\t_this2.updateQuery(Object.keys(_this2.state.currentValue), _this2.props);\n\n\t\t\tif (_this2.props.showCount) {\n\t\t\t\t_this2.updateQueryOptions(_this2.props);\n\t\t\t}\n\t\t});\n\n\t\t(0, _helper.checkPropChange)(this.props.data, prevProps.data, function () {\n\t\t\tif (_this2.props.showCount) {\n\t\t\t\t_this2.updateQueryOptions(_this2.props);\n\t\t\t}\n\t\t});\n\n\t\t(0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n\t\t\tif (_this2.props.options[_this2.props.dataField]) {\n\t\t\t\t_this2.updateStateOptions(_this2.props.options[_this2.props.dataField].buckets);\n\t\t\t}\n\t\t});\n\n\t\tvar selectedValue = Object.keys(this.state.currentValue);\n\t\tvar selectAllLabel = this.props.selectAllLabel;\n\n\n\t\tif (selectAllLabel) {\n\t\t\tselectedValue = selectedValue.filter(function (val) {\n\t\t\t\treturn val !== selectAllLabel;\n\t\t\t});\n\t\t\tif (this.state.currentValue[selectAllLabel]) {\n\t\t\t\tselectedValue = [selectAllLabel];\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.value !== prevProps.value) {\n\t\t\tthis.setValue(this.props.value || [], true);\n\t\t} else if (!(0, _helper.isEqual)(selectedValue, this.props.selectedValue) && !(0, _helper.isEqual)(this.props.selectedValue, prevProps.selectedValue)) {\n\t\t\tvar _props = this.props,\n\t\t\t    value = _props.value,\n\t\t\t    onChange = _props.onChange;\n\n\t\t\tif (value === undefined) {\n\t\t\t\tthis.setValue(this.props.selectedValue || [], true);\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange(this.props.selectedValue || null);\n\t\t\t} else {\n\t\t\t\tvar selectedListItems = Object.keys(this.state.currentValue);\n\t\t\t\tthis.setValue(selectedListItems, true);\n\t\t\t}\n\t\t}\n\t};\n\n\tMultiDataList.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t\tthis.props.removeComponent(this.internalComponent);\n\t};\n\n\tMultiDataList.prototype.setReact = function setReact(props) {\n\t\tvar react = this.props.react;\n\n\n\t\tif (react) {\n\t\t\tvar newReact = (0, _helper.pushToAndClause)(react, this.internalComponent);\n\t\t\tprops.watchComponent(props.componentId, newReact);\n\t\t} else {\n\t\t\tprops.watchComponent(props.componentId, {\n\t\t\t\tand: this.internalComponent\n\t\t\t});\n\t\t}\n\t};\n\n\tMultiDataList.generateQueryOptions = function generateQueryOptions(props, state) {\n\t\tvar queryOptions = (0, _helper.getQueryOptions)(props);\n\t\tvar includes = state.options.map(function (item) {\n\t\t\treturn item.value;\n\t\t});\n\t\treturn (0, _helper.getAggsQuery)(queryOptions, props, includes);\n\t};\n\n\tMultiDataList.prototype.getComponent = function getComponent() {\n\t\tvar currentValue = this.state.currentValue;\n\n\t\tvar data = {\n\t\t\tvalue: currentValue,\n\t\t\tdata: this.listItems,\n\t\t\thandleChange: this.handleClick\n\t\t};\n\t\treturn (0, _utils.getComponent)(data, this.props);\n\t};\n\n\tMultiDataList.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\tvar _props2 = this.props,\n\t\t    selectAllLabel = _props2.selectAllLabel,\n\t\t    showCount = _props2.showCount,\n\t\t    renderItem = _props2.renderItem;\n\t\tvar options = this.state.options;\n\n\n\t\tif (!this.hasCustomRenderer && options.length === 0) {\n\t\t\treturn this.props.renderNoResults ? this.props.renderNoResults() : null;\n\t\t}\n\n\t\tvar listItems = this.listItems;\n\n\t\tvar isAllChecked = selectAllLabel ? !!this.state.currentValue[selectAllLabel] : false;\n\n\t\treturn _react2.default.createElement(\n\t\t\t_Container2.default,\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && _react2.default.createElement(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.renderSearch(),\n\t\t\tthis.hasCustomRenderer ? this.getComponent() : _react2.default.createElement(\n\t\t\t\t_FormControlList.UL,\n\t\t\t\t{\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'list') || null,\n\t\t\t\t\trole: 'listbox',\n\t\t\t\t\t'aria-label': this.props.componentId + '-items'\n\t\t\t\t},\n\t\t\t\tselectAllLabel ? _react2.default.createElement(\n\t\t\t\t\t'li',\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: selectAllLabel,\n\t\t\t\t\t\tclassName: '' + (isAllChecked ? 'active' : ''),\n\t\t\t\t\t\trole: 'option',\n\t\t\t\t\t\t'aria-checked': isAllChecked,\n\t\t\t\t\t\t'aria-selected': isAllChecked\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_FormControlList.Checkbox, {\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'checkbox') || null,\n\t\t\t\t\t\tid: this.props.componentId + '-' + selectAllLabel,\n\t\t\t\t\t\tname: selectAllLabel,\n\t\t\t\t\t\tvalue: selectAllLabel,\n\t\t\t\t\t\tonChange: this.handleClick,\n\t\t\t\t\t\tchecked: isAllChecked,\n\t\t\t\t\t\tshow: this.props.showCheckbox\n\t\t\t\t\t}),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t'label',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null,\n\t\t\t\t\t\t\thtmlFor: this.props.componentId + '-' + selectAllLabel\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectAllLabel\n\t\t\t\t\t)\n\t\t\t\t) : null,\n\t\t\t\tlistItems.length ? listItems.map(function (item) {\n\t\t\t\t\tvar isChecked = !!_this3.state.currentValue[item.label];\n\t\t\t\t\treturn _react2.default.createElement(\n\t\t\t\t\t\t'li',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: item.label,\n\t\t\t\t\t\t\tclassName: '' + (isChecked ? 'active' : ''),\n\t\t\t\t\t\t\trole: 'option',\n\t\t\t\t\t\t\t'aria-checked': isChecked,\n\t\t\t\t\t\t\t'aria-selected': isChecked\n\t\t\t\t\t\t},\n\t\t\t\t\t\t_react2.default.createElement(_FormControlList.Checkbox, {\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'checkbox') || null,\n\t\t\t\t\t\t\tid: _this3.props.componentId + '-' + item.label,\n\t\t\t\t\t\t\tname: _this3.props.componentId + '-' + item.label,\n\t\t\t\t\t\t\tvalue: item.label,\n\t\t\t\t\t\t\tonChange: _this3.handleClick,\n\t\t\t\t\t\t\tchecked: isChecked,\n\t\t\t\t\t\t\tshow: _this3.props.showCheckbox\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t'label',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'label') || null,\n\t\t\t\t\t\t\t\thtmlFor: _this3.props.componentId + '-' + item.label\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trenderItem ? renderItem(item.label, item.count, _this3.state.currentValue === item.label) : _react2.default.createElement(\n\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\titem.label\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tshowCount && item.count && _react2.default.createElement(\n\t\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'count') || null\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\titem.count\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}) // prettier-ignore\n\t\t\t\t: this.props.renderNoResults && this.props.renderNoResults()\n\t\t\t)\n\t\t);\n\t};\n\n\t_createClass(MultiDataList, [{\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'listItems',\n\t\tget: function get() {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar options = this.state.options;\n\n\n\t\t\tvar listItems = options.filter(function (item) {\n\t\t\t\tif (_this4.props.showSearch && _this4.state.searchTerm) {\n\t\t\t\t\treturn item.label.toLowerCase().includes(_this4.state.searchTerm.toLowerCase());\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn listItems;\n\t\t}\n\t}]);\n\n\treturn MultiDataList;\n}(_react.Component);\n\nMultiDataList.defaultQuery = function (value, props) {\n\tvar query = null;\n\tvar type = props.queryFormat === 'or' ? 'terms' : 'term';\n\tif (props.selectAllLabel && Array.isArray(value) && value.includes(props.selectAllLabel)) {\n\t\tquery = {\n\t\t\texists: {\n\t\t\t\tfield: props.dataField\n\t\t\t}\n\t\t};\n\t} else if (value) {\n\t\tvar listQuery = void 0;\n\t\tif (props.queryFormat === 'or') {\n\t\t\tvar _type, _listQuery;\n\n\t\t\tlistQuery = (_listQuery = {}, _listQuery[type] = (_type = {}, _type[props.dataField] = value, _type), _listQuery);\n\t\t} else {\n\t\t\t// adds a sub-query with must as an array of objects for each term/value\n\t\t\tvar queryArray = value.map(function (item) {\n\t\t\t\tvar _type2, _ref;\n\n\t\t\t\treturn _ref = {}, _ref[type] = (_type2 = {}, _type2[props.dataField] = item, _type2), _ref;\n\t\t\t});\n\t\t\tlistQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tmust: queryArray\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tquery = value.length ? listQuery : null;\n\t}\n\n\tif (query && props.nestedField) {\n\t\treturn {\n\t\t\tquery: {\n\t\t\t\tnested: {\n\t\t\t\t\tpath: props.nestedField,\n\t\t\t\t\tquery: query\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\treturn query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this5 = this;\n\n\tthis.setValue = function (value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this5.props;\n\t\tvar hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\t\tvar selectAllLabel = _this5.props.selectAllLabel;\n\t\tvar currentValue = _this5.state.currentValue;\n\n\t\tvar finalValues = null;\n\n\t\tif (selectAllLabel && (Array.isArray(value) && value.includes(selectAllLabel) || typeof value === 'string' && value === selectAllLabel)) {\n\t\t\tif (currentValue[selectAllLabel] && hasMounted && !isDefaultValue) {\n\t\t\t\tcurrentValue = {};\n\t\t\t\tfinalValues = [];\n\t\t\t} else {\n\t\t\t\tprops.data.forEach(function (item) {\n\t\t\t\t\tcurrentValue[item.label] = true;\n\t\t\t\t});\n\t\t\t\tcurrentValue[selectAllLabel] = true;\n\t\t\t\tfinalValues = [selectAllLabel];\n\t\t\t}\n\t\t} else if (isDefaultValue) {\n\t\t\tfinalValues = value;\n\t\t\tcurrentValue = {};\n\t\t\tif (value) {\n\t\t\t\tvalue.forEach(function (item) {\n\t\t\t\t\tcurrentValue[item] = true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (selectAllLabel && selectAllLabel in currentValue) {\n\t\t\t\tvar _currentValue = currentValue,\n\t\t\t\t    del = _currentValue[selectAllLabel],\n\t\t\t\t    obj = _objectWithoutProperties(_currentValue, [selectAllLabel]);\n\n\t\t\t\tcurrentValue = _extends({}, obj);\n\t\t\t}\n\t\t} else {\n\t\t\tif (currentValue[value]) {\n\t\t\t\tvar _currentValue2 = currentValue,\n\t\t\t\t    _del = _currentValue2[value],\n\t\t\t\t    rest = _objectWithoutProperties(_currentValue2, [value]);\n\n\t\t\t\tcurrentValue = _extends({}, rest);\n\t\t\t} else {\n\t\t\t\tcurrentValue[value] = true;\n\t\t\t}\n\n\t\t\tif (selectAllLabel && selectAllLabel in currentValue) {\n\t\t\t\tvar _currentValue3 = currentValue,\n\t\t\t\t    _del2 = _currentValue3[selectAllLabel],\n\t\t\t\t    _obj = _objectWithoutProperties(_currentValue3, [selectAllLabel]);\n\n\t\t\t\tcurrentValue = _extends({}, _obj);\n\t\t\t}\n\t\t\tfinalValues = Object.keys(currentValue);\n\t\t}\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tvar handleUpdates = function handleUpdates() {\n\t\t\t\t_this5.updateQuery(finalValues, props);\n\t\t\t\tif (props.onValueChange) props.onValueChange(finalValues);\n\t\t\t};\n\n\t\t\tif (hasMounted) {\n\t\t\t\t_this5.setState({\n\t\t\t\t\tcurrentValue: currentValue\n\t\t\t\t}, handleUpdates);\n\t\t\t} else {\n\t\t\t\thandleUpdates();\n\t\t\t}\n\t\t};\n\n\t\t(0, _helper.checkValueChange)(props.componentId, finalValues, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar customQuery = props.customQuery;\n\n\t\tvar customQueryOptions = void 0;\n\n\t\t// find the corresponding value of the label for running the query\n\t\tvar queryValue = value.reduce(function (acc, item) {\n\t\t\tif (item === props.selectAllLabel) {\n\t\t\t\treturn acc.concat(item);\n\t\t\t}\n\t\t\tvar matchingItem = props.data.find(function (dataItem) {\n\t\t\t\treturn dataItem.label === item;\n\t\t\t});\n\t\t\treturn matchingItem ? acc.concat(matchingItem.value) : acc;\n\t\t}, []);\n\n\t\tvar query = MultiDataList.defaultQuery(queryValue, props);\n\t\tif (customQuery) {\n\t\t\tvar _ref2 = customQuery(queryValue, props) || {};\n\n\t\t\tquery = _ref2.query;\n\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery((queryValue, props)));\n\t\t}\n\t\tprops.setQueryOptions(props.componentId, customQueryOptions);\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: props.showFilter,\n\t\t\tURLParams: props.URLParams,\n\t\t\tcomponentType: _constants.componentTypes.multiDataList\n\t\t});\n\t};\n\n\tthis.updateQueryOptions = function (props) {\n\t\tvar queryOptions = MultiDataList.generateQueryOptions(props, _this5.state);\n\t\tif (props.defaultQuery) {\n\t\t\tvar value = Object.keys(_this5.state.currentValue);\n\t\t\tvar defaultQueryOptions = (0, _helper.getOptionsFromQuery)(props.defaultQuery(value, props));\n\t\t\tprops.setQueryOptions(_this5.internalComponent, _extends({}, queryOptions, defaultQueryOptions));\n\t\t} else {\n\t\t\tprops.setQueryOptions(_this5.internalComponent, queryOptions);\n\t\t}\n\t};\n\n\tthis.updateStateOptions = function (bucket) {\n\t\tif (bucket) {\n\t\t\tvar bucketDictionary = bucket.reduce(function (obj, item) {\n\t\t\t\tvar _extends2;\n\n\t\t\t\treturn _extends({}, obj, (_extends2 = {}, _extends2[item.key] = item.doc_count, _extends2));\n\t\t\t}, {});\n\n\t\t\tvar options = _this5.state.options;\n\n\t\t\tvar newOptions = options.map(function (item) {\n\t\t\t\tif (bucketDictionary[item.value]) {\n\t\t\t\t\treturn _extends({}, item, {\n\t\t\t\t\t\tcount: bucketDictionary[item.value]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn item;\n\t\t\t});\n\n\t\t\t_this5.setState({\n\t\t\t\toptions: newOptions\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleInputChange = function (e) {\n\t\tvar value = e.target.value;\n\n\t\t_this5.setState({\n\t\t\tsearchTerm: value\n\t\t});\n\t};\n\n\tthis.renderSearch = function () {\n\t\tif (_this5.props.showSearch) {\n\t\t\treturn _react2.default.createElement(_Input2.default, {\n\t\t\t\tclassName: (0, _helper.getClassName)(_this5.props.innerClass, 'input') || null,\n\t\t\t\tonChange: _this5.handleInputChange,\n\t\t\t\tvalue: _this5.state.searchTerm,\n\t\t\t\tplaceholder: _this5.props.placeholder,\n\t\t\t\tstyle: {\n\t\t\t\t\tmargin: '0 0 8px'\n\t\t\t\t},\n\t\t\t\t'aria-label': _this5.props.componentId + '-search',\n\t\t\t\tthemePreset: _this5.props.themePreset\n\t\t\t});\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.handleClick = function (e) {\n\t\tvar currentValue = e;\n\t\tif ((0, _utils.isEvent)(e)) {\n\t\t\tcurrentValue = e.target.value;\n\t\t}\n\t\tvar _props3 = _this5.props,\n\t\t    value = _props3.value,\n\t\t    onChange = _props3.onChange;\n\n\t\tif (value === undefined) {\n\t\t\t_this5.setValue(currentValue);\n\t\t} else if (onChange) {\n\t\t\tonChange((0, _utils.parseValueArray)(_this5.props.value, currentValue));\n\t\t}\n\t};\n};\n\nMultiDataList.propTypes = {\n\taddComponent: _types2.default.funcRequired,\n\tremoveComponent: _types2.default.funcRequired,\n\tsetQueryListener: _types2.default.funcRequired,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\twatchComponent: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\toptions: _types2.default.options,\n\tsetComponentProps: _types2.default.funcRequired,\n\tupdateComponentProps: _types2.default.funcRequired,\n\t// component props\n\tbeforeValueChange: _types2.default.func,\n\tchildren: _types2.default.func,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdata: _types2.default.data,\n\tdataField: _types2.default.stringRequired,\n\tdefaultValue: _types2.default.stringArray,\n\tvalue: _types2.default.stringArray,\n\tfilterLabel: _types2.default.string,\n\tinnerClass: _types2.default.style,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tnestedField: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\treact: _types2.default.react,\n\tselectAllLabel: _types2.default.string,\n\tshowCheckbox: _types2.default.boolRequired,\n\tshowFilter: _types2.default.bool,\n\tshowSearch: _types2.default.bool,\n\tstyle: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\ttitle: _types2.default.title,\n\tURLParams: _types2.default.bool,\n\tshowCount: _types2.default.bool,\n\trender: _types2.default.func,\n\trenderItem: _types2.default.func,\n\trenderNoResults: _types2.default.func\n};\n\nMultiDataList.defaultProps = {\n\tclassName: null,\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowCheckbox: true,\n\tshowFilter: true,\n\tshowSearch: true,\n\tstyle: {},\n\tURLParams: false,\n\tshowCount: false\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tthemePreset: state.config.themePreset,\n\t\toptions: props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].reactivesearch_nested : state.aggregations[props.componentId]\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetComponentProps: function setComponentProps(component, options) {\n\t\t\treturn dispatch((0, _actions.setComponentProps)(component, options));\n\t\t},\n\t\tupdateComponentProps: function updateComponentProps(component, options) {\n\t\t\treturn dispatch((0, _actions.updateComponentProps)(component, options));\n\t\t},\n\t\taddComponent: function addComponent(component) {\n\t\t\treturn dispatch((0, _actions.addComponent)(component));\n\t\t},\n\t\tremoveComponent: function removeComponent(component) {\n\t\t\treturn dispatch((0, _actions.removeComponent)(component));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\twatchComponent: function watchComponent(component, react) {\n\t\t\treturn dispatch((0, _actions.watchComponent)(component, react));\n\t\t},\n\t\tsetQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n\t\t\treturn dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n\treturn _react2.default.createElement(MultiDataList, _extends({ ref: props.myForwardedRef }, props));\n});\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, MultiDataList);\n\nForwardRefComponent.name = 'MultiDataList';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}