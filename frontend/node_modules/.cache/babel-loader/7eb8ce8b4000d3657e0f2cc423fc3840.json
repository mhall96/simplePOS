{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _Pagination = require('./addons/Pagination');\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nvar _PoweredBy = require('./addons/PoweredBy');\n\nvar _PoweredBy2 = _interopRequireDefault(_PoweredBy);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _results = require('../../styles/results');\n\nvar _Card = require('../../styles/Card');\n\nvar _ListItem = require('../../styles/ListItem');\n\nvar _utils = require('../../utils');\n\nvar _Results = require('./addons/Results');\n\nvar _Results2 = _interopRequireDefault(_Results);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ReactiveList = function (_Component) {\n  _inherits(ReactiveList, _Component);\n\n  function ReactiveList(props) {\n    _classCallCheck(this, ReactiveList); // no support for pagination and aggregationField together\n\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    if (props.pagination && props.aggregationField) {\n      console.warn('Pagination is not supported when aggregationField is present. The list will be rendered with infinite scroll');\n    }\n\n    var currentPage = 0;\n\n    if (_this.props.defaultPage >= 0) {\n      currentPage = _this.props.defaultPage;\n    } else if (_this.props.currentPage) {\n      currentPage = Math.max(_this.props.currentPage - 1, 0);\n    }\n\n    _this.initialFrom = currentPage * props.size; // used for page resetting on query change\n\n    _this.shouldRenderPagination = props.pagination && !props.aggregationField;\n    _this.state = {\n      from: _this.initialFrom,\n      currentPage: currentPage\n    };\n    _this.internalComponent = props.componentId + '__internal';\n    _this.sortOptionIndex = _this.props.defaultSortOption ? _this.props.sortOptions.findIndex(function (s) {\n      return s.label === _this.props.defaultSortOption;\n    }) : 0;\n    props.setQueryListener(props.componentId, props.onQueryChange, props.onError);\n    return _this;\n  }\n\n  ReactiveList.prototype.componentDidMount = function componentDidMount() {\n    this.props.addComponent(this.internalComponent);\n    this.props.addComponent(this.props.componentId);\n    this.props.setComponentProps(this.props.componentId, _extends({}, this.props, {\n      componentType: _constants.componentTypes.reactiveList\n    }));\n\n    if (this.props.stream) {\n      this.props.setStreaming(this.props.componentId, true);\n    }\n\n    var options = (0, _helper.getQueryOptions)(this.props);\n    options.from = this.state.from;\n\n    if (this.props.sortOptions) {\n      var _ref;\n\n      options.sort = [(_ref = {}, _ref[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n        order: this.props.sortOptions[this.sortOptionIndex].sortBy\n      }, _ref)];\n    } else if (this.props.sortBy) {\n      var _ref2;\n\n      options.sort = [(_ref2 = {}, _ref2[this.props.dataField] = {\n        order: this.props.sortBy\n      }, _ref2)];\n    } // Override sort query with defaultQuery's sort if defined\n\n\n    this.defaultQuery = null;\n\n    if (this.props.defaultQuery) {\n      this.defaultQuery = this.props.defaultQuery();\n      options = _extends({}, options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n    }\n\n    var _ref3 = this.defaultQuery || {},\n        query = _ref3.query; // execute is set to false at the time of mount\n    // to avoid firing (multiple) partial queries.\n    // Hence we are building the query in parts here\n    // and only executing it with setReact() at core\n\n\n    var execute = false;\n    this.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), execute);\n\n    if (this.defaultQuery) {\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: query\n      }, execute);\n    } else {\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: null\n      }, execute);\n    } // query will be executed here\n\n\n    this.setReact(this.props);\n    this.domNode = window;\n\n    if (this.showInfiniteScroll) {\n      var scrollTarget = this.props.scrollTarget;\n\n      if (typeof scrollTarget === 'string' || scrollTarget instanceof String) {\n        this.domNode = document.getElementById(scrollTarget);\n      } else if (scrollTarget instanceof Element || scrollTarget instanceof HTMLDocument) {\n        this.domNode = scrollTarget;\n      }\n\n      this.domNode.addEventListener('scroll', this.scrollHandler);\n    }\n  };\n\n  ReactiveList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    var totalPages = Math.ceil(this.props.total / this.props.size) || 0;\n    (0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n      _this2.props.updateComponentProps(_this2.props.componentId, _this2.props);\n    });\n\n    if (this.props.onData) {\n      (0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'streamHits', 'promotedResults', 'total', 'size', 'time', 'hidden'], function () {\n        _this2.props.onData(_this2.getData());\n      });\n    }\n\n    if (!(0, _helper.isEqual)(this.props.sortOptions, prevProps.sortOptions) || this.props.sortBy !== prevProps.sortBy || this.props.size !== prevProps.size || !(0, _helper.isEqual)(this.props.dataField, prevProps.dataField) || !(0, _helper.isEqual)(this.props.includeFields, prevProps.includeFields) || !(0, _helper.isEqual)(this.props.excludeFields, prevProps.excludeFields)) {\n      var options = (0, _helper.getQueryOptions)(this.props);\n      options.from = this.state.from;\n\n      if (this.props.sortOptions) {\n        var _ref4;\n\n        options.sort = [(_ref4 = {}, _ref4[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n          order: this.props.sortOptions[this.sortOptionIndex].sortBy\n        }, _ref4)];\n      } else if (this.props.sortBy) {\n        var _ref5;\n\n        options.sort = [(_ref5 = {}, _ref5[this.props.dataField] = {\n          order: this.props.sortBy\n        }, _ref5)];\n      }\n\n      this.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), true);\n    }\n\n    if (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n      var _options = (0, _helper.getQueryOptions)(this.props);\n\n      _options.from = 0;\n      this.defaultQuery = this.props.defaultQuery();\n      var query = this.defaultQuery.query;\n      var queryOptions = (0, _helper.getOptionsFromQuery)(this.defaultQuery);\n\n      if (queryOptions) {\n        _options = _extends({}, _options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n        this.props.setQueryOptions(this.props.componentId, _options, !query);\n      }\n\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: query\n      }, true); // reset page because of query change\n      // eslint-disable-next-line\n\n      this.setState({\n        currentPage: 0,\n        from: 0\n      }, function () {\n        _this2.updatePageURL(0);\n      });\n    }\n\n    if (this.props.stream !== prevProps.stream) {\n      this.props.setStreaming(this.props.componentId, this.props.stream);\n    }\n\n    if (!(0, _helper.isEqual)(prevProps.react, this.props.react)) {\n      this.setReact(this.props);\n    }\n\n    if (this.shouldRenderPagination) {\n      // called when page is changed\n      if (this.props.isLoading && (this.props.hits || prevProps.hits)) {\n        if (this.props.onPageChange) {\n          this.props.onPageChange(this.state.currentPage + 1, totalPages);\n        } else if (this.props.scrollOnChange && this.props.pagination) {\n          this.scrollToTop();\n        }\n      }\n\n      if (this.props.currentPage !== prevProps.currentPage && this.props.currentPage > 0 && this.props.currentPage <= totalPages) {\n        this.setPage(this.props.currentPage - 1);\n      }\n    }\n\n    if (this.showInfiniteScroll) {\n      if (this.props.hits && prevProps.hits) {\n        if ( // new items are loaded (from: 0)\n        this.props.hits.length < prevProps.hits.length // new items are loaded and 'from' hasn't changed\n        || this.props.hits.length === prevProps.hits.length && this.props.hits !== prevProps.hits) {\n          // query has changed\n          if (this.props.scrollOnChange) {\n            this.scrollToTop();\n          } // eslint-disable-next-line\n\n\n          this.setState({\n            from: 0\n          });\n        }\n      }\n    }\n\n    if (prevProps.queryLog && this.props.queryLog && prevProps.queryLog !== this.props.queryLog) {\n      // usecase:\n      // - query has changed from non-null prev query\n      if (this.props.queryLog.from !== this.state.from) {\n        // query's 'from' key doesn't match the state's 'from' key,\n        // i.e. this query change was not triggered by the page change (loadMore)\n        // eslint-disable-next-line\n        this.setState({\n          currentPage: 0\n        }, function () {\n          _this2.updatePageURL(0);\n        });\n\n        if (this.props.onPageChange) {\n          this.props.onPageChange(1, totalPages);\n        }\n      } else if (this.initialFrom && this.initialFrom === this.props.queryLog.from) {\n        // [non-zero] initialFrom matches the current query's from\n        // but the query has changed\n        // we need to update the query options in this case\n        // because the initial load had set the query 'from' in the store\n        // which is not valid anymore because the query has changed\n        var _options2 = (0, _helper.getQueryOptions)(this.props);\n\n        _options2.from = 0;\n        this.initialFrom = 0;\n\n        if (this.props.sortOptions) {\n          var _ref6;\n\n          _options2.sort = [(_ref6 = {}, _ref6[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n            order: this.props.sortOptions[this.sortOptionIndex].sortBy\n          }, _ref6)];\n        } else if (this.props.sortBy) {\n          var _ref7;\n\n          _options2.sort = [(_ref7 = {}, _ref7[this.props.dataField] = {\n            order: this.props.sortBy\n          }, _ref7)];\n        }\n\n        this.props.setQueryOptions(this.props.componentId, _options2, true);\n      }\n    } // handle window url history change (on native back and forth interactions)\n\n\n    if (this.state.currentPage !== this.props.defaultPage && this.props.defaultPage !== prevProps.defaultPage) {\n      this.setPage(this.props.defaultPage >= 0 ? this.props.defaultPage : 0);\n    }\n  };\n\n  ReactiveList.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeComponent(this.props.componentId);\n    this.props.removeComponent(this.internalComponent);\n\n    if (this.domNode) {\n      this.domNode.removeEventListener('scroll', this.scrollHandler);\n    }\n  }; // Calculate results\n\n\n  ReactiveList.prototype.render = function render() {\n    var _props = this.props,\n        renderItem = _props.renderItem,\n        size = _props.size,\n        error = _props.error,\n        renderPagination = _props.renderPagination;\n    var currentPage = this.state.currentPage;\n\n    var _getAllData = this.getAllData(),\n        filteredResults = _getAllData.filteredResults;\n\n    var paginationProps = {\n      pages: this.props.pages,\n      totalPages: Math.ceil(this.props.total / size),\n      currentPage: this.state.currentPage,\n      setPage: this.setPage,\n      showEndPage: this.props.showEndPage,\n      innerClass: this.props.innerClass,\n      fragmentName: this.props.componentId\n    };\n    var paginationElement = renderPagination ? renderPagination(paginationProps) : _react2.default.createElement(_Pagination2.default, paginationProps);\n    var base = currentPage * size;\n    return _react2.default.createElement('div', {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.isLoading && this.shouldRenderPagination && this.props.loader, this.renderError(), _react2.default.createElement(_Flex2.default, {\n      labelPosition: this.props.sortOptions ? 'right' : 'left',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'resultsInfo')\n    }, this.props.sortOptions ? this.renderSortOptions() : null, this.props.showResultStats ? this.renderResultStats() : null), !this.props.isLoading && !error && filteredResults.length === 0 ? this.renderNoResults() : null, this.shouldRenderPagination && ['top', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null, _react2.default.createElement(_Results2.default, {\n      base: base,\n      hasCustomRender: this.hasCustomRenderer,\n      getComponent: this.getComponent,\n      listClass: this.props.listClass,\n      innerClass: this.props.innerClass,\n      renderItem: renderItem,\n      triggerClickAnalytics: this.triggerClickAnalytics,\n      filteredResults: filteredResults\n    }), this.props.showLoader && this.props.isLoading && this.showInfiniteScroll ? this.props.loader || _react2.default.createElement('div', {\n      style: {\n        textAlign: 'center',\n        margin: '20px 0',\n        color: '#666'\n      }\n    }, 'Loading...') // prettier-ignore\n    : null, this.shouldRenderPagination && ['bottom', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null, _react2.default.createElement(_PoweredBy2.default, {\n      show: !!(this.props.config.url.endsWith('appbase.io') && filteredResults.length),\n      innerClass: this.props.innerClass\n    }));\n  };\n\n  _createClass(ReactiveList, [{\n    key: 'stats',\n    get: function get() {\n      var currentPage = this.state.currentPage;\n\n      var _getAllData2 = this.getAllData(),\n          filteredResults = _getAllData2.filteredResults;\n\n      return _extends({}, (0, _helper.getResultStats)(this.props), {\n        currentPage: currentPage,\n        displayedResults: filteredResults.length\n      });\n    }\n  }, {\n    key: 'showInfiniteScroll',\n    get: function get() {\n      // Pagination has higher priority then infinite scroll\n      var infiniteScroll = this.props.infiniteScroll;\n      return infiniteScroll && !this.shouldRenderPagination;\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    } // only used for SSR\n\n  }]);\n\n  return ReactiveList;\n}(_react.Component);\n\nReactiveList.ResultCardsWrapper = function (_ref8) {\n  var children = _ref8.children,\n      rest = _objectWithoutProperties(_ref8, ['children']);\n\n  return _react2.default.createElement('div', _extends({\n    className: _Card.container\n  }, rest), children);\n};\n\nReactiveList.ResultListWrapper = function (_ref9) {\n  var children = _ref9.children,\n      rest = _objectWithoutProperties(_ref9, ['children']);\n\n  return _react2.default.createElement('div', _extends({\n    className: _ListItem.container\n  }, rest), children);\n};\n\nReactiveList.generateQueryOptions = function (props) {\n  // simulate default (includeFields and excludeFields) props to generate consistent query\n  var options = (0, _helper.getQueryOptions)(_extends({\n    includeFields: ['*'],\n    excludeFields: []\n  }, props));\n  options.from = props.currentPage ? (props.currentPage - 1) * (props.size || 10) : 0;\n  options.size = props.size || 10;\n\n  if (props.sortOptions) {\n    var _ref10;\n\n    options.sort = [(_ref10 = {}, _ref10[props.sortOptions[0].dataField] = {\n      order: props.sortOptions[0].sortBy\n    }, _ref10)];\n  } else if (props.sortBy) {\n    var _ref11;\n\n    options.sort = [(_ref11 = {}, _ref11[props.dataField] = {\n      order: props.sortBy\n    }, _ref11)];\n  }\n\n  return options;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.getAggsQuery = function () {\n    var _props2 = _this3.props,\n        size = _props2.size,\n        aggregationField = _props2.aggregationField,\n        afterKey = _props2.afterKey;\n    var queryOptions = {\n      size: size\n    };\n\n    if (aggregationField) {\n      queryOptions.aggs = (0, _helper.getCompositeAggsQuery)({}, _this3.props, afterKey ? {\n        after: afterKey\n      } : null, true).aggs;\n    }\n\n    return queryOptions;\n  };\n\n  this.getAllData = function () {\n    var _props3 = _this3.props,\n        size = _props3.size,\n        promotedResults = _props3.promotedResults,\n        aggregationData = _props3.aggregationData;\n    var currentPage = _this3.state.currentPage;\n    var results = (0, _helper.parseHits)(_this3.props.hits) || [];\n    var streamResults = (0, _helper.parseHits)(_this3.props.streamHits) || [];\n    var filteredResults = results;\n    var base = currentPage * size;\n\n    if (streamResults.length) {\n      var ids = streamResults.map(function (item) {\n        return item._id;\n      });\n      filteredResults = filteredResults.filter(function (item) {\n        return !ids.includes(item._id);\n      });\n    }\n\n    if (promotedResults.length) {\n      var _ids = promotedResults.map(function (item) {\n        return item._id;\n      }).filter(Boolean);\n\n      if (_ids) {\n        filteredResults = filteredResults.filter(function (item) {\n          return !_ids.includes(item._id);\n        });\n      }\n\n      filteredResults = [].concat(streamResults, promotedResults, filteredResults);\n    }\n\n    return {\n      results: results,\n      streamResults: streamResults,\n      filteredResults: filteredResults,\n      promotedResults: promotedResults,\n      aggregationData: aggregationData || [],\n      loadMore: _this3.loadMore,\n      base: base,\n      triggerClickAnalytics: _this3.triggerClickAnalytics\n    };\n  };\n\n  this.setReact = function (props) {\n    var react = props.react;\n\n    if (react) {\n      var newReact = (0, _helper.pushToAndClause)(react, _this3.internalComponent);\n      props.watchComponent(props.componentId, newReact);\n    } else {\n      props.watchComponent(props.componentId, {\n        and: _this3.internalComponent\n      });\n    }\n  };\n\n  this.scrollToTop = function () {\n    if (_this3.domNode === window) {\n      document.documentElement.scrollTop = 0;\n      document.body.scrollTop = 0;\n    } else {\n      _this3.domNode.scrollTop = 0;\n    }\n  };\n\n  this.scrollHandler = function () {\n    var renderLoader = window.innerHeight + window.pageYOffset + 300 >= document.body.offsetHeight;\n\n    if (_this3.props.scrollTarget) {\n      renderLoader = _this3.domNode.clientHeight + _this3.domNode.scrollTop + 300 >= _this3.domNode.scrollHeight;\n    }\n\n    if (!_this3.props.isLoading && renderLoader) {\n      _this3.loadMore();\n    }\n  };\n\n  this.loadMore = function () {\n    if (_this3.props.aggregationField && !_this3.props.afterKey) return;\n\n    if (_this3.props.hits && _this3.props.total !== _this3.props.hits.length) {\n      var value = _this3.state.from + _this3.props.size;\n\n      var options = _extends({}, (0, _helper.getQueryOptions)(_this3.props), _this3.getAggsQuery());\n\n      _this3.setState({\n        from: value\n      });\n\n      _this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n        from: value\n      }), true, !!_this3.props.aggregationField);\n    }\n  };\n\n  this.setPage = function (page) {\n    // onPageClick will be called everytime a pagination button is clicked\n    if (page !== _this3.state.currentPage) {\n      var onPageClick = _this3.props.onPageClick;\n\n      if (onPageClick) {\n        onPageClick(page + 1);\n      }\n\n      var value = _this3.props.size * page;\n      var options = (0, _helper.getQueryOptions)(_this3.props);\n      options.from = _this3.state.from;\n\n      _this3.setState({\n        from: value,\n        currentPage: page\n      }, function () {\n        _this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n          from: value\n        }), false);\n\n        _this3.updatePageURL(page);\n      });\n    }\n  };\n\n  this.renderResultStats = function () {\n    var _props4 = _this3.props,\n        hits = _props4.hits,\n        promotedResults = _props4.promotedResults,\n        total = _props4.total;\n    var shouldStatsVisible = hits && promotedResults && (hits.length || promotedResults.length);\n\n    if (_this3.props.renderResultStats && shouldStatsVisible) {\n      return _this3.props.renderResultStats(_this3.stats);\n    } else if (total) {\n      return _react2.default.createElement('p', {\n        className: _results.resultStats + ' ' + (0, _helper.getClassName)(_this3.props.innerClass, 'resultStats')\n      }, _this3.props.total, ' results found in ', _this3.props.time, 'ms');\n    }\n\n    return null;\n  };\n\n  this.renderNoResults = function () {\n    return _react2.default.createElement('div', {\n      className: (0, _helper.getClassName)(_this3.props.innerClass, 'noResults') || null\n    }, _this3.props.renderNoResults());\n  };\n\n  this.handleSortChange = function (e) {\n    var _ref12;\n\n    var index = e.target.value;\n    var options = (0, _helper.getQueryOptions)(_this3.props); // This fixes issue #371 (where sorting a multi-result page with infinite loader breaks)\n\n    options.from = 0;\n    options.sort = [(_ref12 = {}, _ref12[_this3.props.sortOptions[index].dataField] = {\n      order: _this3.props.sortOptions[index].sortBy\n    }, _ref12)];\n\n    _this3.props.setQueryOptions(_this3.props.componentId, options, true);\n\n    _this3.sortOptionIndex = index;\n\n    _this3.setState({\n      currentPage: 0,\n      from: 0\n    }, function () {\n      _this3.updatePageURL(0);\n    });\n  };\n\n  this.updatePageURL = function (page) {\n    if (_this3.props.URLParams) {\n      _this3.props.setPageURL(_this3.props.componentId, page + 1, _this3.props.componentId, false, true);\n    }\n  };\n\n  this.triggerClickAnalytics = function (searchPosition) {\n    _this3.props.triggerAnalytics(searchPosition);\n  };\n\n  this.renderSortOptions = function () {\n    return _react2.default.createElement('select', {\n      className: _results.sortOptions + ' ' + (0, _helper.getClassName)(_this3.props.innerClass, 'sortOptions'),\n      name: 'sort-options',\n      onChange: _this3.handleSortChange,\n      defaultValue: _this3.sortOptionIndex\n    }, _this3.props.sortOptions.map(function (sort, index) {\n      return _react2.default.createElement('option', {\n        key: sort.label,\n        value: index\n      }, sort.label);\n    }));\n  };\n\n  this.renderError = function () {\n    var _props5 = _this3.props,\n        error = _props5.error,\n        isLoading = _props5.isLoading,\n        renderError = _props5.renderError;\n\n    if (renderError && error && !isLoading) {\n      return (0, _utils.isFunction)(renderError) ? renderError(error) : renderError;\n    }\n\n    return null;\n  };\n\n  this.withClickIds = function (results) {\n    var _getAllData3 = _this3.getAllData(),\n        base = _getAllData3.base;\n\n    return results.map(function (result, index) {\n      return _extends({}, result, {\n        _click_id: base + index\n      });\n    });\n  };\n\n  this.getData = function () {\n    var _getAllData4 = _this3.getAllData(),\n        results = _getAllData4.results,\n        streamResults = _getAllData4.streamResults,\n        filteredResults = _getAllData4.filteredResults,\n        promotedResults = _getAllData4.promotedResults,\n        aggregationData = _getAllData4.aggregationData;\n\n    return {\n      data: _this3.withClickIds(filteredResults),\n      aggregationData: _this3.withClickIds(aggregationData || []),\n      streamData: _this3.withClickIds(streamResults),\n      promotedData: _this3.withClickIds(promotedResults),\n      rawData: _this3.withClickIds(results),\n      resultStats: _this3.stats\n    };\n  };\n\n  this.getComponent = function () {\n    var _props6 = _this3.props,\n        error = _props6.error,\n        isLoading = _props6.isLoading;\n\n    var data = _extends({\n      error: error,\n      loading: isLoading,\n      loadMore: _this3.loadMore,\n      triggerAnalytics: _this3.triggerClickAnalytics\n    }, _this3.getData());\n\n    return (0, _utils.getComponent)(data, _this3.props);\n  };\n};\n\nReactiveList.propTypes = {\n  addComponent: _types2.default.funcRequired,\n  loadMore: _types2.default.funcRequired,\n  removeComponent: _types2.default.funcRequired,\n  setQueryListener: _types2.default.funcRequired,\n  onQueryChange: _types2.default.func,\n  onError: _types2.default.func,\n  setPageURL: _types2.default.func,\n  setQueryOptions: _types2.default.funcRequired,\n  setComponentProps: _types2.default.funcRequired,\n  updateComponentProps: _types2.default.funcRequired,\n  setStreaming: _types2.default.func,\n  searchState: _types2.default.dateObject,\n  updateQuery: _types2.default.funcRequired,\n  watchComponent: _types2.default.funcRequired,\n  currentPage: _types2.default.number,\n  hits: _types2.default.hits,\n  isLoading: _types2.default.bool,\n  includeFields: _types2.default.includeFields,\n  streamHits: _types2.default.hits,\n  promotedResults: _types2.default.hits,\n  time: _types2.default.number,\n  total: _types2.default.number,\n  hidden: _types2.default.number,\n  config: _types2.default.props,\n  analytics: _types2.default.props,\n  queryLog: _types2.default.props,\n  error: _types2.default.title,\n  headers: _types2.default.headers,\n  // component props\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  children: _types2.default.func,\n  dataField: _types2.default.stringRequired,\n  aggregationField: _types2.default.string,\n  aggregationData: _types2.default.aggregationData,\n  defaultPage: _types2.default.number,\n  defaultQuery: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  innerClass: _types2.default.style,\n  infiniteScroll: _types2.default.bool,\n  listClass: _types2.default.string,\n  loader: _types2.default.title,\n  render: _types2.default.func,\n  renderItem: _types2.default.func,\n  renderError: _types2.default.title,\n  renderPagination: _types2.default.func,\n  onData: _types2.default.func,\n  renderNoResults: _types2.default.title,\n  onPageChange: _types2.default.func,\n  onPageClick: _types2.default.func,\n  pages: _types2.default.number,\n  pagination: _types2.default.bool,\n  paginationAt: _types2.default.paginationAt,\n  showEndPage: _types2.default.bool,\n  react: _types2.default.react,\n  renderResultStats: _types2.default.func,\n  scrollOnChange: _types2.default.bool,\n  scrollTarget: _types2.default.string,\n  showLoader: _types2.default.bool,\n  showResultStats: _types2.default.bool,\n  size: _types2.default.number,\n  sortBy: _types2.default.sortBy,\n  sortOptions: _types2.default.sortOptions,\n  stream: _types2.default.bool,\n  style: _types2.default.style,\n  triggerAnalytics: _types2.default.funcRequired,\n  URLParams: _types2.default.bool,\n  defaultSortOption: _types2.default.string,\n  afterKey: _types2.default.props\n};\nReactiveList.defaultProps = {\n  className: null,\n  currentPage: 0,\n  listClass: '',\n  pages: 5,\n  infiniteScroll: true,\n  pagination: false,\n  paginationAt: 'bottom',\n  showEndPage: false,\n  includeFields: ['*'],\n  excludeFields: [],\n  showResultStats: true,\n  size: 10,\n  style: {},\n  URLParams: false,\n  showLoader: true,\n  renderNoResults: function renderNoResults() {\n    return 'No Results found.';\n  },\n  scrollOnChange: true,\n  defaultSortOption: null\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    defaultPage: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value - 1 || -1,\n    hits: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    aggregationData: state.compositeAggregations[props.componentId],\n    isLoading: state.isLoading[props.componentId] || false,\n    streamHits: state.streamHits[props.componentId],\n    time: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    config: state.config,\n    queryLog: state.queryLog[props.componentId],\n    error: state.error[props.componentId],\n    promotedResults: state.promotedResults[props.componentId] || [],\n    afterKey: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.aggregationField] && state.aggregations[props.componentId][props.aggregationField].after_key\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    addComponent: function addComponent(component) {\n      return dispatch((0, _actions.addComponent)(component));\n    },\n    setComponentProps: function setComponentProps(component, options) {\n      return dispatch((0, _actions.setComponentProps)(component, options));\n    },\n    updateComponentProps: function updateComponentProps(component, options) {\n      return dispatch((0, _actions.updateComponentProps)(component, options));\n    },\n    loadMore: function loadMore(component, options, append, appendAggs) {\n      return dispatch((0, _actions.loadMore)(component, options, append, appendAggs));\n    },\n    removeComponent: function removeComponent(component) {\n      return dispatch((0, _actions.removeComponent)(component));\n    },\n    setPageURL: function setPageURL(component, value, label, showFilter, URLParams) {\n      return dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    setQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n      return dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n    },\n    setStreaming: function setStreaming(component, stream) {\n      return dispatch((0, _actions.setStreaming)(component, stream));\n    },\n    updateQuery: function updateQuery(updateQueryObject, execute) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n    },\n    watchComponent: function watchComponent(component, react) {\n      return dispatch((0, _actions.watchComponent)(component, react));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition) {\n      return dispatch((0, _actions.recordResultClick)(searchPosition));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n  return _react2.default.createElement(ReactiveList, _extends({\n    ref: props.myForwardedRef\n  }, props));\n}); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, ReactiveList);\nForwardRefComponent.name = 'ReactiveList';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["C:/Users/victoria/Documents/Project/simplePOS/frontend/node_modules/@appbaseio/reactivesearch/lib/components/result/ReactiveList.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_hoistNonReactStatics","_hoistNonReactStatics2","_actions","_helper","_types","_types2","_constants","_Pagination","_Pagination2","_PoweredBy","_PoweredBy2","_Flex","_Flex2","_results","_Card","_ListItem","_utils","_Results","_Results2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","ReactiveList","_Component","_this","_initialiseProps","pagination","aggregationField","console","warn","currentPage","defaultPage","Math","max","initialFrom","size","shouldRenderPagination","state","from","internalComponent","componentId","sortOptionIndex","defaultSortOption","sortOptions","findIndex","s","label","setQueryListener","onQueryChange","onError","componentDidMount","addComponent","setComponentProps","componentType","componentTypes","reactiveList","stream","setStreaming","options","getQueryOptions","_ref","sort","dataField","order","sortBy","_ref2","defaultQuery","getOptionsFromQuery","_ref3","query","execute","setQueryOptions","getAggsQuery","updateQuery","setReact","domNode","window","showInfiniteScroll","scrollTarget","String","document","getElementById","Element","HTMLDocument","addEventListener","scrollHandler","componentDidUpdate","prevProps","_this2","totalPages","ceil","total","checkSomePropChange","getValidPropsKeys","updateComponentProps","onData","getData","isEqual","includeFields","excludeFields","_ref4","_ref5","_options","queryOptions","setState","updatePageURL","react","isLoading","hits","onPageChange","scrollOnChange","scrollToTop","setPage","queryLog","_options2","_ref6","_ref7","componentWillUnmount","removeComponent","removeEventListener","render","_props","renderItem","error","renderPagination","_getAllData","getAllData","filteredResults","paginationProps","pages","showEndPage","innerClass","fragmentName","paginationElement","createElement","base","style","className","loader","renderError","labelPosition","getClassName","renderSortOptions","showResultStats","renderResultStats","renderNoResults","paginationAt","hasCustomRender","hasCustomRenderer","getComponent","listClass","triggerClickAnalytics","showLoader","textAlign","margin","color","show","config","url","endsWith","get","_getAllData2","getResultStats","displayedResults","infiniteScroll","Component","ResultCardsWrapper","_ref8","children","rest","container","ResultListWrapper","_ref9","generateQueryOptions","_ref10","_ref11","_this3","_props2","afterKey","aggs","getCompositeAggsQuery","after","_props3","promotedResults","aggregationData","results","parseHits","streamResults","streamHits","ids","map","item","_id","filter","includes","_ids","Boolean","concat","loadMore","newReact","pushToAndClause","watchComponent","and","documentElement","scrollTop","body","renderLoader","innerHeight","pageYOffset","offsetHeight","clientHeight","scrollHeight","page","onPageClick","_props4","shouldStatsVisible","stats","resultStats","time","handleSortChange","e","_ref12","index","URLParams","setPageURL","searchPosition","triggerAnalytics","name","onChange","defaultValue","_props5","isFunction","withClickIds","_getAllData3","result","_click_id","_getAllData4","data","streamData","promotedData","rawData","_props6","loading","propTypes","funcRequired","func","searchState","dateObject","number","bool","hidden","analytics","title","headers","string","stringRequired","defaultProps","mapStateToProps","selectedValues","compositeAggregations","aggregations","after_key","mapDispatchtoProps","dispatch","component","append","appendAggs","showFilter","setValue","beforeQueryChange","updateQueryObject","recordResultClick","ConnectedComponent","connect","ref","myForwardedRef","ForwardRefComponent","forwardRef"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _Pagination = require('./addons/Pagination');\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nvar _PoweredBy = require('./addons/PoweredBy');\n\nvar _PoweredBy2 = _interopRequireDefault(_PoweredBy);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _results = require('../../styles/results');\n\nvar _Card = require('../../styles/Card');\n\nvar _ListItem = require('../../styles/ListItem');\n\nvar _utils = require('../../utils');\n\nvar _Results = require('./addons/Results');\n\nvar _Results2 = _interopRequireDefault(_Results);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ReactiveList = function (_Component) {\n\t_inherits(ReactiveList, _Component);\n\n\tfunction ReactiveList(props) {\n\t\t_classCallCheck(this, ReactiveList);\n\n\t\t// no support for pagination and aggregationField together\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tif (props.pagination && props.aggregationField) {\n\t\t\tconsole.warn('Pagination is not supported when aggregationField is present. The list will be rendered with infinite scroll');\n\t\t}\n\n\t\tvar currentPage = 0;\n\t\tif (_this.props.defaultPage >= 0) {\n\t\t\tcurrentPage = _this.props.defaultPage;\n\t\t} else if (_this.props.currentPage) {\n\t\t\tcurrentPage = Math.max(_this.props.currentPage - 1, 0);\n\t\t}\n\t\t_this.initialFrom = currentPage * props.size; // used for page resetting on query change\n\t\t_this.shouldRenderPagination = props.pagination && !props.aggregationField;\n\t\t_this.state = {\n\t\t\tfrom: _this.initialFrom,\n\t\t\tcurrentPage: currentPage\n\t\t};\n\t\t_this.internalComponent = props.componentId + '__internal';\n\t\t_this.sortOptionIndex = _this.props.defaultSortOption ? _this.props.sortOptions.findIndex(function (s) {\n\t\t\treturn s.label === _this.props.defaultSortOption;\n\t\t}) : 0;\n\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, props.onError);\n\t\treturn _this;\n\t}\n\n\tReactiveList.prototype.componentDidMount = function componentDidMount() {\n\t\tthis.props.addComponent(this.internalComponent);\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.props.setComponentProps(this.props.componentId, _extends({}, this.props, {\n\t\t\tcomponentType: _constants.componentTypes.reactiveList\n\t\t}));\n\t\tif (this.props.stream) {\n\t\t\tthis.props.setStreaming(this.props.componentId, true);\n\t\t}\n\n\t\tvar options = (0, _helper.getQueryOptions)(this.props);\n\t\toptions.from = this.state.from;\n\t\tif (this.props.sortOptions) {\n\t\t\tvar _ref;\n\n\t\t\toptions.sort = [(_ref = {}, _ref[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n\t\t\t\torder: this.props.sortOptions[this.sortOptionIndex].sortBy\n\t\t\t}, _ref)];\n\t\t} else if (this.props.sortBy) {\n\t\t\tvar _ref2;\n\n\t\t\toptions.sort = [(_ref2 = {}, _ref2[this.props.dataField] = {\n\t\t\t\torder: this.props.sortBy\n\t\t\t}, _ref2)];\n\t\t}\n\n\t\t// Override sort query with defaultQuery's sort if defined\n\t\tthis.defaultQuery = null;\n\t\tif (this.props.defaultQuery) {\n\t\t\tthis.defaultQuery = this.props.defaultQuery();\n\t\t\toptions = _extends({}, options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n\t\t}\n\n\t\tvar _ref3 = this.defaultQuery || {},\n\t\t    query = _ref3.query;\n\n\t\t// execute is set to false at the time of mount\n\t\t// to avoid firing (multiple) partial queries.\n\t\t// Hence we are building the query in parts here\n\t\t// and only executing it with setReact() at core\n\n\n\t\tvar execute = false;\n\n\t\tthis.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), execute);\n\n\t\tif (this.defaultQuery) {\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: query\n\t\t\t}, execute);\n\t\t} else {\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: null\n\t\t\t}, execute);\n\t\t}\n\n\t\t// query will be executed here\n\t\tthis.setReact(this.props);\n\n\t\tthis.domNode = window;\n\t\tif (this.showInfiniteScroll) {\n\t\t\tvar scrollTarget = this.props.scrollTarget;\n\n\t\t\tif (typeof scrollTarget === 'string' || scrollTarget instanceof String) {\n\t\t\t\tthis.domNode = document.getElementById(scrollTarget);\n\t\t\t} else if (scrollTarget instanceof Element || scrollTarget instanceof HTMLDocument) {\n\t\t\t\tthis.domNode = scrollTarget;\n\t\t\t}\n\t\t\tthis.domNode.addEventListener('scroll', this.scrollHandler);\n\t\t}\n\t};\n\n\tReactiveList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\tvar totalPages = Math.ceil(this.props.total / this.props.size) || 0;\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n\t\t\t_this2.props.updateComponentProps(_this2.props.componentId, _this2.props);\n\t\t});\n\t\tif (this.props.onData) {\n\t\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'streamHits', 'promotedResults', 'total', 'size', 'time', 'hidden'], function () {\n\t\t\t\t_this2.props.onData(_this2.getData());\n\t\t\t});\n\t\t}\n\t\tif (!(0, _helper.isEqual)(this.props.sortOptions, prevProps.sortOptions) || this.props.sortBy !== prevProps.sortBy || this.props.size !== prevProps.size || !(0, _helper.isEqual)(this.props.dataField, prevProps.dataField) || !(0, _helper.isEqual)(this.props.includeFields, prevProps.includeFields) || !(0, _helper.isEqual)(this.props.excludeFields, prevProps.excludeFields)) {\n\t\t\tvar options = (0, _helper.getQueryOptions)(this.props);\n\t\t\toptions.from = this.state.from;\n\t\t\tif (this.props.sortOptions) {\n\t\t\t\tvar _ref4;\n\n\t\t\t\toptions.sort = [(_ref4 = {}, _ref4[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n\t\t\t\t\torder: this.props.sortOptions[this.sortOptionIndex].sortBy\n\t\t\t\t}, _ref4)];\n\t\t\t} else if (this.props.sortBy) {\n\t\t\t\tvar _ref5;\n\n\t\t\t\toptions.sort = [(_ref5 = {}, _ref5[this.props.dataField] = {\n\t\t\t\t\torder: this.props.sortBy\n\t\t\t\t}, _ref5)];\n\t\t\t}\n\t\t\tthis.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), true);\n\t\t}\n\n\t\tif (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n\t\t\tvar _options = (0, _helper.getQueryOptions)(this.props);\n\t\t\t_options.from = 0;\n\t\t\tthis.defaultQuery = this.props.defaultQuery();\n\n\t\t\tvar query = this.defaultQuery.query;\n\n\n\t\t\tvar queryOptions = (0, _helper.getOptionsFromQuery)(this.defaultQuery);\n\t\t\tif (queryOptions) {\n\t\t\t\t_options = _extends({}, _options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n\t\t\t\tthis.props.setQueryOptions(this.props.componentId, _options, !query);\n\t\t\t}\n\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: query\n\t\t\t}, true);\n\n\t\t\t// reset page because of query change\n\t\t\t// eslint-disable-next-line\n\t\t\tthis.setState({\n\t\t\t\tcurrentPage: 0,\n\t\t\t\tfrom: 0\n\t\t\t}, function () {\n\t\t\t\t_this2.updatePageURL(0);\n\t\t\t});\n\t\t}\n\n\t\tif (this.props.stream !== prevProps.stream) {\n\t\t\tthis.props.setStreaming(this.props.componentId, this.props.stream);\n\t\t}\n\n\t\tif (!(0, _helper.isEqual)(prevProps.react, this.props.react)) {\n\t\t\tthis.setReact(this.props);\n\t\t}\n\t\tif (this.shouldRenderPagination) {\n\t\t\t// called when page is changed\n\t\t\tif (this.props.isLoading && (this.props.hits || prevProps.hits)) {\n\t\t\t\tif (this.props.onPageChange) {\n\t\t\t\t\tthis.props.onPageChange(this.state.currentPage + 1, totalPages);\n\t\t\t\t} else if (this.props.scrollOnChange && this.props.pagination) {\n\t\t\t\t\tthis.scrollToTop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.props.currentPage !== prevProps.currentPage && this.props.currentPage > 0 && this.props.currentPage <= totalPages) {\n\t\t\t\tthis.setPage(this.props.currentPage - 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.showInfiniteScroll) {\n\t\t\tif (this.props.hits && prevProps.hits) {\n\t\t\t\tif (\n\t\t\t\t// new items are loaded (from: 0)\n\t\t\t\tthis.props.hits.length < prevProps.hits.length\n\t\t\t\t// new items are loaded and 'from' hasn't changed\n\t\t\t\t|| this.props.hits.length === prevProps.hits.length && this.props.hits !== prevProps.hits) {\n\t\t\t\t\t// query has changed\n\t\t\t\t\tif (this.props.scrollOnChange) {\n\t\t\t\t\t\tthis.scrollToTop();\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tfrom: 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (prevProps.queryLog && this.props.queryLog && prevProps.queryLog !== this.props.queryLog) {\n\t\t\t// usecase:\n\t\t\t// - query has changed from non-null prev query\n\n\t\t\tif (this.props.queryLog.from !== this.state.from) {\n\t\t\t\t// query's 'from' key doesn't match the state's 'from' key,\n\t\t\t\t// i.e. this query change was not triggered by the page change (loadMore)\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrentPage: 0\n\t\t\t\t}, function () {\n\t\t\t\t\t_this2.updatePageURL(0);\n\t\t\t\t});\n\n\t\t\t\tif (this.props.onPageChange) {\n\t\t\t\t\tthis.props.onPageChange(1, totalPages);\n\t\t\t\t}\n\t\t\t} else if (this.initialFrom && this.initialFrom === this.props.queryLog.from) {\n\t\t\t\t// [non-zero] initialFrom matches the current query's from\n\t\t\t\t// but the query has changed\n\n\t\t\t\t// we need to update the query options in this case\n\t\t\t\t// because the initial load had set the query 'from' in the store\n\t\t\t\t// which is not valid anymore because the query has changed\n\t\t\t\tvar _options2 = (0, _helper.getQueryOptions)(this.props);\n\t\t\t\t_options2.from = 0;\n\t\t\t\tthis.initialFrom = 0;\n\n\t\t\t\tif (this.props.sortOptions) {\n\t\t\t\t\tvar _ref6;\n\n\t\t\t\t\t_options2.sort = [(_ref6 = {}, _ref6[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n\t\t\t\t\t\torder: this.props.sortOptions[this.sortOptionIndex].sortBy\n\t\t\t\t\t}, _ref6)];\n\t\t\t\t} else if (this.props.sortBy) {\n\t\t\t\t\tvar _ref7;\n\n\t\t\t\t\t_options2.sort = [(_ref7 = {}, _ref7[this.props.dataField] = {\n\t\t\t\t\t\torder: this.props.sortBy\n\t\t\t\t\t}, _ref7)];\n\t\t\t\t}\n\n\t\t\t\tthis.props.setQueryOptions(this.props.componentId, _options2, true);\n\t\t\t}\n\t\t}\n\n\t\t// handle window url history change (on native back and forth interactions)\n\t\tif (this.state.currentPage !== this.props.defaultPage && this.props.defaultPage !== prevProps.defaultPage) {\n\t\t\tthis.setPage(this.props.defaultPage >= 0 ? this.props.defaultPage : 0);\n\t\t}\n\t};\n\n\tReactiveList.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t\tthis.props.removeComponent(this.internalComponent);\n\n\t\tif (this.domNode) {\n\t\t\tthis.domNode.removeEventListener('scroll', this.scrollHandler);\n\t\t}\n\t};\n\n\t// Calculate results\n\n\n\tReactiveList.prototype.render = function render() {\n\t\tvar _props = this.props,\n\t\t    renderItem = _props.renderItem,\n\t\t    size = _props.size,\n\t\t    error = _props.error,\n\t\t    renderPagination = _props.renderPagination;\n\t\tvar currentPage = this.state.currentPage;\n\n\t\tvar _getAllData = this.getAllData(),\n\t\t    filteredResults = _getAllData.filteredResults;\n\n\t\tvar paginationProps = {\n\t\t\tpages: this.props.pages,\n\t\t\ttotalPages: Math.ceil(this.props.total / size),\n\t\t\tcurrentPage: this.state.currentPage,\n\t\t\tsetPage: this.setPage,\n\t\t\tshowEndPage: this.props.showEndPage,\n\t\t\tinnerClass: this.props.innerClass,\n\t\t\tfragmentName: this.props.componentId\n\t\t};\n\t\tvar paginationElement = renderPagination ? renderPagination(paginationProps) : _react2.default.createElement(_Pagination2.default, paginationProps);\n\n\t\tvar base = currentPage * size;\n\t\treturn _react2.default.createElement(\n\t\t\t'div',\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.isLoading && this.shouldRenderPagination && this.props.loader,\n\t\t\tthis.renderError(),\n\t\t\t_react2.default.createElement(\n\t\t\t\t_Flex2.default,\n\t\t\t\t{\n\t\t\t\t\tlabelPosition: this.props.sortOptions ? 'right' : 'left',\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'resultsInfo')\n\t\t\t\t},\n\t\t\t\tthis.props.sortOptions ? this.renderSortOptions() : null,\n\t\t\t\tthis.props.showResultStats ? this.renderResultStats() : null\n\t\t\t),\n\t\t\t!this.props.isLoading && !error && filteredResults.length === 0 ? this.renderNoResults() : null,\n\t\t\tthis.shouldRenderPagination && ['top', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null,\n\t\t\t_react2.default.createElement(_Results2.default, {\n\t\t\t\tbase: base,\n\t\t\t\thasCustomRender: this.hasCustomRenderer,\n\t\t\t\tgetComponent: this.getComponent,\n\t\t\t\tlistClass: this.props.listClass,\n\t\t\t\tinnerClass: this.props.innerClass,\n\t\t\t\trenderItem: renderItem,\n\t\t\t\ttriggerClickAnalytics: this.triggerClickAnalytics,\n\t\t\t\tfilteredResults: filteredResults\n\t\t\t}),\n\t\t\tthis.props.showLoader && this.props.isLoading && this.showInfiniteScroll ? this.props.loader || _react2.default.createElement(\n\t\t\t\t'div',\n\t\t\t\t{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\tmargin: '20px 0',\n\t\t\t\t\t\tcolor: '#666'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'Loading...'\n\t\t\t) // prettier-ignore\n\t\t\t: null,\n\t\t\tthis.shouldRenderPagination && ['bottom', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null,\n\t\t\t_react2.default.createElement(_PoweredBy2.default, {\n\t\t\t\tshow: !!(this.props.config.url.endsWith('appbase.io') && filteredResults.length),\n\t\t\t\tinnerClass: this.props.innerClass\n\t\t\t})\n\t\t);\n\t};\n\n\t_createClass(ReactiveList, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\tvar currentPage = this.state.currentPage;\n\n\t\t\tvar _getAllData2 = this.getAllData(),\n\t\t\t    filteredResults = _getAllData2.filteredResults;\n\n\t\t\treturn _extends({}, (0, _helper.getResultStats)(this.props), {\n\t\t\t\tcurrentPage: currentPage,\n\t\t\t\tdisplayedResults: filteredResults.length\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'showInfiniteScroll',\n\t\tget: function get() {\n\t\t\t// Pagination has higher priority then infinite scroll\n\t\t\tvar infiniteScroll = this.props.infiniteScroll;\n\n\t\t\treturn infiniteScroll && !this.shouldRenderPagination;\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\n\t\t// only used for SSR\n\n\t}]);\n\n\treturn ReactiveList;\n}(_react.Component);\n\nReactiveList.ResultCardsWrapper = function (_ref8) {\n\tvar children = _ref8.children,\n\t    rest = _objectWithoutProperties(_ref8, ['children']);\n\n\treturn _react2.default.createElement(\n\t\t'div',\n\t\t_extends({ className: _Card.container }, rest),\n\t\tchildren\n\t);\n};\n\nReactiveList.ResultListWrapper = function (_ref9) {\n\tvar children = _ref9.children,\n\t    rest = _objectWithoutProperties(_ref9, ['children']);\n\n\treturn _react2.default.createElement(\n\t\t'div',\n\t\t_extends({ className: _ListItem.container }, rest),\n\t\tchildren\n\t);\n};\n\nReactiveList.generateQueryOptions = function (props) {\n\t// simulate default (includeFields and excludeFields) props to generate consistent query\n\tvar options = (0, _helper.getQueryOptions)(_extends({ includeFields: ['*'], excludeFields: [] }, props));\n\toptions.from = props.currentPage ? (props.currentPage - 1) * (props.size || 10) : 0;\n\toptions.size = props.size || 10;\n\n\tif (props.sortOptions) {\n\t\tvar _ref10;\n\n\t\toptions.sort = [(_ref10 = {}, _ref10[props.sortOptions[0].dataField] = {\n\t\t\torder: props.sortOptions[0].sortBy\n\t\t}, _ref10)];\n\t} else if (props.sortBy) {\n\t\tvar _ref11;\n\n\t\toptions.sort = [(_ref11 = {}, _ref11[props.dataField] = {\n\t\t\torder: props.sortBy\n\t\t}, _ref11)];\n\t}\n\n\treturn options;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this3 = this;\n\n\tthis.getAggsQuery = function () {\n\t\tvar _props2 = _this3.props,\n\t\t    size = _props2.size,\n\t\t    aggregationField = _props2.aggregationField,\n\t\t    afterKey = _props2.afterKey;\n\n\t\tvar queryOptions = { size: size };\n\t\tif (aggregationField) {\n\t\t\tqueryOptions.aggs = (0, _helper.getCompositeAggsQuery)({}, _this3.props, afterKey ? { after: afterKey } : null, true).aggs;\n\t\t}\n\t\treturn queryOptions;\n\t};\n\n\tthis.getAllData = function () {\n\t\tvar _props3 = _this3.props,\n\t\t    size = _props3.size,\n\t\t    promotedResults = _props3.promotedResults,\n\t\t    aggregationData = _props3.aggregationData;\n\t\tvar currentPage = _this3.state.currentPage;\n\n\t\tvar results = (0, _helper.parseHits)(_this3.props.hits) || [];\n\t\tvar streamResults = (0, _helper.parseHits)(_this3.props.streamHits) || [];\n\t\tvar filteredResults = results;\n\t\tvar base = currentPage * size;\n\t\tif (streamResults.length) {\n\t\t\tvar ids = streamResults.map(function (item) {\n\t\t\t\treturn item._id;\n\t\t\t});\n\t\t\tfilteredResults = filteredResults.filter(function (item) {\n\t\t\t\treturn !ids.includes(item._id);\n\t\t\t});\n\t\t}\n\n\t\tif (promotedResults.length) {\n\t\t\tvar _ids = promotedResults.map(function (item) {\n\t\t\t\treturn item._id;\n\t\t\t}).filter(Boolean);\n\t\t\tif (_ids) {\n\t\t\t\tfilteredResults = filteredResults.filter(function (item) {\n\t\t\t\t\treturn !_ids.includes(item._id);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfilteredResults = [].concat(streamResults, promotedResults, filteredResults);\n\t\t}\n\t\treturn {\n\t\t\tresults: results,\n\t\t\tstreamResults: streamResults,\n\t\t\tfilteredResults: filteredResults,\n\t\t\tpromotedResults: promotedResults,\n\t\t\taggregationData: aggregationData || [],\n\t\t\tloadMore: _this3.loadMore,\n\t\t\tbase: base,\n\t\t\ttriggerClickAnalytics: _this3.triggerClickAnalytics\n\t\t};\n\t};\n\n\tthis.setReact = function (props) {\n\t\tvar react = props.react;\n\n\t\tif (react) {\n\t\t\tvar newReact = (0, _helper.pushToAndClause)(react, _this3.internalComponent);\n\t\t\tprops.watchComponent(props.componentId, newReact);\n\t\t} else {\n\t\t\tprops.watchComponent(props.componentId, {\n\t\t\t\tand: _this3.internalComponent\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.scrollToTop = function () {\n\t\tif (_this3.domNode === window) {\n\t\t\tdocument.documentElement.scrollTop = 0;\n\t\t\tdocument.body.scrollTop = 0;\n\t\t} else {\n\t\t\t_this3.domNode.scrollTop = 0;\n\t\t}\n\t};\n\n\tthis.scrollHandler = function () {\n\t\tvar renderLoader = window.innerHeight + window.pageYOffset + 300 >= document.body.offsetHeight;\n\t\tif (_this3.props.scrollTarget) {\n\t\t\trenderLoader = _this3.domNode.clientHeight + _this3.domNode.scrollTop + 300 >= _this3.domNode.scrollHeight;\n\t\t}\n\t\tif (!_this3.props.isLoading && renderLoader) {\n\t\t\t_this3.loadMore();\n\t\t}\n\t};\n\n\tthis.loadMore = function () {\n\t\tif (_this3.props.aggregationField && !_this3.props.afterKey) return;\n\t\tif (_this3.props.hits && _this3.props.total !== _this3.props.hits.length) {\n\t\t\tvar value = _this3.state.from + _this3.props.size;\n\t\t\tvar options = _extends({}, (0, _helper.getQueryOptions)(_this3.props), _this3.getAggsQuery());\n\t\t\t_this3.setState({\n\t\t\t\tfrom: value\n\t\t\t});\n\t\t\t_this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n\t\t\t\tfrom: value\n\t\t\t}), true, !!_this3.props.aggregationField);\n\t\t}\n\t};\n\n\tthis.setPage = function (page) {\n\t\t// onPageClick will be called everytime a pagination button is clicked\n\t\tif (page !== _this3.state.currentPage) {\n\t\t\tvar onPageClick = _this3.props.onPageClick;\n\n\t\t\tif (onPageClick) {\n\t\t\t\tonPageClick(page + 1);\n\t\t\t}\n\t\t\tvar value = _this3.props.size * page;\n\t\t\tvar options = (0, _helper.getQueryOptions)(_this3.props);\n\t\t\toptions.from = _this3.state.from;\n\t\t\t_this3.setState({\n\t\t\t\tfrom: value,\n\t\t\t\tcurrentPage: page\n\t\t\t}, function () {\n\t\t\t\t_this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n\t\t\t\t\tfrom: value\n\t\t\t\t}), false);\n\n\t\t\t\t_this3.updatePageURL(page);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.renderResultStats = function () {\n\t\tvar _props4 = _this3.props,\n\t\t    hits = _props4.hits,\n\t\t    promotedResults = _props4.promotedResults,\n\t\t    total = _props4.total;\n\n\n\t\tvar shouldStatsVisible = hits && promotedResults && (hits.length || promotedResults.length);\n\t\tif (_this3.props.renderResultStats && shouldStatsVisible) {\n\t\t\treturn _this3.props.renderResultStats(_this3.stats);\n\t\t} else if (total) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t'p',\n\t\t\t\t{\n\t\t\t\t\tclassName: _results.resultStats + ' ' + (0, _helper.getClassName)(_this3.props.innerClass, 'resultStats')\n\t\t\t\t},\n\t\t\t\t_this3.props.total,\n\t\t\t\t' results found in ',\n\t\t\t\t_this3.props.time,\n\t\t\t\t'ms'\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderNoResults = function () {\n\t\treturn _react2.default.createElement(\n\t\t\t'div',\n\t\t\t{ className: (0, _helper.getClassName)(_this3.props.innerClass, 'noResults') || null },\n\t\t\t_this3.props.renderNoResults()\n\t\t);\n\t};\n\n\tthis.handleSortChange = function (e) {\n\t\tvar _ref12;\n\n\t\tvar index = e.target.value;\n\t\tvar options = (0, _helper.getQueryOptions)(_this3.props);\n\t\t// This fixes issue #371 (where sorting a multi-result page with infinite loader breaks)\n\t\toptions.from = 0;\n\n\t\toptions.sort = [(_ref12 = {}, _ref12[_this3.props.sortOptions[index].dataField] = {\n\t\t\torder: _this3.props.sortOptions[index].sortBy\n\t\t}, _ref12)];\n\t\t_this3.props.setQueryOptions(_this3.props.componentId, options, true);\n\t\t_this3.sortOptionIndex = index;\n\n\t\t_this3.setState({\n\t\t\tcurrentPage: 0,\n\t\t\tfrom: 0\n\t\t}, function () {\n\t\t\t_this3.updatePageURL(0);\n\t\t});\n\t};\n\n\tthis.updatePageURL = function (page) {\n\t\tif (_this3.props.URLParams) {\n\t\t\t_this3.props.setPageURL(_this3.props.componentId, page + 1, _this3.props.componentId, false, true);\n\t\t}\n\t};\n\n\tthis.triggerClickAnalytics = function (searchPosition) {\n\t\t_this3.props.triggerAnalytics(searchPosition);\n\t};\n\n\tthis.renderSortOptions = function () {\n\t\treturn _react2.default.createElement(\n\t\t\t'select',\n\t\t\t{\n\t\t\t\tclassName: _results.sortOptions + ' ' + (0, _helper.getClassName)(_this3.props.innerClass, 'sortOptions'),\n\t\t\t\tname: 'sort-options',\n\t\t\t\tonChange: _this3.handleSortChange,\n\t\t\t\tdefaultValue: _this3.sortOptionIndex\n\t\t\t},\n\t\t\t_this3.props.sortOptions.map(function (sort, index) {\n\t\t\t\treturn _react2.default.createElement(\n\t\t\t\t\t'option',\n\t\t\t\t\t{ key: sort.label, value: index },\n\t\t\t\t\tsort.label\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t};\n\n\tthis.renderError = function () {\n\t\tvar _props5 = _this3.props,\n\t\t    error = _props5.error,\n\t\t    isLoading = _props5.isLoading,\n\t\t    renderError = _props5.renderError;\n\n\t\tif (renderError && error && !isLoading) {\n\t\t\treturn (0, _utils.isFunction)(renderError) ? renderError(error) : renderError;\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.withClickIds = function (results) {\n\t\tvar _getAllData3 = _this3.getAllData(),\n\t\t    base = _getAllData3.base;\n\n\t\treturn results.map(function (result, index) {\n\t\t\treturn _extends({}, result, {\n\t\t\t\t_click_id: base + index\n\t\t\t});\n\t\t});\n\t};\n\n\tthis.getData = function () {\n\t\tvar _getAllData4 = _this3.getAllData(),\n\t\t    results = _getAllData4.results,\n\t\t    streamResults = _getAllData4.streamResults,\n\t\t    filteredResults = _getAllData4.filteredResults,\n\t\t    promotedResults = _getAllData4.promotedResults,\n\t\t    aggregationData = _getAllData4.aggregationData;\n\n\t\treturn {\n\t\t\tdata: _this3.withClickIds(filteredResults),\n\t\t\taggregationData: _this3.withClickIds(aggregationData || []),\n\t\t\tstreamData: _this3.withClickIds(streamResults),\n\t\t\tpromotedData: _this3.withClickIds(promotedResults),\n\t\t\trawData: _this3.withClickIds(results),\n\t\t\tresultStats: _this3.stats\n\t\t};\n\t};\n\n\tthis.getComponent = function () {\n\t\tvar _props6 = _this3.props,\n\t\t    error = _props6.error,\n\t\t    isLoading = _props6.isLoading;\n\n\t\tvar data = _extends({\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tloadMore: _this3.loadMore,\n\t\t\ttriggerAnalytics: _this3.triggerClickAnalytics\n\t\t}, _this3.getData());\n\t\treturn (0, _utils.getComponent)(data, _this3.props);\n\t};\n};\n\nReactiveList.propTypes = {\n\taddComponent: _types2.default.funcRequired,\n\tloadMore: _types2.default.funcRequired,\n\tremoveComponent: _types2.default.funcRequired,\n\tsetQueryListener: _types2.default.funcRequired,\n\tonQueryChange: _types2.default.func,\n\tonError: _types2.default.func,\n\tsetPageURL: _types2.default.func,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tsetComponentProps: _types2.default.funcRequired,\n\tupdateComponentProps: _types2.default.funcRequired,\n\tsetStreaming: _types2.default.func,\n\tsearchState: _types2.default.dateObject,\n\tupdateQuery: _types2.default.funcRequired,\n\twatchComponent: _types2.default.funcRequired,\n\tcurrentPage: _types2.default.number,\n\thits: _types2.default.hits,\n\tisLoading: _types2.default.bool,\n\tincludeFields: _types2.default.includeFields,\n\tstreamHits: _types2.default.hits,\n\tpromotedResults: _types2.default.hits,\n\ttime: _types2.default.number,\n\ttotal: _types2.default.number,\n\thidden: _types2.default.number,\n\tconfig: _types2.default.props,\n\tanalytics: _types2.default.props,\n\tqueryLog: _types2.default.props,\n\terror: _types2.default.title,\n\theaders: _types2.default.headers,\n\t// component props\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tchildren: _types2.default.func,\n\tdataField: _types2.default.stringRequired,\n\taggregationField: _types2.default.string,\n\taggregationData: _types2.default.aggregationData,\n\tdefaultPage: _types2.default.number,\n\tdefaultQuery: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tinnerClass: _types2.default.style,\n\tinfiniteScroll: _types2.default.bool,\n\tlistClass: _types2.default.string,\n\tloader: _types2.default.title,\n\trender: _types2.default.func,\n\trenderItem: _types2.default.func,\n\trenderError: _types2.default.title,\n\trenderPagination: _types2.default.func,\n\tonData: _types2.default.func,\n\trenderNoResults: _types2.default.title,\n\tonPageChange: _types2.default.func,\n\tonPageClick: _types2.default.func,\n\tpages: _types2.default.number,\n\tpagination: _types2.default.bool,\n\tpaginationAt: _types2.default.paginationAt,\n\tshowEndPage: _types2.default.bool,\n\treact: _types2.default.react,\n\trenderResultStats: _types2.default.func,\n\tscrollOnChange: _types2.default.bool,\n\tscrollTarget: _types2.default.string,\n\tshowLoader: _types2.default.bool,\n\tshowResultStats: _types2.default.bool,\n\tsize: _types2.default.number,\n\tsortBy: _types2.default.sortBy,\n\tsortOptions: _types2.default.sortOptions,\n\tstream: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\tURLParams: _types2.default.bool,\n\tdefaultSortOption: _types2.default.string,\n\tafterKey: _types2.default.props\n};\n\nReactiveList.defaultProps = {\n\tclassName: null,\n\tcurrentPage: 0,\n\tlistClass: '',\n\tpages: 5,\n\tinfiniteScroll: true,\n\tpagination: false,\n\tpaginationAt: 'bottom',\n\tshowEndPage: false,\n\tincludeFields: ['*'],\n\texcludeFields: [],\n\tshowResultStats: true,\n\tsize: 10,\n\tstyle: {},\n\tURLParams: false,\n\tshowLoader: true,\n\trenderNoResults: function renderNoResults() {\n\t\treturn 'No Results found.';\n\t},\n\tscrollOnChange: true,\n\tdefaultSortOption: null\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tdefaultPage: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value - 1 || -1,\n\t\thits: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tisLoading: state.isLoading[props.componentId] || false,\n\t\tstreamHits: state.streamHits[props.componentId],\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tconfig: state.config,\n\t\tqueryLog: state.queryLog[props.componentId],\n\t\terror: state.error[props.componentId],\n\t\tpromotedResults: state.promotedResults[props.componentId] || [],\n\t\tafterKey: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.aggregationField] && state.aggregations[props.componentId][props.aggregationField].after_key\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\taddComponent: function addComponent(component) {\n\t\t\treturn dispatch((0, _actions.addComponent)(component));\n\t\t},\n\t\tsetComponentProps: function setComponentProps(component, options) {\n\t\t\treturn dispatch((0, _actions.setComponentProps)(component, options));\n\t\t},\n\t\tupdateComponentProps: function updateComponentProps(component, options) {\n\t\t\treturn dispatch((0, _actions.updateComponentProps)(component, options));\n\t\t},\n\t\tloadMore: function loadMore(component, options, append, appendAggs) {\n\t\t\treturn dispatch((0, _actions.loadMore)(component, options, append, appendAggs));\n\t\t},\n\t\tremoveComponent: function removeComponent(component) {\n\t\t\treturn dispatch((0, _actions.removeComponent)(component));\n\t\t},\n\t\tsetPageURL: function setPageURL(component, value, label, showFilter, URLParams) {\n\t\t\treturn dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tsetQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n\t\t\treturn dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n\t\t},\n\t\tsetStreaming: function setStreaming(component, stream) {\n\t\t\treturn dispatch((0, _actions.setStreaming)(component, stream));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject, execute) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n\t\t},\n\t\twatchComponent: function watchComponent(component, react) {\n\t\t\treturn dispatch((0, _actions.watchComponent)(component, react));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition) {\n\t\t\treturn dispatch((0, _actions.recordResultClick)(searchPosition));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n\treturn _react2.default.createElement(ReactiveList, _extends({ ref: props.myForwardedRef }, props));\n});\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, ReactiveList);\n\nForwardRefComponent.name = 'ReactiveList';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}