{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _InputIcon = require('../../styles/InputIcon');\n\nvar _InputIcon2 = _interopRequireDefault(_InputIcon);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Text = (0, _emotionTheming.withTheme)(function (props) {\n  return _react2.default.createElement('span', {\n    className: 'trim',\n    style: {\n      color: props.primary ? props.theme.colors.primaryColor : props.theme.colors.textColor\n    }\n  }, props.children);\n});\n\nvar CategorySearch = function (_Component) {\n  _inherits(CategorySearch, _Component);\n\n  function CategorySearch(props) {\n    _classCallCheck(this, CategorySearch);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value || props.defaultValue || {}; // eslint-disable-next-line\n\n    var _value$term = value.term,\n        currentValue = _value$term === undefined ? '' : _value$term,\n        _value$category = value.category,\n        currentCategory = _value$category === undefined ? null : _value$category; // add preference to selected-X value from URL/SSR\n\n    currentValue = props.selectedValue || currentValue;\n    currentCategory = props.selectedCategory || currentCategory;\n    _this.state = {\n      currentValue: currentValue,\n      currentCategory: currentCategory,\n      suggestions: [],\n      isOpen: false\n    };\n    /**\n     * To regulate the query execution based on the input handler,\n     * the component query will only get executed when it sets to `true`.\n     * */\n\n    _this.isPending = false;\n    _this.internalComponent = props.componentId + '__internal';\n    _this.queryOptions = {\n      size: props.size\n    };\n    props.addComponent(props.componentId);\n    props.addComponent(_this.internalComponent);\n    props.setComponentProps(props.componentId, _extends({}, props, {\n      componentType: _constants.componentTypes.categorySearch\n    }));\n    props.setQueryListener(props.componentId, props.onQueryChange, props.onError);\n\n    if (props.highlight) {\n      var queryOptions = CategorySearch.highlightQuery(props) || {};\n      queryOptions.size = props.size;\n      _this.queryOptions = queryOptions;\n      props.setQueryOptions(props.componentId, queryOptions);\n    } else {\n      props.setQueryOptions(props.componentId, _this.queryOptions);\n    }\n\n    _this.setReact(props);\n\n    var aggsQuery = _this.getCombinedAggsQuery();\n\n    props.setQueryOptions(_this.internalComponent, aggsQuery, false);\n    var hasMounted = false;\n    var cause = null;\n\n    if (currentValue) {\n      var calcValue = {\n        term: currentValue,\n        category: currentCategory\n      };\n\n      if (props.onChange) {\n        props.onChange(calcValue, function () {\n          return _this.triggerQuery(calcValue);\n        });\n      }\n\n      _this.setValue(currentValue, true, props, currentCategory, cause, hasMounted);\n    }\n\n    return _this;\n  }\n\n  CategorySearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n      _this2.props.updateComponentProps(_this2.props.componentId, _this2.props);\n    });\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField'], function () {\n      var queryOptions = CategorySearch.highlightQuery(_this2.props) || {};\n      queryOptions.size = _this2.props.size;\n      _this2.queryOptions = queryOptions;\n\n      _this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n    }); // Treat defaultQuery and customQuery as reactive props\n\n    if (!(0, _utils.isIdentical)(this.props.defaultQuery, prevProps.defaultQuery)) {\n      this.updateDefaultQuery(this.state.currentValue, this.props);\n      this.updateQuery(this.state.currentValue, this.props);\n    }\n\n    if (!(0, _utils.isIdentical)(this.props.customQuery, prevProps.customQuery)) {\n      this.updateQuery(this.state.currentValue, this.props);\n    }\n\n    (0, _helper.checkPropChange)(this.props.react, prevProps.react, function () {\n      return _this2.setReact(_this2.props);\n    });\n\n    if (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n      // shallow check allows us to set suggestions even if the next set\n      // of suggestions are same as the current one\n      if (this.props.suggestions !== prevProps.suggestions) {\n        if (this.props.onSuggestions) {\n          this.props.onSuggestions(this.props.suggestions);\n        } // eslint-disable-next-line\n\n\n        this.setState({\n          suggestions: this.onSuggestions(this.props.suggestions)\n        });\n      }\n    }\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'categoryField', 'nestedField', 'searchOperators'], function () {\n      _this2.updateQuery(_this2.state.currentValue, _this2.props);\n    });\n\n    if (!(0, _helper.isEqual)(this.props.value, prevProps.value)) {\n      var _props$value = this.props.value,\n          currentValue = _props$value.term,\n          _props$value$category = _props$value.category,\n          currentCategory = _props$value$category === undefined ? null : _props$value$category;\n      this.setValue(currentValue, true, this.props, currentCategory, undefined, undefined, false);\n    } else if ( // since, selectedValue will be updated when currentValue changes,\n    // we must only check for the changes introduced by\n    // clear action from SelectedFilters component in which case,\n    // the currentValue will never match the updated selectedValue\n    this.props.selectedValue !== prevProps.selectedValue && this.state.currentValue !== this.props.selectedValue) {\n      var _props = this.props,\n          value = _props.value,\n          onChange = _props.onChange;\n\n      if (value === undefined) {\n        this.setValue(this.props.selectedValue || '', true, this.props, this.props.selectedCategory);\n      } else if (onChange) {\n        var _currentValue = {\n          term: this.props.selectedValue || '',\n          category: this.props.selectedCategory || null\n        }; // value prop exists\n\n        onChange(_currentValue, function () {\n          return _this2.triggerQuery(_currentValue);\n        });\n      } else {\n        // value prop exists and onChange is not defined:\n        // we need to put the current value back into the store\n        // if the clear action was triggered by interacting with\n        // selected-filters component\n        this.isPending = false;\n        this.setValue(this.state.currentValue, true, this.props, this.state.currentCategory);\n      }\n    }\n  };\n\n  CategorySearch.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeComponent(this.props.componentId);\n    this.props.removeComponent(this.internalComponent);\n  };\n\n  CategorySearch.prototype.render = function render() {\n    var _this3 = this;\n\n    var currentValue = this.state.currentValue;\n    var _props2 = this.props,\n        theme = _props2.theme,\n        themePreset = _props2.themePreset;\n    var finalSuggestionsList = this.parsedSuggestions;\n    return _react2.default.createElement(_Container2.default, {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && _react2.default.createElement(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.props.defaultSuggestions || this.props.autosuggest ? _react2.default.createElement(_downshift2.default, _extends({\n      id: this.props.componentId + '-downshift',\n      onChange: this.onSuggestionSelected,\n      onStateChange: this.handleStateChange,\n      isOpen: this.state.isOpen,\n      itemToString: function itemToString(i) {\n        return i;\n      },\n      render: function render(_ref) {\n        var getInputProps = _ref.getInputProps,\n            getItemProps = _ref.getItemProps,\n            isOpen = _ref.isOpen,\n            highlightedIndex = _ref.highlightedIndex,\n            rest = _objectWithoutProperties(_ref, ['getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex']);\n\n        return _react2.default.createElement('div', {\n          className: _Input.suggestionsContainer\n        }, _react2.default.createElement(_Input2.default, _extends({\n          innerRef: function innerRef(c) {\n            _this3._inputRef = c;\n          },\n          'aria-label': _this3.props.componentId,\n          showClear: _this3.props.showClear,\n          id: _this3.props.componentId + '-input',\n          showIcon: _this3.props.showIcon,\n          iconPosition: _this3.props.iconPosition\n        }, getInputProps({\n          className: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n          placeholder: _this3.props.placeholder,\n          value: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n          onChange: _this3.onInputChange,\n          onBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n          onFocus: _this3.handleFocus,\n          onKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n          onKeyDown: function onKeyDown(e) {\n            return _this3.handleKeyDown(e, highlightedIndex);\n          },\n          onKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp)\n        }), {\n          themePreset: themePreset\n        })), _this3.renderIcons(), _this3.renderLoader(), _this3.renderError(), _this3.hasCustomRenderer && _this3.getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex\n        }, rest)), !_this3.hasCustomRenderer && isOpen && finalSuggestionsList.length ? _react2.default.createElement('ul', {\n          className: (0, _Input.suggestions)(themePreset, theme) + ' ' + (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n        }, finalSuggestionsList.slice(0, 10).map(function (item, index) {\n          return _react2.default.createElement('li', _extends({}, getItemProps({\n            item: item\n          }), {\n            key: index + 1 + '-' + item.value,\n            style: {\n              backgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n            }\n          }), _react2.default.createElement(Text, {\n            primary: !!item.category\n          }, _react2.default.createElement(_SuggestionItem2.default, {\n            currentValue: currentValue,\n            suggestion: item\n          })));\n        })) : _this3.renderNoSuggestion(finalSuggestionsList));\n      }\n    }, this.props.downShiftProps)) : _react2.default.createElement('div', {\n      className: _Input.suggestionsContainer\n    }, _react2.default.createElement(_Input2.default, {\n      innerRef: function innerRef(c) {\n        _this3._inputRef = c;\n      },\n      'aria-label': this.props.componentId,\n      className: (0, _helper.getClassName)(this.props.innerClass, 'input'),\n      placeholder: this.props.placeholder,\n      value: this.state.currentValue ? this.state.currentValue : '',\n      onChange: this.onInputChange,\n      onBlur: this.withTriggerQuery(this.props.onBlur),\n      onFocus: this.withTriggerQuery(this.props.onFocus),\n      onKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n      onKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n      onKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n      autoFocus: this.props.autoFocus,\n      iconPosition: this.props.iconPosition,\n      showClear: this.props.showClear,\n      showIcon: this.props.showIcon,\n      themePreset: themePreset\n    }), this.renderIcons()));\n  };\n\n  _createClass(CategorySearch, [{\n    key: 'stats',\n    get: function get() {\n      return (0, _helper.getResultStats)(this.props);\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    }\n  }, {\n    key: 'filteredCategories',\n    get: function get() {\n      var categories = this.props.categories;\n      return categories.filter(function (category) {\n        return Boolean(category.key);\n      });\n    }\n  }, {\n    key: 'parsedSuggestions',\n    get: function get() {\n      var finalSuggestionsList = [];\n      var suggestionsList = []; // filter out empty categories\n\n      var filteredCategories = this.filteredCategories;\n\n      if (!this.state.currentValue && this.props.defaultSuggestions && this.props.defaultSuggestions.length) {\n        finalSuggestionsList = this.props.defaultSuggestions;\n      } else if (this.state.currentValue) {\n        suggestionsList = this.state.suggestions;\n      }\n\n      if (this.state.currentValue && this.state.suggestions.length && filteredCategories.length) {\n        var categorySuggestions = [{\n          label: this.state.currentValue + ' in all categories',\n          value: this.state.currentValue,\n          category: '*',\n          // no source object exists for category based suggestions\n          source: null\n        }, {\n          label: this.state.currentValue + ' in ' + filteredCategories[0].key,\n          value: this.state.currentValue,\n          category: filteredCategories[0].key,\n          source: null\n        }];\n\n        if (filteredCategories.length > 1) {\n          categorySuggestions = [].concat(categorySuggestions, [{\n            label: this.state.currentValue + ' in ' + filteredCategories[1].key,\n            value: this.state.currentValue,\n            category: filteredCategories[1].key,\n            source: null\n          }]);\n        }\n\n        finalSuggestionsList = [].concat(categorySuggestions, suggestionsList);\n      }\n\n      return (0, _helper.withClickIds)(finalSuggestionsList);\n    }\n  }]);\n\n  return CategorySearch;\n}(_react.Component);\n\nCategorySearch.highlightQuery = function (props) {\n  if (props.customHighlight) {\n    return props.customHighlight(props);\n  }\n\n  if (!props.highlight) {\n    return null;\n  }\n\n  var fields = {};\n  var highlightField = props.highlightField ? props.highlightField : props.dataField;\n\n  if (typeof highlightField === 'string') {\n    fields[highlightField] = {};\n  } else if (Array.isArray(highlightField)) {\n    highlightField.forEach(function (item) {\n      fields[item] = {};\n    });\n  }\n\n  return {\n    highlight: _extends({\n      pre_tags: ['<mark>'],\n      post_tags: ['</mark>'],\n      fields: fields\n    }, props.highlightField && {\n      require_field_match: false\n    })\n  };\n};\n\nCategorySearch.defaultQuery = function (value, props, category) {\n  var finalQuery = null;\n  var fields = void 0;\n\n  if (value) {\n    if (Array.isArray(props.dataField)) {\n      fields = props.dataField;\n    } else {\n      fields = [props.dataField];\n    }\n\n    if (props.searchOperators) {\n      finalQuery = {\n        simple_query_string: CategorySearch.shouldQuery(value, fields, props)\n      };\n    } else {\n      finalQuery = {\n        bool: {\n          should: CategorySearch.shouldQuery(value, fields, props),\n          minimum_should_match: '1'\n        }\n      };\n    }\n\n    if (category && category !== '*') {\n      var _term;\n\n      finalQuery = [finalQuery, {\n        term: (_term = {}, _term[props.categoryField] = category, _term)\n      }];\n    }\n  }\n\n  if (value === '') {\n    finalQuery = null;\n  }\n\n  if (finalQuery && props.nestedField) {\n    finalQuery = {\n      nested: {\n        path: props.nestedField,\n        query: finalQuery\n      }\n    };\n  }\n\n  return finalQuery;\n};\n\nCategorySearch.shouldQuery = function (value, dataFields, props) {\n  var fields = dataFields.map(function (field, index) {\n    return '' + field + (Array.isArray(props.fieldWeights) && props.fieldWeights[index] ? '^' + props.fieldWeights[index] : '');\n  });\n\n  if (props.searchOperators) {\n    return {\n      query: value,\n      fields: fields,\n      default_operator: props.queryFormat\n    };\n  }\n\n  if (props.queryFormat === 'and') {\n    return [{\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'cross_fields',\n        operator: 'and'\n      }\n    }, {\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'phrase_prefix',\n        operator: 'and'\n      }\n    }];\n  }\n\n  return [{\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'best_fields',\n      operator: 'or',\n      fuzziness: props.fuzziness ? props.fuzziness : 0\n    }\n  }, {\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'phrase_prefix',\n      operator: 'or'\n    }\n  }];\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.getAggsQuery = function (field) {\n    var _aggs;\n\n    return {\n      aggs: (_aggs = {}, _aggs[field] = {\n        terms: {\n          field: field\n        }\n      }, _aggs)\n    };\n  };\n\n  this.getCombinedAggsQuery = function () {\n    var _props3 = _this4.props,\n        categoryField = _props3.categoryField,\n        aggregationField = _props3.aggregationField;\n\n    var aggsQuery = _this4.getAggsQuery(categoryField);\n\n    if (aggregationField) {\n      var compositeAggsQuery = (0, _helper.getCompositeAggsQuery)({}, _this4.props, null, true);\n      aggsQuery.aggs = _extends({}, aggsQuery.aggs, compositeAggsQuery.aggs);\n    }\n\n    return aggsQuery;\n  };\n\n  this.setReact = function (props) {\n    var react = props.react;\n\n    if (react) {\n      var newReact = (0, _helper.pushToAndClause)(react, _this4.internalComponent);\n      props.watchComponent(props.componentId, newReact);\n    } else {\n      props.watchComponent(props.componentId, {\n        and: _this4.internalComponent\n      });\n    }\n  };\n\n  this.onSuggestions = function (searchResults) {\n    return (0, _helper.handleOnSuggestions)(searchResults, _this4.state.currentValue, _this4.props);\n  };\n\n  this.setValue = function (value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n    var category = arguments[3];\n    var cause = arguments[4];\n    var hasMounted = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    var toggleIsOpen = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n\n    var performUpdate = function performUpdate() {\n      if (hasMounted) {\n        _this4.setState({\n          currentValue: value || '',\n          currentCategory: category || null,\n          suggestions: []\n        }, function () {\n          if (isDefaultValue) {\n            if (_this4.props.autosuggest) {\n              if (toggleIsOpen) {\n                _this4.setState({\n                  isOpen: false\n                });\n              }\n\n              _this4.updateDefaultQuery(value, props);\n            } // in case of strict selection only SUGGESTION_SELECT should be able\n            // to set the query otherwise the value should reset\n\n\n            if (props.strictSelection) {\n              if (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n                _this4.updateQuery(value, props, category);\n              } else {\n                _this4.setValue('', true);\n              }\n            } else {\n              _this4.updateQuery(value, props, category);\n            }\n          } else {\n            // debounce for handling text while typing\n            _this4.handleTextChange(value);\n          }\n\n          if (props.onValueChange) props.onValueChange(value);\n        });\n      } else {\n        _this4.updateDefaultQuery(value, props);\n\n        _this4.updateQuery(value, props, category);\n\n        if (props.onValueChange) props.onValueChange(value);\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n  };\n\n  this.handleTextChange = (0, _helper.debounce)(function (value) {\n    if (_this4.props.autosuggest) {\n      _this4.updateDefaultQuery(value, _this4.props);\n    } else {\n      _this4.updateQuery(value, _this4.props);\n    }\n  }, this.props.debounce);\n\n  this.updateDefaultQuery = function (value, props) {\n    var category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n    var defaultQuery = props.defaultQuery;\n    var defaultQueryOptions = void 0;\n    var query = CategorySearch.defaultQuery(value, props, category);\n\n    if (defaultQuery) {\n      var defaultQueryTobeSet = defaultQuery(value, props, category) || {};\n\n      if (defaultQueryTobeSet.query) {\n        query = defaultQueryTobeSet.query;\n      }\n\n      defaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet);\n    }\n\n    props.setSuggestionsSearchValue(value);\n\n    var aggsQuery = _this4.getCombinedAggsQuery();\n\n    props.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, aggsQuery, defaultQueryOptions));\n    props.updateQuery({\n      componentId: _this4.internalComponent,\n      query: query,\n      value: value,\n      category: category,\n      componentType: _constants.componentTypes.categorySearch\n    });\n  };\n\n  this.updateQuery = function (value, props) {\n    var category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n    var customQuery = props.customQuery,\n        filterLabel = props.filterLabel,\n        showFilter = props.showFilter,\n        URLParams = props.URLParams;\n    var customQueryOptions = void 0;\n    var query = CategorySearch.defaultQuery(value, props, category);\n\n    if (customQuery) {\n      var customQueryTobeSet = customQuery(value, props, category) || {};\n\n      if (customQueryTobeSet.query) {\n        query = customQueryTobeSet.query;\n      }\n\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n    } // query options should be applied to the source component,\n    // not on internal component, hence using `this.props.componentId` here\n\n\n    props.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions));\n\n    if (!_this4.isPending) {\n      props.updateQuery({\n        componentId: props.componentId,\n        query: query,\n        value: value,\n        label: filterLabel,\n        showFilter: showFilter,\n        URLParams: URLParams,\n        componentType: _constants.componentTypes.categorySearch,\n        category: category\n      });\n    }\n  };\n\n  this.handleFocus = function (event) {\n    _this4.setState({\n      isOpen: true\n    });\n\n    if (_this4.props.onFocus) {\n      _this4.props.onFocus(event, _this4.triggerQuery);\n    }\n  };\n\n  this.clearValue = function () {\n    _this4.isPending = false;\n\n    _this4.setValue('', true);\n\n    _this4.onValueSelected(null, _causes2.default.CLEAR_VALUE, null);\n  };\n\n  this.handleKeyDown = function (event, highlightedIndex) {\n    var _props4 = _this4.props,\n        value = _props4.value,\n        onChange = _props4.onChange;\n\n    if (value !== undefined && onChange) {\n      _this4.isPending = true;\n    } // if a suggestion was selected, delegate the handling to suggestion handler\n\n\n    if (event.key === 'Enter' && highlightedIndex === null) {\n      _this4.setValue(event.target.value, true);\n\n      var currentValue = {\n        term: event.target.value,\n        category: null\n      };\n\n      _this4.onValueSelected(currentValue, _causes2.default.ENTER_PRESS);\n    }\n\n    if (_this4.props.onKeyDown) {\n      _this4.props.onKeyDown(event, _this4.triggerQuery);\n    }\n  };\n\n  this.onInputChange = function (e) {\n    var inputValue = e.target.value;\n\n    if (!_this4.state.isOpen) {\n      _this4.setState({\n        isOpen: true\n      });\n    }\n\n    var _props5 = _this4.props,\n        value = _props5.value,\n        onChange = _props5.onChange;\n\n    if (value === undefined) {\n      _this4.setValue(inputValue);\n    } else if (onChange) {\n      _this4.isPending = true;\n      var currentValue = {\n        term: inputValue // category: null,\n\n      }; // handle caret position in controlled components\n\n      (0, _utils.handleCaretPosition)(e);\n      onChange(currentValue, function () {\n        return _this4.triggerQuery(currentValue);\n      }, e);\n    } else {\n      _this4.setValue(inputValue);\n    }\n  };\n\n  this.triggerQuery = function (value) {\n    var currentValue = value.term,\n        _value$category2 = value.category,\n        currentCategory = _value$category2 === undefined ? null : _value$category2;\n    _this4.isPending = false;\n\n    _this4.setValue(currentValue, true, _this4.props, currentCategory);\n  };\n\n  this.onSuggestionSelected = function (suggestion) {\n    var _props6 = _this4.props,\n        value = _props6.value,\n        onChange = _props6.onChange;\n    var currentValue = {\n      term: suggestion.value,\n      category: suggestion.category || null\n    };\n\n    _this4.setState({\n      isOpen: false\n    });\n\n    if (value === undefined) {\n      _this4.setValue(currentValue.term, true, _this4.props, currentValue.category, _causes2.default.SUGGESTION_SELECT);\n    } else if (onChange) {\n      _this4.isPending = false;\n      onChange(currentValue, function () {\n        return _this4.triggerQuery(currentValue);\n      });\n    } // Record analytics for selected suggestions\n\n\n    _this4.triggerClickAnalytics(suggestion._click_id); // onValueSelected is user interaction driven:\n    // it should be triggered irrespective of controlled (or)\n    // uncontrolled component behavior\n\n\n    _this4.onValueSelected(currentValue, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n  };\n\n  this.onValueSelected = function (selectedValue, cause, source) {\n    var onValueSelected = _this4.props.onValueSelected;\n\n    if (onValueSelected) {\n      onValueSelected(selectedValue, cause, source);\n    }\n  };\n\n  this.handleStateChange = function (changes) {\n    var isOpen = changes.isOpen,\n        type = changes.type;\n\n    if (type === _downshift2.default.stateChangeTypes.mouseUp) {\n      _this4.setState({\n        isOpen: isOpen\n      });\n    }\n  };\n\n  this.getBackgroundColor = function (highlightedIndex, index) {\n    var isDark = _this4.props.themePreset === 'dark';\n\n    if (isDark) {\n      return highlightedIndex === index ? '#555' : '#424242';\n    }\n\n    return highlightedIndex === index ? '#eee' : '#fff';\n  };\n\n  this.handleSearchIconClick = function () {\n    var currentValue = _this4.state.currentValue;\n\n    if (currentValue.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(currentValue, true);\n    }\n  };\n\n  this.handleVoiceResults = function (_ref2) {\n    var results = _ref2.results;\n\n    if (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(results[0][0].transcript.trim(), true);\n\n      if (_this4.props.autosuggest) {\n        _this4._inputRef.focus();\n\n        _this4.setState({\n          isOpen: true\n        });\n      }\n    }\n  };\n\n  this.renderIcon = function () {\n    if (_this4.props.showIcon) {\n      return _this4.props.icon || _react2.default.createElement(_SearchSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderCancelIcon = function () {\n    if (_this4.props.showClear) {\n      return _this4.props.clearIcon || _react2.default.createElement(_CancelSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderIcons = function () {\n    var currentValue = _this4.state.currentValue;\n    var _props7 = _this4.props,\n        showIcon = _props7.showIcon,\n        showClear = _props7.showClear,\n        renderMic = _props7.renderMic,\n        getMicInstance = _props7.getMicInstance,\n        showVoiceSearch = _props7.showVoiceSearch,\n        iconPosition = _props7.iconPosition,\n        innerClass = _props7.innerClass;\n    return _react2.default.createElement('div', null, _this4.state.currentValue && showClear && _react2.default.createElement(_InputIcon2.default, {\n      onClick: _this4.clearValue,\n      iconPosition: 'right',\n      clearIcon: iconPosition === 'right',\n      showIcon: showIcon,\n      isClearIcon: true\n    }, _this4.renderCancelIcon()), showVoiceSearch && _react2.default.createElement(_Mic2.default, {\n      getInstance: getMicInstance,\n      render: renderMic,\n      iconPosition: iconPosition,\n      onResult: _this4.handleVoiceResults,\n      className: (0, _helper.getClassName)(innerClass, 'mic') || null,\n      applyClearStyle: !!currentValue && showClear,\n      showIcon: showIcon\n    }), _react2.default.createElement(_InputIcon2.default, {\n      onClick: _this4.handleSearchIconClick,\n      iconPosition: iconPosition,\n      showIcon: showIcon\n    }, _this4.renderIcon()));\n  };\n\n  this.renderNoSuggestion = function () {\n    var finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var _props8 = _this4.props,\n        themePreset = _props8.themePreset,\n        theme = _props8.theme,\n        isLoading = _props8.isLoading,\n        renderNoSuggestion = _props8.renderNoSuggestion,\n        innerClass = _props8.innerClass,\n        renderError = _props8.renderError,\n        error = _props8.error;\n    var _state = _this4.state,\n        isOpen = _state.isOpen,\n        currentValue = _state.currentValue;\n\n    if (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n      return _react2.default.createElement(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        themePreset: themePreset,\n        theme: theme,\n        innerClassName: 'noSuggestion'\n      }, typeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion);\n    }\n\n    return null;\n  };\n\n  this.renderLoader = function () {\n    var _props9 = _this4.props,\n        loader = _props9.loader,\n        isLoading = _props9.isLoading,\n        themePreset = _props9.themePreset,\n        theme = _props9.theme,\n        innerClass = _props9.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (isLoading && loader && currentValue) {\n      return _react2.default.createElement(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'loader',\n        theme: theme,\n        themePreset: themePreset\n      }, loader);\n    }\n\n    return null;\n  };\n\n  this.renderError = function () {\n    var _props10 = _this4.props,\n        error = _props10.error,\n        renderError = _props10.renderError,\n        themePreset = _props10.themePreset,\n        theme = _props10.theme,\n        isLoading = _props10.isLoading,\n        innerClass = _props10.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (error && renderError && currentValue && !isLoading) {\n      return _react2.default.createElement(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'error',\n        theme: theme,\n        themePreset: themePreset\n      }, (0, _utils.isFunction)(renderError) ? renderError(error) : renderError);\n    }\n\n    return null;\n  };\n\n  this.getComponent = function () {\n    var downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _props11 = _this4.props,\n        error = _props11.error,\n        isLoading = _props11.isLoading,\n        aggregationData = _props11.aggregationData,\n        promotedResults = _props11.promotedResults;\n    var currentValue = _this4.state.currentValue;\n    var data = {\n      error: error,\n      loading: isLoading,\n      downshiftProps: downshiftProps,\n      data: _this4.parsedSuggestions,\n      promotedData: promotedResults,\n      aggregationData: aggregationData || [],\n      value: currentValue,\n      suggestions: _this4.state.suggestions,\n      rawSuggestions: _this4.props.suggestions || [],\n      categories: _this4.filteredCategories,\n      rawCategories: _this4.props.categories,\n      triggerClickAnalytics: _this4.triggerClickAnalytics,\n      resultStats: _this4.stats\n    };\n    return (0, _utils.getComponent)(data, _this4.props);\n  };\n\n  this.triggerClickAnalytics = function (searchPosition) {\n    // click analytics would only work client side and after javascript loads\n    _this4.props.triggerAnalytics(searchPosition);\n  };\n\n  this.withTriggerQuery = function (func) {\n    if (func) {\n      return function (e) {\n        return func(e, function () {\n          return _this4.triggerQuery(_this4.props.value);\n        });\n      };\n    }\n\n    return undefined;\n  };\n};\n\nCategorySearch.propTypes = {\n  addComponent: _types2.default.funcRequired,\n  removeComponent: _types2.default.funcRequired,\n  setQueryListener: _types2.default.funcRequired,\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  watchComponent: _types2.default.funcRequired,\n  setSuggestionsSearchValue: _types2.default.funcRequired,\n  options: _types2.default.options,\n  categories: _types2.default.data,\n  promotedResults: _types2.default.hits,\n  selectedValue: _types2.default.selectedValue,\n  selectedCategory: _types2.default.selectedValue,\n  suggestions: _types2.default.suggestions,\n  aggregationData: _types2.default.aggregationData,\n  setComponentProps: _types2.default.funcRequired,\n  updateComponentProps: _types2.default.funcRequired,\n  isLoading: _types2.default.bool,\n  config: _types2.default.props,\n  triggerAnalytics: _types2.default.funcRequired,\n  // eslint-disable-next-line\n  error: _types2.default.any,\n  // component props\n  autoFocus: _types2.default.bool,\n  autosuggest: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  categoryField: _types2.default.string,\n  className: _types2.default.string,\n  clearIcon: _types2.default.children,\n  componentId: _types2.default.stringRequired,\n  customHighlight: _types2.default.func,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  dataField: _types2.default.dataFieldArray,\n  aggregationField: _types2.default.string,\n  size: _types2.default.number,\n  debounce: _types2.default.number,\n  defaultValue: _types2.default.categorySearchValue,\n  value: _types2.default.categorySearchValue,\n  defaultSuggestions: _types2.default.suggestions,\n  downShiftProps: _types2.default.props,\n  fieldWeights: _types2.default.fieldWeights,\n  filterLabel: _types2.default.string,\n  fuzziness: _types2.default.fuzziness,\n  highlight: _types2.default.bool,\n  highlightField: _types2.default.stringOrArray,\n  icon: _types2.default.children,\n  iconPosition: _types2.default.iconPosition,\n  innerClass: _types2.default.style,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onError: _types2.default.func,\n  onBlur: _types2.default.func,\n  onFocus: _types2.default.func,\n  onKeyDown: _types2.default.func,\n  onKeyPress: _types2.default.func,\n  onKeyUp: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onSuggestions: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  onValueSelected: _types2.default.func,\n  placeholder: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  react: _types2.default.react,\n  renderError: _types2.default.title,\n  parseSuggestion: _types2.default.func,\n  renderNoSuggestion: _types2.default.title,\n  showClear: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  showVoiceSearch: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  theme: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  URLParams: _types2.default.bool,\n  strictSelection: _types2.default.bool,\n  searchOperators: _types2.default.bool,\n  // Mic props\n  getMicInstance: _types2.default.func,\n  renderMic: _types2.default.func\n};\nCategorySearch.defaultProps = {\n  autosuggest: true,\n  className: null,\n  debounce: 0,\n  downShiftProps: {},\n  iconPosition: 'left',\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showClear: false,\n  showFilter: true,\n  showIcon: true,\n  style: {},\n  URLParams: false,\n  strictSelection: false,\n  searchOperators: false,\n  showVoiceSearch: false,\n  size: 20\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    categories: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.categoryField] && state.aggregations[props.componentId][props.categoryField].buckets || [],\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    selectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n    suggestions: state.hits[props.componentId] && state.hits[props.componentId].hits || [],\n    aggregationData: state.compositeAggregations[props.componentId] || [],\n    themePreset: state.config.themePreset,\n    isLoading: state.isLoading[props.componentId],\n    error: state.error[props.componentId],\n    config: state.config,\n    promotedResults: state.promotedResults[props.componentId] || [],\n    time: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n      return dispatch((0, _actions.setSuggestionsSearchValue)(value));\n    },\n    setComponentProps: function setComponentProps(component, options) {\n      return dispatch((0, _actions.setComponentProps)(component, options));\n    },\n    updateComponentProps: function updateComponentProps(component, options) {\n      return dispatch((0, _actions.updateComponentProps)(component, options));\n    },\n    addComponent: function addComponent(component) {\n      return dispatch((0, _actions.addComponent)(component));\n    },\n    removeComponent: function removeComponent(component) {\n      return dispatch((0, _actions.removeComponent)(component));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    setQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n      return dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    watchComponent: function watchComponent(component, react) {\n      return dispatch((0, _actions.watchComponent)(component, react));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition) {\n      return dispatch((0, _actions.recordSuggestionClick)(searchPosition));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return _react2.default.createElement(CategorySearch, _extends({\n    ref: props.myForwardedRef\n  }, props));\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, CategorySearch);\nForwardRefComponent.name = 'CategorySearch';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["C:/Users/victoria/Documents/Project/simplePOS/frontend/node_modules/@appbaseio/reactivesearch/lib/components/search/CategorySearch.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_downshift","_downshift2","_emotionTheming","_hoistNonReactStatics","_hoistNonReactStatics2","_actions","_helper","_constants","_types","_types2","_causes","_causes2","_Title","_Title2","_Input","_Input2","_CancelSvg","_CancelSvg2","_SearchSvg","_SearchSvg2","_InputIcon","_InputIcon2","_Container","_Container2","_Mic","_Mic2","_utils","_SuggestionItem","_SuggestionItem2","_SuggestionWrapper","_SuggestionWrapper2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","Text","withTheme","createElement","className","style","color","primary","theme","colors","primaryColor","textColor","children","CategorySearch","_Component","_this","_initialiseProps","defaultValue","_value$term","term","currentValue","undefined","_value$category","category","currentCategory","selectedValue","selectedCategory","state","suggestions","isOpen","isPending","internalComponent","componentId","queryOptions","size","addComponent","setComponentProps","componentType","componentTypes","categorySearch","setQueryListener","onQueryChange","onError","highlight","highlightQuery","setQueryOptions","setReact","aggsQuery","getCombinedAggsQuery","hasMounted","cause","calcValue","onChange","triggerQuery","setValue","componentDidUpdate","prevProps","_this2","checkSomePropChange","getValidPropsKeys","updateComponentProps","isIdentical","defaultQuery","updateDefaultQuery","updateQuery","customQuery","checkPropChange","react","Array","isArray","trim","onSuggestions","setState","isEqual","_props$value","_props$value$category","_props","_currentValue","componentWillUnmount","removeComponent","render","_this3","_props2","themePreset","finalSuggestionsList","parsedSuggestions","title","getClassName","innerClass","defaultSuggestions","autosuggest","id","onSuggestionSelected","onStateChange","handleStateChange","itemToString","_ref","getInputProps","getItemProps","highlightedIndex","rest","suggestionsContainer","innerRef","c","_inputRef","showClear","showIcon","iconPosition","placeholder","onInputChange","onBlur","withTriggerQuery","onFocus","handleFocus","onKeyPress","onKeyDown","e","handleKeyDown","onKeyUp","renderIcons","renderLoader","renderError","hasCustomRenderer","getComponent","slice","map","item","index","backgroundColor","getBackgroundColor","suggestion","renderNoSuggestion","downShiftProps","autoFocus","get","getResultStats","categories","filter","Boolean","suggestionsList","filteredCategories","categorySuggestions","label","concat","withClickIds","Component","customHighlight","fields","highlightField","dataField","forEach","pre_tags","post_tags","require_field_match","finalQuery","searchOperators","simple_query_string","shouldQuery","bool","should","minimum_should_match","_term","categoryField","nestedField","nested","path","query","dataFields","field","fieldWeights","default_operator","queryFormat","multi_match","type","operator","fuzziness","_this4","getAggsQuery","_aggs","aggs","terms","_props3","aggregationField","compositeAggsQuery","getCompositeAggsQuery","newReact","pushToAndClause","watchComponent","and","searchResults","handleOnSuggestions","isDefaultValue","toggleIsOpen","performUpdate","strictSelection","SUGGESTION_SELECT","handleTextChange","onValueChange","checkValueChange","beforeValueChange","debounce","defaultQueryOptions","defaultQueryTobeSet","getOptionsFromQuery","setSuggestionsSearchValue","filterLabel","showFilter","URLParams","customQueryOptions","customQueryTobeSet","event","clearValue","onValueSelected","CLEAR_VALUE","_props4","ENTER_PRESS","inputValue","_props5","handleCaretPosition","_value$category2","_props6","triggerClickAnalytics","_click_id","changes","stateChangeTypes","mouseUp","isDark","handleSearchIconClick","handleVoiceResults","_ref2","results","isFinal","transcript","focus","renderIcon","icon","renderCancelIcon","clearIcon","_props7","renderMic","getMicInstance","showVoiceSearch","onClick","isClearIcon","getInstance","onResult","applyClearStyle","_props8","isLoading","error","_state","innerClassName","_props9","loader","_props10","isFunction","downshiftProps","_props11","aggregationData","promotedResults","data","loading","promotedData","rawSuggestions","rawCategories","resultStats","stats","searchPosition","triggerAnalytics","func","propTypes","funcRequired","options","hits","config","any","string","stringRequired","dataFieldArray","number","categorySearchValue","stringOrArray","queryFormatSearch","parseSuggestion","defaultProps","mapStateToProps","aggregations","buckets","selectedValues","compositeAggregations","time","total","hidden","mapDispatchtoProps","dispatch","component","execute","beforeQueryChange","updateQueryObject","recordSuggestionClick","ConnectedComponent","connect","ref","myForwardedRef","ForwardRefComponent","forwardRef","name"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _InputIcon = require('../../styles/InputIcon');\n\nvar _InputIcon2 = _interopRequireDefault(_InputIcon);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Text = (0, _emotionTheming.withTheme)(function (props) {\n\treturn _react2.default.createElement(\n\t\t'span',\n\t\t{\n\t\t\tclassName: 'trim',\n\t\t\tstyle: {\n\t\t\t\tcolor: props.primary ? props.theme.colors.primaryColor : props.theme.colors.textColor\n\t\t\t}\n\t\t},\n\t\tprops.children\n\t);\n});\n\nvar CategorySearch = function (_Component) {\n\t_inherits(CategorySearch, _Component);\n\n\tfunction CategorySearch(props) {\n\t\t_classCallCheck(this, CategorySearch);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar value = props.value || props.defaultValue || {};\n\t\t// eslint-disable-next-line\n\t\tvar _value$term = value.term,\n\t\t    currentValue = _value$term === undefined ? '' : _value$term,\n\t\t    _value$category = value.category,\n\t\t    currentCategory = _value$category === undefined ? null : _value$category;\n\t\t// add preference to selected-X value from URL/SSR\n\n\t\tcurrentValue = props.selectedValue || currentValue;\n\t\tcurrentCategory = props.selectedCategory || currentCategory;\n\n\t\t_this.state = {\n\t\t\tcurrentValue: currentValue,\n\t\t\tcurrentCategory: currentCategory,\n\t\t\tsuggestions: [],\n\t\t\tisOpen: false\n\t\t};\n\t\t/**\n   * To regulate the query execution based on the input handler,\n   * the component query will only get executed when it sets to `true`.\n   * */\n\t\t_this.isPending = false;\n\n\t\t_this.internalComponent = props.componentId + '__internal';\n\t\t_this.queryOptions = {\n\t\t\tsize: props.size\n\t\t};\n\t\tprops.addComponent(props.componentId);\n\t\tprops.addComponent(_this.internalComponent);\n\t\tprops.setComponentProps(props.componentId, _extends({}, props, {\n\t\t\tcomponentType: _constants.componentTypes.categorySearch\n\t\t}));\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, props.onError);\n\n\t\tif (props.highlight) {\n\t\t\tvar queryOptions = CategorySearch.highlightQuery(props) || {};\n\t\t\tqueryOptions.size = props.size;\n\t\t\t_this.queryOptions = queryOptions;\n\t\t\tprops.setQueryOptions(props.componentId, queryOptions);\n\t\t} else {\n\t\t\tprops.setQueryOptions(props.componentId, _this.queryOptions);\n\t\t}\n\n\t\t_this.setReact(props);\n\t\tvar aggsQuery = _this.getCombinedAggsQuery();\n\t\tprops.setQueryOptions(_this.internalComponent, aggsQuery, false);\n\t\tvar hasMounted = false;\n\t\tvar cause = null;\n\n\t\tif (currentValue) {\n\t\t\tvar calcValue = {\n\t\t\t\tterm: currentValue,\n\t\t\t\tcategory: currentCategory\n\t\t\t};\n\t\t\tif (props.onChange) {\n\t\t\t\tprops.onChange(calcValue, function () {\n\t\t\t\t\treturn _this.triggerQuery(calcValue);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_this.setValue(currentValue, true, props, currentCategory, cause, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tCategorySearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n\t\t\t_this2.props.updateComponentProps(_this2.props.componentId, _this2.props);\n\t\t});\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField'], function () {\n\t\t\tvar queryOptions = CategorySearch.highlightQuery(_this2.props) || {};\n\t\t\tqueryOptions.size = _this2.props.size;\n\t\t\t_this2.queryOptions = queryOptions;\n\t\t\t_this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n\t\t});\n\n\t\t// Treat defaultQuery and customQuery as reactive props\n\t\tif (!(0, _utils.isIdentical)(this.props.defaultQuery, prevProps.defaultQuery)) {\n\t\t\tthis.updateDefaultQuery(this.state.currentValue, this.props);\n\t\t\tthis.updateQuery(this.state.currentValue, this.props);\n\t\t}\n\n\t\tif (!(0, _utils.isIdentical)(this.props.customQuery, prevProps.customQuery)) {\n\t\t\tthis.updateQuery(this.state.currentValue, this.props);\n\t\t}\n\n\t\t(0, _helper.checkPropChange)(this.props.react, prevProps.react, function () {\n\t\t\treturn _this2.setReact(_this2.props);\n\t\t});\n\n\t\tif (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n\t\t\t// shallow check allows us to set suggestions even if the next set\n\t\t\t// of suggestions are same as the current one\n\n\t\t\tif (this.props.suggestions !== prevProps.suggestions) {\n\t\t\t\tif (this.props.onSuggestions) {\n\t\t\t\t\tthis.props.onSuggestions(this.props.suggestions);\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.setState({\n\t\t\t\t\tsuggestions: this.onSuggestions(this.props.suggestions)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'categoryField', 'nestedField', 'searchOperators'], function () {\n\t\t\t_this2.updateQuery(_this2.state.currentValue, _this2.props);\n\t\t});\n\n\t\tif (!(0, _helper.isEqual)(this.props.value, prevProps.value)) {\n\t\t\tvar _props$value = this.props.value,\n\t\t\t    currentValue = _props$value.term,\n\t\t\t    _props$value$category = _props$value.category,\n\t\t\t    currentCategory = _props$value$category === undefined ? null : _props$value$category;\n\n\t\t\tthis.setValue(currentValue, true, this.props, currentCategory, undefined, undefined, false);\n\t\t} else if (\n\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t// we must only check for the changes introduced by\n\t\t// clear action from SelectedFilters component in which case,\n\t\t// the currentValue will never match the updated selectedValue\n\t\tthis.props.selectedValue !== prevProps.selectedValue && this.state.currentValue !== this.props.selectedValue) {\n\t\t\tvar _props = this.props,\n\t\t\t    value = _props.value,\n\t\t\t    onChange = _props.onChange;\n\n\t\t\tif (value === undefined) {\n\t\t\t\tthis.setValue(this.props.selectedValue || '', true, this.props, this.props.selectedCategory);\n\t\t\t} else if (onChange) {\n\t\t\t\tvar _currentValue = {\n\t\t\t\t\tterm: this.props.selectedValue || '',\n\t\t\t\t\tcategory: this.props.selectedCategory || null\n\t\t\t\t};\n\t\t\t\t// value prop exists\n\t\t\t\tonChange(_currentValue, function () {\n\t\t\t\t\treturn _this2.triggerQuery(_currentValue);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// value prop exists and onChange is not defined:\n\t\t\t\t// we need to put the current value back into the store\n\t\t\t\t// if the clear action was triggered by interacting with\n\t\t\t\t// selected-filters component\n\t\t\t\tthis.isPending = false;\n\t\t\t\tthis.setValue(this.state.currentValue, true, this.props, this.state.currentCategory);\n\t\t\t}\n\t\t}\n\t};\n\n\tCategorySearch.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t\tthis.props.removeComponent(this.internalComponent);\n\t};\n\n\tCategorySearch.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\tvar currentValue = this.state.currentValue;\n\t\tvar _props2 = this.props,\n\t\t    theme = _props2.theme,\n\t\t    themePreset = _props2.themePreset;\n\n\t\tvar finalSuggestionsList = this.parsedSuggestions;\n\t\treturn _react2.default.createElement(\n\t\t\t_Container2.default,\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && _react2.default.createElement(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.props.defaultSuggestions || this.props.autosuggest ? _react2.default.createElement(_downshift2.default, _extends({\n\t\t\t\tid: this.props.componentId + '-downshift',\n\t\t\t\tonChange: this.onSuggestionSelected,\n\t\t\t\tonStateChange: this.handleStateChange,\n\t\t\t\tisOpen: this.state.isOpen,\n\t\t\t\titemToString: function itemToString(i) {\n\t\t\t\t\treturn i;\n\t\t\t\t},\n\t\t\t\trender: function render(_ref) {\n\t\t\t\t\tvar getInputProps = _ref.getInputProps,\n\t\t\t\t\t    getItemProps = _ref.getItemProps,\n\t\t\t\t\t    isOpen = _ref.isOpen,\n\t\t\t\t\t    highlightedIndex = _ref.highlightedIndex,\n\t\t\t\t\t    rest = _objectWithoutProperties(_ref, ['getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex']);\n\n\t\t\t\t\treturn _react2.default.createElement(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: _Input.suggestionsContainer },\n\t\t\t\t\t\t_react2.default.createElement(_Input2.default, _extends({\n\t\t\t\t\t\t\tinnerRef: function innerRef(c) {\n\t\t\t\t\t\t\t\t_this3._inputRef = c;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'aria-label': _this3.props.componentId,\n\t\t\t\t\t\t\tshowClear: _this3.props.showClear,\n\t\t\t\t\t\t\tid: _this3.props.componentId + '-input',\n\t\t\t\t\t\t\tshowIcon: _this3.props.showIcon,\n\t\t\t\t\t\t\ticonPosition: _this3.props.iconPosition\n\t\t\t\t\t\t}, getInputProps({\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n\t\t\t\t\t\t\tplaceholder: _this3.props.placeholder,\n\t\t\t\t\t\t\tvalue: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n\t\t\t\t\t\t\tonChange: _this3.onInputChange,\n\t\t\t\t\t\t\tonBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n\t\t\t\t\t\t\tonFocus: _this3.handleFocus,\n\t\t\t\t\t\t\tonKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n\t\t\t\t\t\t\tonKeyDown: function onKeyDown(e) {\n\t\t\t\t\t\t\t\treturn _this3.handleKeyDown(e, highlightedIndex);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp)\n\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t\t\t})),\n\t\t\t\t\t\t_this3.renderIcons(),\n\t\t\t\t\t\t_this3.renderLoader(),\n\t\t\t\t\t\t_this3.renderError(),\n\t\t\t\t\t\t_this3.hasCustomRenderer && _this3.getComponent(_extends({\n\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\thighlightedIndex: highlightedIndex\n\t\t\t\t\t\t}, rest)),\n\t\t\t\t\t\t!_this3.hasCustomRenderer && isOpen && finalSuggestionsList.length ? _react2.default.createElement(\n\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: (0, _Input.suggestions)(themePreset, theme) + ' ' + (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfinalSuggestionsList.slice(0, 10).map(function (item, index) {\n\t\t\t\t\t\t\t\treturn _react2.default.createElement(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: item }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + item.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\t\t\tText,\n\t\t\t\t\t\t\t\t\t\t{ primary: !!item.category },\n\t\t\t\t\t\t\t\t\t\t_react2.default.createElement(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: item\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) : _this3.renderNoSuggestion(finalSuggestionsList)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, this.props.downShiftProps)) : _react2.default.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: _Input.suggestionsContainer },\n\t\t\t\t_react2.default.createElement(_Input2.default, {\n\t\t\t\t\tinnerRef: function innerRef(c) {\n\t\t\t\t\t\t_this3._inputRef = c;\n\t\t\t\t\t},\n\t\t\t\t\t'aria-label': this.props.componentId,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'input'),\n\t\t\t\t\tplaceholder: this.props.placeholder,\n\t\t\t\t\tvalue: this.state.currentValue ? this.state.currentValue : '',\n\t\t\t\t\tonChange: this.onInputChange,\n\t\t\t\t\tonBlur: this.withTriggerQuery(this.props.onBlur),\n\t\t\t\t\tonFocus: this.withTriggerQuery(this.props.onFocus),\n\t\t\t\t\tonKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n\t\t\t\t\tonKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n\t\t\t\t\tonKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n\t\t\t\t\tautoFocus: this.props.autoFocus,\n\t\t\t\t\ticonPosition: this.props.iconPosition,\n\t\t\t\t\tshowClear: this.props.showClear,\n\t\t\t\t\tshowIcon: this.props.showIcon,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t}),\n\t\t\t\tthis.renderIcons()\n\t\t\t)\n\t\t);\n\t};\n\n\t_createClass(CategorySearch, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\treturn (0, _helper.getResultStats)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'filteredCategories',\n\t\tget: function get() {\n\t\t\tvar categories = this.props.categories;\n\n\t\t\treturn categories.filter(function (category) {\n\t\t\t\treturn Boolean(category.key);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'parsedSuggestions',\n\t\tget: function get() {\n\t\t\tvar finalSuggestionsList = [];\n\t\t\tvar suggestionsList = [];\n\n\t\t\t// filter out empty categories\n\t\t\tvar filteredCategories = this.filteredCategories;\n\n\t\t\tif (!this.state.currentValue && this.props.defaultSuggestions && this.props.defaultSuggestions.length) {\n\t\t\t\tfinalSuggestionsList = this.props.defaultSuggestions;\n\t\t\t} else if (this.state.currentValue) {\n\t\t\t\tsuggestionsList = this.state.suggestions;\n\t\t\t}\n\n\t\t\tif (this.state.currentValue && this.state.suggestions.length && filteredCategories.length) {\n\t\t\t\tvar categorySuggestions = [{\n\t\t\t\t\tlabel: this.state.currentValue + ' in all categories',\n\t\t\t\t\tvalue: this.state.currentValue,\n\t\t\t\t\tcategory: '*',\n\t\t\t\t\t// no source object exists for category based suggestions\n\t\t\t\t\tsource: null\n\t\t\t\t}, {\n\t\t\t\t\tlabel: this.state.currentValue + ' in ' + filteredCategories[0].key,\n\t\t\t\t\tvalue: this.state.currentValue,\n\t\t\t\t\tcategory: filteredCategories[0].key,\n\t\t\t\t\tsource: null\n\t\t\t\t}];\n\n\t\t\t\tif (filteredCategories.length > 1) {\n\t\t\t\t\tcategorySuggestions = [].concat(categorySuggestions, [{\n\t\t\t\t\t\tlabel: this.state.currentValue + ' in ' + filteredCategories[1].key,\n\t\t\t\t\t\tvalue: this.state.currentValue,\n\t\t\t\t\t\tcategory: filteredCategories[1].key,\n\t\t\t\t\t\tsource: null\n\t\t\t\t\t}]);\n\t\t\t\t}\n\t\t\t\tfinalSuggestionsList = [].concat(categorySuggestions, suggestionsList);\n\t\t\t}\n\t\t\treturn (0, _helper.withClickIds)(finalSuggestionsList);\n\t\t}\n\t}]);\n\n\treturn CategorySearch;\n}(_react.Component);\n\nCategorySearch.highlightQuery = function (props) {\n\tif (props.customHighlight) {\n\t\treturn props.customHighlight(props);\n\t}\n\tif (!props.highlight) {\n\t\treturn null;\n\t}\n\tvar fields = {};\n\tvar highlightField = props.highlightField ? props.highlightField : props.dataField;\n\n\tif (typeof highlightField === 'string') {\n\t\tfields[highlightField] = {};\n\t} else if (Array.isArray(highlightField)) {\n\t\thighlightField.forEach(function (item) {\n\t\t\tfields[item] = {};\n\t\t});\n\t}\n\n\treturn {\n\t\thighlight: _extends({\n\t\t\tpre_tags: ['<mark>'],\n\t\t\tpost_tags: ['</mark>'],\n\t\t\tfields: fields\n\t\t}, props.highlightField && { require_field_match: false })\n\t};\n};\n\nCategorySearch.defaultQuery = function (value, props, category) {\n\tvar finalQuery = null;\n\tvar fields = void 0;\n\n\tif (value) {\n\t\tif (Array.isArray(props.dataField)) {\n\t\t\tfields = props.dataField;\n\t\t} else {\n\t\t\tfields = [props.dataField];\n\t\t}\n\t\tif (props.searchOperators) {\n\t\t\tfinalQuery = {\n\t\t\t\tsimple_query_string: CategorySearch.shouldQuery(value, fields, props)\n\t\t\t};\n\t\t} else {\n\t\t\tfinalQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tshould: CategorySearch.shouldQuery(value, fields, props),\n\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (category && category !== '*') {\n\t\t\tvar _term;\n\n\t\t\tfinalQuery = [finalQuery, {\n\t\t\t\tterm: (_term = {}, _term[props.categoryField] = category, _term)\n\t\t\t}];\n\t\t}\n\t}\n\n\tif (value === '') {\n\t\tfinalQuery = null;\n\t}\n\n\tif (finalQuery && props.nestedField) {\n\t\tfinalQuery = {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: finalQuery\n\t\t\t}\n\t\t};\n\t}\n\n\treturn finalQuery;\n};\n\nCategorySearch.shouldQuery = function (value, dataFields, props) {\n\tvar fields = dataFields.map(function (field, index) {\n\t\treturn '' + field + (Array.isArray(props.fieldWeights) && props.fieldWeights[index] ? '^' + props.fieldWeights[index] : '');\n\t});\n\n\tif (props.searchOperators) {\n\t\treturn {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\tdefault_operator: props.queryFormat\n\t\t};\n\t}\n\n\tif (props.queryFormat === 'and') {\n\t\treturn [{\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'cross_fields',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t}, {\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t}];\n\t}\n\n\treturn [{\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'best_fields',\n\t\t\toperator: 'or',\n\t\t\tfuzziness: props.fuzziness ? props.fuzziness : 0\n\t\t}\n\t}, {\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'phrase_prefix',\n\t\t\toperator: 'or'\n\t\t}\n\t}];\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this4 = this;\n\n\tthis.getAggsQuery = function (field) {\n\t\tvar _aggs;\n\n\t\treturn {\n\t\t\taggs: (_aggs = {}, _aggs[field] = {\n\t\t\t\tterms: {\n\t\t\t\t\tfield: field\n\t\t\t\t}\n\t\t\t}, _aggs)\n\t\t};\n\t};\n\n\tthis.getCombinedAggsQuery = function () {\n\t\tvar _props3 = _this4.props,\n\t\t    categoryField = _props3.categoryField,\n\t\t    aggregationField = _props3.aggregationField;\n\n\t\tvar aggsQuery = _this4.getAggsQuery(categoryField);\n\t\tif (aggregationField) {\n\t\t\tvar compositeAggsQuery = (0, _helper.getCompositeAggsQuery)({}, _this4.props, null, true);\n\t\t\taggsQuery.aggs = _extends({}, aggsQuery.aggs, compositeAggsQuery.aggs);\n\t\t}\n\t\treturn aggsQuery;\n\t};\n\n\tthis.setReact = function (props) {\n\t\tvar react = props.react;\n\n\t\tif (react) {\n\t\t\tvar newReact = (0, _helper.pushToAndClause)(react, _this4.internalComponent);\n\t\t\tprops.watchComponent(props.componentId, newReact);\n\t\t} else {\n\t\t\tprops.watchComponent(props.componentId, {\n\t\t\t\tand: _this4.internalComponent\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.onSuggestions = function (searchResults) {\n\t\treturn (0, _helper.handleOnSuggestions)(searchResults, _this4.state.currentValue, _this4.props);\n\t};\n\n\tthis.setValue = function (value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n\t\tvar category = arguments[3];\n\t\tvar cause = arguments[4];\n\t\tvar hasMounted = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\t\tvar toggleIsOpen = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tif (hasMounted) {\n\t\t\t\t_this4.setState({\n\t\t\t\t\tcurrentValue: value || '',\n\t\t\t\t\tcurrentCategory: category || null,\n\t\t\t\t\tsuggestions: []\n\t\t\t\t}, function () {\n\t\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\t\tif (_this4.props.autosuggest) {\n\t\t\t\t\t\t\tif (toggleIsOpen) {\n\t\t\t\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_this4.updateDefaultQuery(value, props);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// in case of strict selection only SUGGESTION_SELECT should be able\n\t\t\t\t\t\t// to set the query otherwise the value should reset\n\t\t\t\t\t\tif (props.strictSelection) {\n\t\t\t\t\t\t\tif (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n\t\t\t\t\t\t\t\t_this4.updateQuery(value, props, category);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this4.setValue('', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this4.updateQuery(value, props, category);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\t\t_this4.handleTextChange(value);\n\t\t\t\t\t}\n\t\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t_this4.updateDefaultQuery(value, props);\n\t\t\t\t_this4.updateQuery(value, props, category);\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.handleTextChange = (0, _helper.debounce)(function (value) {\n\t\tif (_this4.props.autosuggest) {\n\t\t\t_this4.updateDefaultQuery(value, _this4.props);\n\t\t} else {\n\t\t\t_this4.updateQuery(value, _this4.props);\n\t\t}\n\t}, this.props.debounce);\n\n\tthis.updateDefaultQuery = function (value, props) {\n\t\tvar category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n\t\tvar defaultQuery = props.defaultQuery;\n\n\t\tvar defaultQueryOptions = void 0;\n\t\tvar query = CategorySearch.defaultQuery(value, props, category);\n\t\tif (defaultQuery) {\n\t\t\tvar defaultQueryTobeSet = defaultQuery(value, props, category) || {};\n\t\t\tif (defaultQueryTobeSet.query) {\n\t\t\t\tquery = defaultQueryTobeSet.query;\n\t\t\t}\n\t\t\tdefaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet);\n\t\t}\n\t\tprops.setSuggestionsSearchValue(value);\n\t\tvar aggsQuery = _this4.getCombinedAggsQuery();\n\t\tprops.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, aggsQuery, defaultQueryOptions));\n\t\tprops.updateQuery({\n\t\t\tcomponentId: _this4.internalComponent,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tcategory: category,\n\t\t\tcomponentType: _constants.componentTypes.categorySearch\n\t\t});\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n\t\tvar customQuery = props.customQuery,\n\t\t    filterLabel = props.filterLabel,\n\t\t    showFilter = props.showFilter,\n\t\t    URLParams = props.URLParams;\n\n\n\t\tvar customQueryOptions = void 0;\n\t\tvar query = CategorySearch.defaultQuery(value, props, category);\n\t\tif (customQuery) {\n\t\t\tvar customQueryTobeSet = customQuery(value, props, category) || {};\n\t\t\tif (customQueryTobeSet.query) {\n\t\t\t\tquery = customQueryTobeSet.query;\n\t\t\t}\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n\t\t}\n\n\t\t// query options should be applied to the source component,\n\t\t// not on internal component, hence using `this.props.componentId` here\n\t\tprops.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions));\n\t\tif (!_this4.isPending) {\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query,\n\t\t\t\tvalue: value,\n\t\t\t\tlabel: filterLabel,\n\t\t\t\tshowFilter: showFilter,\n\t\t\t\tURLParams: URLParams,\n\t\t\t\tcomponentType: _constants.componentTypes.categorySearch,\n\t\t\t\tcategory: category\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleFocus = function (event) {\n\t\t_this4.setState({\n\t\t\tisOpen: true\n\t\t});\n\t\tif (_this4.props.onFocus) {\n\t\t\t_this4.props.onFocus(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.clearValue = function () {\n\t\t_this4.isPending = false;\n\t\t_this4.setValue('', true);\n\t\t_this4.onValueSelected(null, _causes2.default.CLEAR_VALUE, null);\n\t};\n\n\tthis.handleKeyDown = function (event, highlightedIndex) {\n\t\tvar _props4 = _this4.props,\n\t\t    value = _props4.value,\n\t\t    onChange = _props4.onChange;\n\n\t\tif (value !== undefined && onChange) {\n\t\t\t_this4.isPending = true;\n\t\t}\n\t\t// if a suggestion was selected, delegate the handling to suggestion handler\n\t\tif (event.key === 'Enter' && highlightedIndex === null) {\n\t\t\t_this4.setValue(event.target.value, true);\n\t\t\tvar currentValue = {\n\t\t\t\tterm: event.target.value,\n\t\t\t\tcategory: null\n\t\t\t};\n\t\t\t_this4.onValueSelected(currentValue, _causes2.default.ENTER_PRESS);\n\t\t}\n\t\tif (_this4.props.onKeyDown) {\n\t\t\t_this4.props.onKeyDown(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.onInputChange = function (e) {\n\t\tvar inputValue = e.target.value;\n\n\t\tif (!_this4.state.isOpen) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: true\n\t\t\t});\n\t\t}\n\n\t\tvar _props5 = _this4.props,\n\t\t    value = _props5.value,\n\t\t    onChange = _props5.onChange;\n\n\t\tif (value === undefined) {\n\t\t\t_this4.setValue(inputValue);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = true;\n\t\t\tvar currentValue = {\n\t\t\t\tterm: inputValue\n\t\t\t\t// category: null,\n\t\t\t};\n\t\t\t// handle caret position in controlled components\n\t\t\t(0, _utils.handleCaretPosition)(e);\n\t\t\tonChange(currentValue, function () {\n\t\t\t\treturn _this4.triggerQuery(currentValue);\n\t\t\t}, e);\n\t\t} else {\n\t\t\t_this4.setValue(inputValue);\n\t\t}\n\t};\n\n\tthis.triggerQuery = function (value) {\n\t\tvar currentValue = value.term,\n\t\t    _value$category2 = value.category,\n\t\t    currentCategory = _value$category2 === undefined ? null : _value$category2;\n\n\t\t_this4.isPending = false;\n\t\t_this4.setValue(currentValue, true, _this4.props, currentCategory);\n\t};\n\n\tthis.onSuggestionSelected = function (suggestion) {\n\t\tvar _props6 = _this4.props,\n\t\t    value = _props6.value,\n\t\t    onChange = _props6.onChange;\n\n\t\tvar currentValue = {\n\t\t\tterm: suggestion.value,\n\t\t\tcategory: suggestion.category || null\n\t\t};\n\t\t_this4.setState({\n\t\t\tisOpen: false\n\t\t});\n\t\tif (value === undefined) {\n\t\t\t_this4.setValue(currentValue.term, true, _this4.props, currentValue.category, _causes2.default.SUGGESTION_SELECT);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = false;\n\t\t\tonChange(currentValue, function () {\n\t\t\t\treturn _this4.triggerQuery(currentValue);\n\t\t\t});\n\t\t}\n\t\t// Record analytics for selected suggestions\n\t\t_this4.triggerClickAnalytics(suggestion._click_id);\n\t\t// onValueSelected is user interaction driven:\n\t\t// it should be triggered irrespective of controlled (or)\n\t\t// uncontrolled component behavior\n\t\t_this4.onValueSelected(currentValue, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n\t};\n\n\tthis.onValueSelected = function (selectedValue, cause, source) {\n\t\tvar onValueSelected = _this4.props.onValueSelected;\n\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected(selectedValue, cause, source);\n\t\t}\n\t};\n\n\tthis.handleStateChange = function (changes) {\n\t\tvar isOpen = changes.isOpen,\n\t\t    type = changes.type;\n\n\t\tif (type === _downshift2.default.stateChangeTypes.mouseUp) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: isOpen\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.getBackgroundColor = function (highlightedIndex, index) {\n\t\tvar isDark = _this4.props.themePreset === 'dark';\n\t\tif (isDark) {\n\t\t\treturn highlightedIndex === index ? '#555' : '#424242';\n\t\t}\n\t\treturn highlightedIndex === index ? '#eee' : '#fff';\n\t};\n\n\tthis.handleSearchIconClick = function () {\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (currentValue.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(currentValue, true);\n\t\t}\n\t};\n\n\tthis.handleVoiceResults = function (_ref2) {\n\t\tvar results = _ref2.results;\n\n\t\tif (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(results[0][0].transcript.trim(), true);\n\t\t\tif (_this4.props.autosuggest) {\n\t\t\t\t_this4._inputRef.focus();\n\t\t\t\t_this4.setState({\n\t\t\t\t\tisOpen: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.renderIcon = function () {\n\t\tif (_this4.props.showIcon) {\n\t\t\treturn _this4.props.icon || _react2.default.createElement(_SearchSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderCancelIcon = function () {\n\t\tif (_this4.props.showClear) {\n\t\t\treturn _this4.props.clearIcon || _react2.default.createElement(_CancelSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderIcons = function () {\n\t\tvar currentValue = _this4.state.currentValue;\n\t\tvar _props7 = _this4.props,\n\t\t    showIcon = _props7.showIcon,\n\t\t    showClear = _props7.showClear,\n\t\t    renderMic = _props7.renderMic,\n\t\t    getMicInstance = _props7.getMicInstance,\n\t\t    showVoiceSearch = _props7.showVoiceSearch,\n\t\t    iconPosition = _props7.iconPosition,\n\t\t    innerClass = _props7.innerClass;\n\n\t\treturn _react2.default.createElement(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\t_this4.state.currentValue && showClear && _react2.default.createElement(\n\t\t\t\t_InputIcon2.default,\n\t\t\t\t{\n\t\t\t\t\tonClick: _this4.clearValue,\n\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\tclearIcon: iconPosition === 'right',\n\t\t\t\t\tshowIcon: showIcon,\n\t\t\t\t\tisClearIcon: true\n\t\t\t\t},\n\t\t\t\t_this4.renderCancelIcon()\n\t\t\t),\n\t\t\tshowVoiceSearch && _react2.default.createElement(_Mic2.default, {\n\t\t\t\tgetInstance: getMicInstance,\n\t\t\t\trender: renderMic,\n\t\t\t\ticonPosition: iconPosition,\n\t\t\t\tonResult: _this4.handleVoiceResults,\n\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'mic') || null,\n\t\t\t\tapplyClearStyle: !!currentValue && showClear,\n\t\t\t\tshowIcon: showIcon\n\t\t\t}),\n\t\t\t_react2.default.createElement(\n\t\t\t\t_InputIcon2.default,\n\t\t\t\t{\n\t\t\t\t\tonClick: _this4.handleSearchIconClick,\n\t\t\t\t\ticonPosition: iconPosition,\n\t\t\t\t\tshowIcon: showIcon\n\t\t\t\t},\n\t\t\t\t_this4.renderIcon()\n\t\t\t)\n\t\t);\n\t};\n\n\tthis.renderNoSuggestion = function () {\n\t\tvar finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\tvar _props8 = _this4.props,\n\t\t    themePreset = _props8.themePreset,\n\t\t    theme = _props8.theme,\n\t\t    isLoading = _props8.isLoading,\n\t\t    renderNoSuggestion = _props8.renderNoSuggestion,\n\t\t    innerClass = _props8.innerClass,\n\t\t    renderError = _props8.renderError,\n\t\t    error = _props8.error;\n\t\tvar _state = _this4.state,\n\t\t    isOpen = _state.isOpen,\n\t\t    currentValue = _state.currentValue;\n\n\t\tif (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tinnerClassName: 'noSuggestion'\n\t\t\t\t},\n\t\t\t\ttypeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderLoader = function () {\n\t\tvar _props9 = _this4.props,\n\t\t    loader = _props9.loader,\n\t\t    isLoading = _props9.isLoading,\n\t\t    themePreset = _props9.themePreset,\n\t\t    theme = _props9.theme,\n\t\t    innerClass = _props9.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (isLoading && loader && currentValue) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'loader',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\tloader\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderError = function () {\n\t\tvar _props10 = _this4.props,\n\t\t    error = _props10.error,\n\t\t    renderError = _props10.renderError,\n\t\t    themePreset = _props10.themePreset,\n\t\t    theme = _props10.theme,\n\t\t    isLoading = _props10.isLoading,\n\t\t    innerClass = _props10.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (error && renderError && currentValue && !isLoading) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'error',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\t(0, _utils.isFunction)(renderError) ? renderError(error) : renderError\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.getComponent = function () {\n\t\tvar downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar _props11 = _this4.props,\n\t\t    error = _props11.error,\n\t\t    isLoading = _props11.isLoading,\n\t\t    aggregationData = _props11.aggregationData,\n\t\t    promotedResults = _props11.promotedResults;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tvar data = {\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tdownshiftProps: downshiftProps,\n\t\t\tdata: _this4.parsedSuggestions,\n\t\t\tpromotedData: promotedResults,\n\t\t\taggregationData: aggregationData || [],\n\t\t\tvalue: currentValue,\n\t\t\tsuggestions: _this4.state.suggestions,\n\t\t\trawSuggestions: _this4.props.suggestions || [],\n\t\t\tcategories: _this4.filteredCategories,\n\t\t\trawCategories: _this4.props.categories,\n\t\t\ttriggerClickAnalytics: _this4.triggerClickAnalytics,\n\t\t\tresultStats: _this4.stats\n\t\t};\n\t\treturn (0, _utils.getComponent)(data, _this4.props);\n\t};\n\n\tthis.triggerClickAnalytics = function (searchPosition) {\n\t\t// click analytics would only work client side and after javascript loads\n\t\t_this4.props.triggerAnalytics(searchPosition);\n\t};\n\n\tthis.withTriggerQuery = function (func) {\n\t\tif (func) {\n\t\t\treturn function (e) {\n\t\t\t\treturn func(e, function () {\n\t\t\t\t\treturn _this4.triggerQuery(_this4.props.value);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t};\n};\n\nCategorySearch.propTypes = {\n\taddComponent: _types2.default.funcRequired,\n\tremoveComponent: _types2.default.funcRequired,\n\tsetQueryListener: _types2.default.funcRequired,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\twatchComponent: _types2.default.funcRequired,\n\tsetSuggestionsSearchValue: _types2.default.funcRequired,\n\toptions: _types2.default.options,\n\tcategories: _types2.default.data,\n\tpromotedResults: _types2.default.hits,\n\tselectedValue: _types2.default.selectedValue,\n\tselectedCategory: _types2.default.selectedValue,\n\tsuggestions: _types2.default.suggestions,\n\taggregationData: _types2.default.aggregationData,\n\tsetComponentProps: _types2.default.funcRequired,\n\tupdateComponentProps: _types2.default.funcRequired,\n\tisLoading: _types2.default.bool,\n\tconfig: _types2.default.props,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\t// eslint-disable-next-line\n\terror: _types2.default.any,\n\t// component props\n\tautoFocus: _types2.default.bool,\n\tautosuggest: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tcategoryField: _types2.default.string,\n\tclassName: _types2.default.string,\n\tclearIcon: _types2.default.children,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomHighlight: _types2.default.func,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdataField: _types2.default.dataFieldArray,\n\taggregationField: _types2.default.string,\n\tsize: _types2.default.number,\n\tdebounce: _types2.default.number,\n\tdefaultValue: _types2.default.categorySearchValue,\n\tvalue: _types2.default.categorySearchValue,\n\tdefaultSuggestions: _types2.default.suggestions,\n\tdownShiftProps: _types2.default.props,\n\tfieldWeights: _types2.default.fieldWeights,\n\tfilterLabel: _types2.default.string,\n\tfuzziness: _types2.default.fuzziness,\n\thighlight: _types2.default.bool,\n\thighlightField: _types2.default.stringOrArray,\n\ticon: _types2.default.children,\n\ticonPosition: _types2.default.iconPosition,\n\tinnerClass: _types2.default.style,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonError: _types2.default.func,\n\tonBlur: _types2.default.func,\n\tonFocus: _types2.default.func,\n\tonKeyDown: _types2.default.func,\n\tonKeyPress: _types2.default.func,\n\tonKeyUp: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonSuggestions: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tonValueSelected: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\treact: _types2.default.react,\n\trenderError: _types2.default.title,\n\tparseSuggestion: _types2.default.func,\n\trenderNoSuggestion: _types2.default.title,\n\tshowClear: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tshowVoiceSearch: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\ttheme: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\tURLParams: _types2.default.bool,\n\tstrictSelection: _types2.default.bool,\n\tsearchOperators: _types2.default.bool,\n\t// Mic props\n\tgetMicInstance: _types2.default.func,\n\trenderMic: _types2.default.func\n};\n\nCategorySearch.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 0,\n\tdownShiftProps: {},\n\ticonPosition: 'left',\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowClear: false,\n\tshowFilter: true,\n\tshowIcon: true,\n\tstyle: {},\n\tURLParams: false,\n\tstrictSelection: false,\n\tsearchOperators: false,\n\tshowVoiceSearch: false,\n\tsize: 20\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tcategories: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.categoryField] && state.aggregations[props.componentId][props.categoryField].buckets || [],\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tselectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n\t\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits || [],\n\t\taggregationData: state.compositeAggregations[props.componentId] || [],\n\t\tthemePreset: state.config.themePreset,\n\t\tisLoading: state.isLoading[props.componentId],\n\t\terror: state.error[props.componentId],\n\t\tconfig: state.config,\n\t\tpromotedResults: state.promotedResults[props.componentId] || [],\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n\t\t\treturn dispatch((0, _actions.setSuggestionsSearchValue)(value));\n\t\t},\n\t\tsetComponentProps: function setComponentProps(component, options) {\n\t\t\treturn dispatch((0, _actions.setComponentProps)(component, options));\n\t\t},\n\t\tupdateComponentProps: function updateComponentProps(component, options) {\n\t\t\treturn dispatch((0, _actions.updateComponentProps)(component, options));\n\t\t},\n\t\taddComponent: function addComponent(component) {\n\t\t\treturn dispatch((0, _actions.addComponent)(component));\n\t\t},\n\t\tremoveComponent: function removeComponent(component) {\n\t\t\treturn dispatch((0, _actions.removeComponent)(component));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tsetQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n\t\t\treturn dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\twatchComponent: function watchComponent(component, react) {\n\t\t\treturn dispatch((0, _actions.watchComponent)(component, react));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition) {\n\t\t\treturn dispatch((0, _actions.recordSuggestionClick)(searchPosition));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn _react2.default.createElement(CategorySearch, _extends({ ref: props.myForwardedRef }, props));\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, CategorySearch);\n\nForwardRefComponent.name = 'CategorySearch';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}